var __extends=this&&this.__extends||function(a,L){function D(){this.constructor=a}for(var J in L)L.hasOwnProperty(J)&&(a[J]=L[J]);D.prototype=L.prototype;a.prototype=new D},java;
(function(a){(function(a){var D=function(){function a(){}a.gc=function(){};a.arraycopy=function(a,n,m,k,g){for(var e=0;e<g;e++)m[k+e]=a[n+e]};return a}();a.System=D;D=function(){function a(){this._buffer="";this.length=0}a.prototype.append=function(a){this._buffer+=a;length=this._buffer.length;return this};a.prototype.toString=function(){return this._buffer};return a}();a.StringBuilder=D})(a.lang||(a.lang={}));(function(a){(function(a){(function(a){var k=function(){function a(e){this._internal=e}
a.prototype.set=function(a,c){this._internal[a]=c};a.prototype.get=function(a){return this._internal[a]};a.prototype.getAndSet=function(a,c){var b=this._internal[a];this._internal[a]=c;return b};a.prototype.compareAndSet=function(a,c,b){return this._internal[a]==c?(this._internal[a]=b,!0):!1};return a}();a.AtomicIntegerArray=k;k=function(){function a(){this._internal=null}a.prototype.compareAndSet=function(a,c){return this._internal==a?(this._internal=c,!0):!1};a.prototype.get=function(){return this._internal};
a.prototype.set=function(a){this._internal=a};a.prototype.getAndSet=function(a){var c=this._internal;this._internal=a;return c};return a}();a.AtomicReference=k;k=function(){function a(e){this._internal=0;this._internal=e}a.prototype.compareAndSet=function(a,c){return this._internal==a?(this._internal=c,!0):!1};a.prototype.get=function(){return this._internal};a.prototype.incrementAndGet=function(){this._internal++;return this._internal};a.prototype.decrementAndGet=function(){this._internal--;return this._internal};
return a}();a.AtomicLong=k;k=function(){function a(e){this._internal=0;this._internal=e}a.prototype.compareAndSet=function(a,c){return this._internal==a?(this._internal=c,!0):!1};a.prototype.get=function(){return this._internal};a.prototype.set=function(a){this._internal=a};a.prototype.getAndSet=function(a){var c=this._internal;this._internal=a;return c};a.prototype.incrementAndGet=function(){this._internal++;return this._internal};a.prototype.decrementAndGet=function(){this._internal--;return this._internal};
a.prototype.getAndIncrement=function(){var a=this._internal;this._internal++;return a};a.prototype.getAndDecrement=function(){var a=this._internal;this._internal--;return a};return a}();a.AtomicInteger=k})(a.atomic||(a.atomic={}))})(a.concurrent||(a.concurrent={}));var D=function(){function a(){}a.prototype.nextInt=function(a){"undefined"===typeof a&&(a=Math.pow(2,32));return Math.floor(Math.random()*a)};a.prototype.nextDouble=function(){return Math.random()};a.prototype.nextBoolean=function(){return.5<=
Math.random()};return a}();a.Random=D;D=function(){function a(){}a.fill=function(a,k,g,e){for(g=k+g;k<g;k++)a[k]=e};return a}();a.Arrays=D;D=function(){function a(){}a.reverse=function(a){for(var k=new J,g=0;g<a.size();g++)k.add(a.get(g));a.clear();for(g=k.size()-1;0<=g;g--)a.add(k.get(g))};a.sort=function(a){a.sort()};return a}();a.Collections=D;D=function(){function a(){Array.apply(this,arguments);return[]}a.prototype.pop=function(){return""};a.prototype.push=function(a){return 0};a.prototype.splice=
function(a,k){};a.prototype.indexOf=function(a){return 0};a.prototype.shift=function(){return""};a.prototype.sort=function(){};return a}();a.XArray=D;D.prototype=[];var J=function(a){function m(){a.apply(this,arguments)}__extends(m,a);m.prototype.addAll=function(a){a=a.toArray(null);for(var g=0;g<a.length;g++)this.push(a[g])};m.prototype.clear=function(){this.length=0};m.prototype.poll=function(){return this.shift()};m.prototype.remove=function(a){};m.prototype.toArray=function(a){return this};m.prototype.size=
function(){return this.length};m.prototype.add=function(a){this.push(a)};m.prototype.get=function(a){return this[a]};m.prototype.contains=function(a){return-1!=this.indexOf(a)};m.prototype.isEmpty=function(){return 0==this.length};return m}(D);a.List=J;D=function(a){function m(){a.apply(this,arguments)}__extends(m,a);return m}(J);a.ArrayList=D;D=function(a){function m(){a.apply(this,arguments)}__extends(m,a);return m}(J);a.LinkedList=D;D=function(){function a(){this.content=[]}a.prototype.pop=function(){return this.content.pop()};
a.prototype.push=function(a){this.content.push(a)};a.prototype.isEmpty=function(){return 0==this.content.length};a.prototype.peek=function(){return this.content.slice(-1)[0]};return a}();a.Stack=D;D=function(){function a(){}a.prototype.get=function(a){return this[a]};a.prototype.put=function(a,k){var g=this[a];this[a]=k;return g};a.prototype.containsKey=function(a){return this.hasOwnProperty(a)};a.prototype.remove=function(a){var k=this[a];delete this[a];return k};a.prototype.keySet=function(){var a=
new z,k;for(k in this)this.hasOwnProperty(k)&&a.add(k);return a};a.prototype.isEmpty=function(){return 0==Object.keys(this).length};a.prototype.values=function(){var a=new z,k;for(k in this)this.hasOwnProperty(k)&&a.add(this[k]);return a};a.prototype.clear=function(){for(var a in this)this.hasOwnProperty(a)&&delete this[a]};return a}();a.Map=D;D=function(a){function m(){a.apply(this,arguments)}__extends(m,a);return m}(D);a.HashMap=D;D=function(){function a(){}a.prototype.add=function(a){this[a]=a};
a.prototype.clear=function(){for(var a in this)this.hasOwnProperty(a)&&delete this[a]};a.prototype.contains=function(a){return this.hasOwnProperty(a)};a.prototype.addAll=function(a){a=a.toArray(null);for(var k=0;k<a.length;k++)this[a[k]]=a[k]};a.prototype.remove=function(a){delete this[a]};a.prototype.size=function(){return Object.keys(this).length};a.prototype.isEmpty=function(){return 0==this.size()};a.prototype.toArray=function(a){for(var k in this)a.push(this[k]);return a};return a}();a.Set=D;
var z=function(a){function m(){a.apply(this,arguments)}__extends(m,a);return m}(D);a.HashSet=z})(a.util||(a.util={}))})(java||(java={}));var org;
(function(a){(function(L){(function(D){var J=function(){function a(){}a.CAS_MAX_TRY=1E3;a.CALLBACK_HISTORY=1E3;a.LONG_SIZE=53;a.PREFIX_SIZE=16;a.BEGINNING_OF_TIME=-9007199254740990;a.END_OF_TIME=9007199254740990;a.NULL_LONG=9007199254740991;a.KEY_PREFIX_MASK=137438953471;a.KEY_SEP="|";a.ELEM_SEP=";";a.VAL_SEP=",";a.CHUNK_ELEM_SEP="%";a.CHUNK_VAL_SEP="$";a.CACHE_INIT_SIZE=16;a.CACHE_LOAD_FACTOR=.75;return a}();D.KConfig=J;J=function(){function z(a,m,k){this.universe=a;this.time=m;this.obj=k}z.toString=
function(n,m){var k=new java.lang.StringBuilder,g=3*m;n[g]!=a.kevoree.modeling.KConfig.NULL_LONG&&a.kevoree.modeling.util.Base64.encodeLongToBuffer(n[g],k);k.append(a.kevoree.modeling.KConfig.KEY_SEP);n[g+1]!=a.kevoree.modeling.KConfig.NULL_LONG&&a.kevoree.modeling.util.Base64.encodeLongToBuffer(n[g+1],k);k.append(a.kevoree.modeling.KConfig.KEY_SEP);n[g+2]!=a.kevoree.modeling.KConfig.NULL_LONG&&a.kevoree.modeling.util.Base64.encodeLongToBuffer(n[g+2],k);return k.toString()};z.createObject=function(n,
m,k){return new a.kevoree.modeling.KContentKey(n,m,k)};z.createGlobalUniverseTree=function(){return new a.kevoree.modeling.KContentKey(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG)};z.createRootUniverseTree=function(){return new a.kevoree.modeling.KContentKey(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.END_OF_TIME)};z.createLastPrefix=function(){return new a.kevoree.modeling.KContentKey(a.kevoree.modeling.KConfig.END_OF_TIME,
a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG)};z.create=function(n){if(null==n||0==n.length)return null;for(var m=new a.kevoree.modeling.KContentKey(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG),k=n.length,g=-1,e=0,c=0;c<k;c++)if(n.charAt(c)==a.kevoree.modeling.KConfig.KEY_SEP){if(-1!=g)try{switch(e){case 0:m.universe=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(n,g,c);break;case 1:m.time=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(n,
g,c);break;case 2:m.obj=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(n,g,c)}}catch(b){if(b instanceof Error)g=b,console.error(g.stack);else throw b;}g=-1;e++}else-1==g&&(g=c);if(-1!=g)try{switch(e){case 0:m.universe=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(n,g,k);break;case 1:m.time=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(n,g,k);break;case 2:m.obj=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(n,g,k)}}catch(d){if(d instanceof Error)g=d,console.error(g.stack);
else throw d;}return m};z.prototype.equals=function(n){return n instanceof a.kevoree.modeling.KContentKey?n.universe==this.universe&&n.time==this.time&&n.obj==this.obj:!1};z.NULL_KEY=new Float64Array([a.kevoree.modeling.KConfig.END_OF_TIME,a.kevoree.modeling.KConfig.END_OF_TIME,a.kevoree.modeling.KConfig.END_OF_TIME]);z.GLOBAL_UNIVERSE_KEY=new Float64Array([a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG]);return z}();D.KContentKey=J;
(function(z){var n=function(){function a(k,g){this._name=k;this._id=g}a.prototype.name=function(){return this._name};a.prototype.id=function(){return this._id};return a}();z.AbstractDataType=n;n=function(){function m(a){this._manager=a;this._manager.setModel(this);this._key=this._manager.nextModelKey()}m.prototype.metaModel=function(){throw"Abstract method";};m.prototype.connect=function(a){this._manager.connect(a)};m.prototype.disconnect=function(a){this._manager.close(a)};m.prototype.manager=function(){return this._manager};
m.prototype.newUniverse=function(){var a=this._manager.nextUniverseKey(),g=this.internalCreateUniverse(a);this._manager.initUniverse(a,a);return g};m.prototype.internalCreateUniverse=function(a){throw"Abstract method";};m.prototype.internalCreateObject=function(a,g,e,c,b,d){throw"Abstract method";};m.prototype.createProxy=function(a,g,e,c,b,d){return this.internalCreateObject(a,g,e,c,b,d)};m.prototype.universe=function(a){var g=this.internalCreateUniverse(a);this._manager.initUniverse(a,a);return g};
m.prototype.save=function(a){this._manager.save(a)};m.prototype.setOperation=function(a,g){this._manager.operationManager().register(a,g)};m.prototype.setOperationByName=function(a,g,e){var c=this._manager.model().metaModel().metaClassByName(a);if(null!=c)if(c=c.operation(g),null!=c)this._manager.operationManager().register(c,e);else throw Error("MetaOperation not found with name "+g+" on MetaClass "+a);else throw Error("MetaClass not found with name "+a);};m.prototype.defer=function(){return new a.kevoree.modeling.defer.impl.Defer};
m.prototype.key=function(){return this._key};m.prototype.create=function(k,g,e){if(!a.kevoree.modeling.util.Checker.isDefined(k))return null;k=this.internalCreateObject(g,e,this._manager.nextObjectKey(),k,g,e);null!=k&&this._manager.initKObject(k);return k};m.prototype.createByName=function(a,g,e){return this.create(this._manager.model().metaModel().metaClassByName(a),g,e)};m.prototype.lookup=function(a,g,e,c){this._manager.lookup(a,g,e,c)};m.prototype.lookupAllObjects=function(a,g,e,c){this._manager.lookupAllObjects(a,
g,e,c)};m.prototype.lookupAllTimes=function(a,g,e,c){this._manager.lookupAllTimes(a,g,e,c)};m.prototype.createPreparedLookup=function(a){return this._manager.createPreparedLookup(a)};m.prototype.lookupPrepared=function(a,g){this._manager.lookupPrepared(a,g)};m.prototype.createListener=function(a){return this._manager.createListener(a)};m.prototype.createModelContext=function(){return new a.kevoree.modeling.abs.AbstractKModelContext(this)};m.prototype.createTraversal=function(k){return new a.kevoree.modeling.traversal.impl.Traversal(k)};
m.prototype.createReusableTraversal=function(){return new a.kevoree.modeling.traversal.impl.Traversal(null)};return m}();z.AbstractKModel=n;n=function(){function a(k){this._origin=k;this._bounds=new java.util.concurrent.atomic.AtomicReference;this._callbacks=new java.util.concurrent.atomic.AtomicReference}a.prototype.set=function(a,g,e,c){a=new Float64Array([a,g,e,c]);this._bounds.set(a);g=this._callbacks.get();if(null!=g)for(e=0;e<g.length;e++)if(null!=g[e])g[e](a)};a.prototype.originTime=function(){return this._bounds.get()[a.ORIGIN_TIME]};
a.prototype.originUniverse=function(){return this._bounds.get()[a.ORIGIN_UNIVERSE]};a.prototype.maxTime=function(){return this._bounds.get()[a.MAX_TIME]};a.prototype.maxUniverse=function(){return this._bounds.get()[a.MAX_UNIVERSE]};a.prototype.listen=function(a){var g,e;do{g=this._callbacks.get();var c=0;null!=g&&(c=g.length);e=[];null!=g&&0<c&&java.lang.System.arraycopy(g,0,e,0,c);e[c]=a}while(!this._callbacks.compareAndSet(g,e))};a.prototype.model=function(){return this._origin};a.ORIGIN_TIME=0;
a.MAX_TIME=1;a.ORIGIN_UNIVERSE=2;a.MAX_UNIVERSE=3;a.NB_ELEM=4;return a}();z.AbstractKModelContext=n;n=function(){function m(a,g,e,c,b,d,f){this._universe=a;this._time=g;this._uuid=e;this._metaClass=c;this._manager=b;this._previousResolveds=new java.util.concurrent.atomic.AtomicReference;a=new Float64Array([d,f]);this._previousResolveds.set(a)}m.prototype.previousResolved=function(){return this._previousResolveds};m.prototype.timeDephasing=function(){return this._time-this._previousResolveds.get()[m.TIME_PREVIOUS_INDEX]};
m.prototype.uuid=function(){return this._uuid};m.prototype.metaClass=function(){return this._metaClass};m.prototype.now=function(){return this._time};m.prototype.universe=function(){return this._universe};m.prototype.detach=function(k){var g=this,e=this._manager.preciseChunk(this._universe,this._time,this._uuid,this._metaClass,this._previousResolveds);if(null==e)null!=k&&k(Error(m.OUT_OF_CACHE_MSG));else{for(var c=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap(-1,-1,-1,null),b=this._metaClass.metaElements(),
d=0;d<b.length;d++)if(null!=b[d]&&b[d].metaType()==a.kevoree.modeling.meta.MetaType.RELATION){for(var f=e.getLongArray(b[d].index(),this._metaClass),h=0;h<f.length;h++)c.put(f[h],f[h]);e.clearLongArray(b[d].index(),this._metaClass)}var l=new Float64Array(c.size()),w=new Int32Array(1);w[0]=0;c.each(function(b,d){l[w[0]]=d;w[0]++});this._manager.lookupAllObjects(this._universe,this._time,l,function(b){for(var l=0;l<b.length;l++)if(null!=b[l])for(var d=b[l].referencesWith(g),c=0;c<d.length;c++)b[l].internal_remove(d[c],
g,!1);null!=k&&k(null)})}};m.prototype.select=function(k,g){if(a.kevoree.modeling.util.Checker.isDefined(k)){var e=[this];a.kevoree.modeling.traversal.query.impl.QueryEngine.getINSTANCE().eval(k,e,g)}else g([])};m.prototype.get=function(a){var g=this.internal_transpose_att(a);if(null==g)throw Error("Bad KMF usage, the attribute named "+a.metaName()+" is not part of "+this.metaClass().metaName());return g.strategy().extrapolate(this,g,this._manager)};m.prototype.getByName=function(a){a=this._metaClass.attribute(a);
return null!=a?a.strategy().extrapolate(this,a,this._manager):null};m.prototype.set=function(a,g){var e=this.internal_transpose_att(a);if(null==e)throw Error("Bad KMF usage, the attribute named "+a.metaName()+" is not part of "+this.metaClass().metaName());e.strategy().mutate(this,e,g,this._manager)};m.prototype.setByName=function(a,g){var e=this._metaClass.attribute(a);null!=e&&e.strategy().mutate(this,e,g,this._manager)};m.prototype.addByName=function(a,g){var e=this._metaClass.reference(a);if(null==
e)throw Error("Bad KMF usage, the reference named "+a+" is not part of "+this.metaClass().metaName());this.internal_add(e,g,!0)};m.prototype.add=function(a,g){var e=this.internal_transpose_ref(a);if(null==e)throw Error("Bad KMF usage, the reference named "+a.metaName()+" is not part of "+this.metaClass().metaName());this.internal_add(e,g,!0)};m.prototype.internal_add=function(a,g,e){if(null==g)throw Error("Bad KMF usage, the objToAdd param should not be null in the add method of reference named "+
a.metaName()+" part of "+this.metaClass().metaName());var c=this._manager.preciseChunk(this._universe,this._time,this._uuid,this._metaClass,this._previousResolveds);if(null!=c)if(0>a.maxBound()||a.maxBound()<=c.getLongArraySize(a.index(),this._metaClass)+1)c.addLongToArray(a.index(),g.uuid(),this._metaClass)&&e&&g.internal_add(g.metaClass().reference(a.oppositeName()),this,!1);else throw Error("MaxBound constraint violated on relation "+a.metaName()+" from metaClass "+this._metaClass.metaName());
};m.prototype.removeByName=function(a,g){var e=this._metaClass.reference(a);if(null==e)throw Error("Bad KMF usage, the reference named "+a+" is not part of "+this.metaClass().metaName());this.internal_remove(e,g,!0)};m.prototype.remove=function(a,g){var e=this.internal_transpose_ref(a);if(null==e)throw Error("Bad KMF usage, the reference named "+a.metaName()+" is not part of "+this.metaClass().metaName());this.internal_remove(e,g,!0)};m.prototype.internal_remove=function(a,g,e){var c=this._manager.preciseChunk(this._universe,
this._time,this._uuid,this._metaClass,this._previousResolveds);null!=c&&c.removeLongToArray(a.index(),g.uuid(),this._metaClass)&&e&&g.internal_remove(g.metaClass().reference(a.oppositeName()),this,!1)};m.prototype.addAllByName=function(a,g){var e=this._metaClass.reference(a);if(null==e)throw Error("Bad KMF usage, the reference named "+a+" is not part of "+this.metaClass().metaName());for(var c=0;c<g.length;c++)this.internal_add(e,g[c],!0)};m.prototype.addAll=function(a,g){var e=this.internal_transpose_ref(a);
if(null==e)throw Error("Bad KMF usage, the reference named "+a.metaName()+" is not part of "+this.metaClass().metaName());for(var c=0;c<g.length;c++)this.internal_add(e,g[c],!0)};m.prototype.removeAllByName=function(a,g){var e=this._metaClass.reference(a);if(null==e)throw Error("Bad KMF usage, the reference named "+a+" is not part of "+this.metaClass().metaName());this.internal_removeAll(e,g)};m.prototype.removeAll=function(a,g){var e=this.internal_transpose_ref(a);if(null==e)throw Error("Bad KMF usage, the reference named "+
a.metaName()+" is not part of "+this.metaClass().metaName());this.internal_removeAll(e,g)};m.prototype.internal_removeAll=function(a,g){var e=this,c=this,b=this._manager.preciseChunk(this._universe,this._time,this._uuid,this._metaClass,this._previousResolveds);this._manager.lookupAllObjects(this._universe,this._time,b.getLongArray(a.index(),this._metaClass),function(d){for(var f=0;f<d.length;f++)if(null!=d[f]){var h=d[f].metaClass().reference(a.oppositeName());d[f].internal_remove(h,c,!1)}b.clearLongArray(a.index(),
e._metaClass);null!=g&&g(null)})};m.prototype.size=function(a){var g=this.internal_transpose_ref(a);if(null==g)throw Error("Bad KMF usage, the attribute named "+a.metaName()+" is not part of "+this.metaClass().metaName());a=this._manager.closestChunk(this._universe,this._time,this._uuid,this._metaClass,this._previousResolveds);if(null!=a){g=a.getPrimitiveType(g.index(),this._metaClass);if(null==g)return 0;try{return g.length}catch(e){if(e instanceof Error)return console.error(e.stack),0;throw e;}}else return 0};
m.prototype.getRelationByName=function(a,g){var e=this.internal_transpose_ref(this._metaClass.reference(a));if(null==e)throw Error("Bad KMF usage, the reference named "+a+" is not part of "+this.metaClass().metaName());this.internal_getRelation(e,g)};m.prototype.getRelation=function(a,g){var e=this.internal_transpose_ref(a);if(null==e)throw Error("Bad KMF usage, the reference named "+a.metaName()+" is not part of "+this.metaClass().metaName());this.internal_getRelation(e,g)};m.prototype.internal_getRelation=
function(a,g){var e=this._manager.closestChunk(this._universe,this._time,this._uuid,this._metaClass,this._previousResolveds);null==e?g([]):(e=e.getLongArray(a.index(),this._metaClass),null==e?g([]):this._manager.lookupAllObjects(this._universe,this._time,e,g))};m.prototype.getRelationValuesByName=function(a){var g=this.internal_transpose_ref(this.metaClass().reference(a));if(null==g)throw Error("Bad KMF usage, the reference named "+a+" is not part of "+this.metaClass().metaName());return this.internal_getRefValues(g)};
m.prototype.getRelationValues=function(a){var g=this.internal_transpose_ref(a);if(null==g)throw Error("Bad KMF usage, the reference named "+a+" is not part of "+this.metaClass().metaName());return this.internal_getRefValues(g)};m.prototype.internal_getRefValues=function(a){var g=this._manager.closestChunk(this._universe,this._time,this._uuid,this._metaClass,this._previousResolveds);if(null==g)return new Float64Array(0);a=g.getLongArray(a.index(),this._metaClass);return null==a?new Float64Array(0):
a};m.prototype.visitAttributes=function(k){if(a.kevoree.modeling.util.Checker.isDefined(k))for(var g=this.metaClass().metaElements(),e=0;e<g.length;e++)if(null!=g[e]&&g[e].metaType()==a.kevoree.modeling.meta.MetaType.ATTRIBUTE){var c=g[e];k(c,this.get(c))}};m.prototype.visit=function(k,g){this.internal_visit(k,g,new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap(-1,-1,-1,null),new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap(-1,-1,-1,null))};m.prototype.internal_visit=function(k,g,
e,c){if(a.kevoree.modeling.util.Checker.isDefined(k)){null!=c&&c.put(this._uuid,this._uuid);for(var b=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap(-1,-1,-1,null),d=this.metaClass().metaElements(),f=0;f<d.length;f++)if(null!=d[f]&&d[f].metaType()==a.kevoree.modeling.meta.MetaType.RELATION){var h=d[f],l=this._manager.closestChunk(this._universe,this._time,this._uuid,this._metaClass,this._previousResolveds);if(null!=l&&(h=l.getLongArray(h.index(),this._metaClass),null!=h))try{for(l=0;l<
h.length;l++)null!=c&&c.contains(h[l])||b.put(h[l],h[l])}catch(w){if(w instanceof Error)console.error(w.stack);else throw w;}}if(0==b.size())a.kevoree.modeling.util.Checker.isDefined(g)&&g(null);else{var F=new Float64Array(b.size()),C=new Int32Array([0]);b.each(function(b,l){F[C[0]]=l;C[0]++});this._manager.lookupAllObjects(this._universe,this._time,F,function(b){for(var l=new java.util.ArrayList,d=0;d<b.length;d++){var h=b[d],f=a.kevoree.modeling.traversal.visitor.KVisitResult.CONTINUE;null!=h&&
(null==k||null!=e&&e.contains(h.uuid())||(f=k(h)),null!=e&&e.put(h.uuid(),h.uuid()));null!=f&&f.equals(a.kevoree.modeling.traversal.visitor.KVisitResult.STOP)?a.kevoree.modeling.util.Checker.isDefined(g)&&g(null):(a.kevoree.modeling.util.Checker.isDefined(f)||(f=a.kevoree.modeling.traversal.visitor.KVisitResult.STOP),null!=h&&f.equals(a.kevoree.modeling.traversal.visitor.KVisitResult.CONTINUE)&&(null!=c&&c.contains(h.uuid())||l.add(h)))}if(l.isEmpty())a.kevoree.modeling.util.Checker.isDefined(g)&&
g(null);else{var w=new Int32Array(1);w[0]=0;var F=new java.util.ArrayList;F.add(function(b){w[0]+=1;w[0]==l.size()?a.kevoree.modeling.util.Checker.isDefined(g)&&g(null):l.get(w[0]).internal_visit(k,F.get(0),e,c)});l.get(w[0]).internal_visit(k,F.get(0),e,c)}})}}};m.prototype.toJSON=function(){var a=new java.lang.StringBuilder;a.append('{"universe":');a.append(this._universe);a.append(',"time":');a.append(this._time);a.append(',"uuid":');a.append(this._uuid);var g=this._manager.closestChunk(this._universe,
this._time,this._uuid,this._metaClass,this._previousResolveds);null!=g&&(a.append(',"data":'),a.append(g.toJSON(this._manager.model().metaModel())));a.append("}");return a.toString()};m.prototype.toString=function(){return this.toJSON()};m.prototype.equals=function(k){return k instanceof a.kevoree.modeling.abs.AbstractKObject?k._uuid==this._uuid&&k._time==this._time&&k._universe==this._universe:!1};m.prototype.hashCode=function(){return this._universe^this._time^this._uuid};m.prototype.jump=function(a,
g){this._manager.lookup(this._universe,a,this._uuid,g)};m.prototype.internal_transpose_ref=function(k){return a.kevoree.modeling.util.Checker.isDefined(k)?this._metaClass.metaByName(k.metaName()):null};m.prototype.internal_transpose_att=function(k){return a.kevoree.modeling.util.Checker.isDefined(k)?this._metaClass.metaByName(k.metaName()):null};m.prototype.internal_transpose_op=function(k){return a.kevoree.modeling.util.Checker.isDefined(k)?this._metaClass.metaByName(k.metaName()):null};m.prototype.traversal=
function(){return new a.kevoree.modeling.traversal.impl.Traversal([this])};m.prototype.referencesWith=function(k){if(a.kevoree.modeling.util.Checker.isDefined(k)){var g=this._manager.closestChunk(this._universe,this._time,this._uuid,this._metaClass,this._previousResolveds);if(null!=g){for(var e=this.metaClass().metaElements(),c=new java.util.ArrayList,b=0;b<e.length;b++)if(null!=e[b]&&e[b].metaType()==a.kevoree.modeling.meta.MetaType.RELATION){var d=g.getLongArray(e[b].index(),this._metaClass);if(null!=
d)for(var f=k.uuid(),h=0;h<d.length;h++)if(d[h]==f){c.add(e[b]);break}}return c.toArray([])}}return[]};m.prototype.invokeOperation=function(a,g,e,c){this._manager.operationManager().invoke(this,a,g,e,c)};m.prototype.invokeOperationByName=function(a,g,e,c){var b=this._metaClass.operation(a);if(null==b)throw Error("Operation not founded with name "+a+" in the metaClass "+this._metaClass.metaName());this._manager.operationManager().invoke(this,b,g,e,c)};m.prototype.manager=function(){return this._manager};
m.prototype.internal_times=function(a,g,e){this._manager.resolveTimes(this._universe,this._uuid,a,g,e)};m.prototype.allTimes=function(k){this.internal_times(a.kevoree.modeling.KConfig.BEGINNING_OF_TIME,a.kevoree.modeling.KConfig.END_OF_TIME,k)};m.prototype.timesBefore=function(k,g){this.internal_times(a.kevoree.modeling.KConfig.BEGINNING_OF_TIME,k,g)};m.prototype.timesAfter=function(k,g){this.internal_times(k,a.kevoree.modeling.KConfig.END_OF_TIME,g)};m.prototype.timesBetween=function(a,g,e){this.internal_times(a,
g,e)};m.OUT_OF_CACHE_MSG="Out of cache Error";m.UNIVERSE_PREVIOUS_INDEX=0;m.TIME_PREVIOUS_INDEX=1;return m}();z.AbstractKObject=n;n=function(m){function k(a,e,c,b,d,f,h){m.call(this,a,e,c,b,d,f,h)}__extends(k,m);k.prototype.dependenciesResolver=function(a){var e=this;return function(c){c=e._metaClass.dependencies().dependencyByName(c);if(null!=c){var b=[];b[0]=a[c.index()];return b}return null}};k.prototype.genericTrain=function(a,e,c){var b=[[]];b[0]=a;a=null;null!=e&&(a=[[]],a[0]=e);this.genericTrainAll(b,
a,c)};k.prototype.genericTrainAll=function(g,e,c){var b=this;if(null==g)throw Error("Dependencies are mandatory for KObjectInfer");for(var d=this,f=this.manager().model().defer(),h=0;h<g.length;h++){if(g[h].length!=this._metaClass.dependencies().allDependencies().length)throw Error("Bad number of arguments for allDependencies");for(var l=this.dependenciesResolver(g[h]),w=0;w<this._metaClass.inputs().length;w++)this._metaClass.inputs()[w].extractor().exec(null,l,f.waitResult())}f.then(function(l){for(var h=
new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(g.length,b._metaClass.inputs().length),f=0,w=0;w<g.length;w++)for(var k=0;k<b._metaClass.inputs().length;k++){var p=l[f];null!=p&&0<p.length&&h.set(w,k,p[0]);f++}l=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(1,b._metaClass.outputs().length);for(w=0;w<g.length;w++)for(k=0;k<b._metaClass.outputs().length;k++)f=b._metaClass.outputs()[k],p=null,null!=e&&(p=e[w][k]),l.set(w,k,b.internalConvertOutput(p,f));b._metaClass.inferAlg().train(h,
l,d,b._manager);null!=c&&c(null)})};k.prototype.genericInfer=function(a,e){var c=[[]];c[0]=a;this.genericInferAll(c,function(b){null!=b&&0<b.length?e(b[0]):e(null)})};k.prototype.genericInferAll=function(g,e){var c=this;if(null==g)throw Error("Bad number of arguments for allDependencies");for(var b=this,d=this.manager().model().defer(),f=0;f<g.length;f++){if(g[f].length!=this._metaClass.dependencies().allDependencies().length)throw Error("Bad number of arguments for allDependencies");for(var h=this.dependenciesResolver(g[f]),
l=0;l<this._metaClass.inputs().length;l++)this._metaClass.inputs()[l].extractor().exec(null,h,d.waitResult())}d.then(function(l){for(var d=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(g.length,c._metaClass.inputs().length),h=0,f=0;f<g.length;f++)for(var I=0;I<c._metaClass.inputs().length;I++){var k=l[h];null!=k&&0<k.length&&d.set(f,I,k[0]);h++}l=c._metaClass.inferAlg().infer(d,b,c._manager);d=[[]];for(f=0;f<l.rows();f++)for(d[f]=[],I=0;I<l.columns();I++)d[f][I]=c.internalReverseOutput(l.get(f,
I),c._metaClass.outputs()[I]);e(d)})};k.prototype.resetLearning=function(){throw Error("Not Implemented Yet!");};k.prototype.internalConvertOutput=function(g,e){if(null==g)return 0;switch(e.attributeTypeId()){case a.kevoree.modeling.meta.KPrimitiveTypes.BOOL_ID:return g?1:0;case a.kevoree.modeling.meta.KPrimitiveTypes.DOUBLE_ID:return g;case a.kevoree.modeling.meta.KPrimitiveTypes.INT_ID:return g;case a.kevoree.modeling.meta.KPrimitiveTypes.CONTINUOUS_ID:return g;case a.kevoree.modeling.meta.KPrimitiveTypes.LONG_ID:return g;
case a.kevoree.modeling.meta.KPrimitiveTypes.STRING_ID:throw Error("String are not managed yet");default:if(a.kevoree.modeling.meta.KPrimitiveTypes.isEnum(e.attributeTypeId())){var c=this._manager.model().metaModel().metaTypes()[e.attributeTypeId()];if(g instanceof a.kevoree.modeling.meta.impl.MetaLiteral)return g.index();c=c.literalByName(g.toString());if(null!=c)return c.index()}return 0}};k.prototype.internalReverseOutput=function(g,e){switch(e.attributeTypeId()){case a.kevoree.modeling.meta.KPrimitiveTypes.BOOL_ID:return.5<=
g?!0:!1;case a.kevoree.modeling.meta.KPrimitiveTypes.DOUBLE_ID:return g;case a.kevoree.modeling.meta.KPrimitiveTypes.INT_ID:return g;case a.kevoree.modeling.meta.KPrimitiveTypes.CONTINUOUS_ID:return g;case a.kevoree.modeling.meta.KPrimitiveTypes.LONG_ID:return g;case a.kevoree.modeling.meta.KPrimitiveTypes.STRING_ID:throw Error("String are not managed yet");default:if(a.kevoree.modeling.meta.KPrimitiveTypes.isEnum(e.attributeTypeId())){var c=this.math_ceil(g);return this._manager.model().metaModel().metaTypes()[e.attributeTypeId()].literal(c)}return null}};
k.prototype.math_ceil=function(a){return Math.round(a)};return k}(a.kevoree.modeling.abs.AbstractKObject);z.AbstractKObjectInfer=n;n=function(){function m(a,g){this._universe=a;this._manager=g}m.prototype.key=function(){return this._universe};m.prototype.time=function(k){if(k<=a.kevoree.modeling.KConfig.END_OF_TIME&&k>=a.kevoree.modeling.KConfig.BEGINNING_OF_TIME)return this.internal_create(k);throw Error("The selected Time "+k+" is out of the range of KMF managed time");};m.prototype.internal_create=
function(a){throw"Abstract method";};m.prototype.equals=function(k){return k instanceof a.kevoree.modeling.abs.AbstractKUniverse?k._universe==this._universe:!1};m.prototype.diverge=function(){var a=this._manager.model(),g=this._manager.nextUniverseKey(),a=a.internalCreateUniverse(g);this._manager.initUniverse(g,this._universe);return a};m.prototype.lookupAllTimes=function(a,g,e){this._manager.lookupAllTimes(this._universe,g,a,e)};m.prototype.createListener=function(){return this._manager.createListener(this._universe)};
return m}();z.AbstractKUniverse=n;n=function(){function m(a,g,e){this._universe=a;this._time=g;this._manager=e}m.prototype.now=function(){return this._time};m.prototype.universe=function(){return this._universe};m.prototype.setRoot=function(a,g){this._manager.setRoot(a,g)};m.prototype.getRoot=function(a){this._manager.getRoot(this._universe,this._time,a)};m.prototype.select=function(k,g){a.kevoree.modeling.util.Checker.isDefined(g)&&(null==k||0==k.length?g([]):this._manager.getRoot(this._universe,
this._time,function(e){if(null==e)g([]);else{var c=[];c[0]=e;a.kevoree.modeling.traversal.query.impl.QueryEngine.getINSTANCE().eval(k,c,g)}}))};m.prototype.lookup=function(a,g){this._manager.lookup(this._universe,this._time,a,g)};m.prototype.lookupAll=function(a,g){this._manager.lookupAllObjects(this._universe,this._time,a,g)};m.prototype.create=function(a){return this._manager.model().create(a,this._universe,this._time)};m.prototype.createByName=function(a){return this.create(this._manager.model().metaModel().metaClassByName(a))};
m.prototype.json=function(){return new a.kevoree.modeling.format.json.JsonFormat(this._universe,this._time,this._manager)};m.prototype.equals=function(k){return a.kevoree.modeling.util.Checker.isDefined(k)&&k instanceof a.kevoree.modeling.abs.AbstractKView?k._time==this._time&&k._universe==this._universe:!1};return m}();z.AbstractKView=n})(D.abs||(D.abs={}));(function(z){(function(n){var m=function(){function k(){this.backend=new a.kevoree.modeling.memory.chunk.impl.ArrayStringMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,
a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR);this.additionalInterceptors=null}k.prototype.atomicGetIncrement=function(g,e){var c=this.backend.get(a.kevoree.modeling.KContentKey.toString(g,0)),b;if(null!=c)try{b=a.kevoree.modeling.util.PrimitiveHelper.parseShort(c)}catch(d){if(d instanceof Error)console.error(d.stack),b=a.kevoree.modeling.util.PrimitiveHelper.SHORT_MIN_VALUE();else throw d;}else b=0;c=b==a.kevoree.modeling.util.PrimitiveHelper.SHORT_MAX_VALUE()?a.kevoree.modeling.util.PrimitiveHelper.SHORT_MIN_VALUE():
b+1;this.backend.put(a.kevoree.modeling.KContentKey.toString(g,0),""+c);e(b)};k.prototype.get=function(g,e){for(var c=g.length/3,b=[],d=0;d<c;d++)b[d]=this.backend.get(a.kevoree.modeling.KContentKey.toString(g,d));null!=e&&e(b)};k.prototype.put=function(g,e,c,b){for(var d=g.length/3,f=0;f<d;f++)this.backend.put(a.kevoree.modeling.KContentKey.toString(g,f),e[f]);null!=this.additionalInterceptors&&this.additionalInterceptors.each(function(d,l){if(null!=l&&d!=b)l.onKeysUpdate(g)});null!=c&&c(null)};
k.prototype.remove=function(g,e){for(var c=g.length/3,b=0;b<c;b++)this.backend.remove(a.kevoree.modeling.KContentKey.toString(g,b));null!=e&&e(null)};k.prototype.connect=function(a){null!=a&&a(null)};k.prototype.close=function(a){this.backend.clear();a(null)};k.prototype.nextListenerID=function(){return Math.random()};k.prototype.addUpdateListener=function(g){null==this.additionalInterceptors&&(this.additionalInterceptors=new a.kevoree.modeling.memory.chunk.impl.ArrayIntMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,
a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR));var e=this.nextListenerID();this.additionalInterceptors.put(e,g);return e};k.prototype.removeUpdateListener=function(a){null!=this.additionalInterceptors&&this.additionalInterceptors.remove(a)};k.prototype.peers=function(){return[]};k.prototype.sendToPeer=function(a,e,c){};return k}();n.MemoryContentDeliveryDriver=m})(z.impl||(z.impl={}))})(D.cdn||(D.cdn={}));(function(a){(function(a){var m=function(){function a(){this._nbRecResult=this._nbExpectedResult=
0;this._results=null;this._resultSize=0}a.prototype.waitResult=function(){return this.informEndOrRegister(-1,null,null)};a.prototype.then=function(a){this.informEndOrRegister(-1,null,a)};a.prototype.informEndOrRegister=function(a,e,c){var b=this;if(null==c){if(-1==a){var d=this._nbExpectedResult;this._nbExpectedResult++;if(null==this._results||this._resultSize<this._nbExpectedResult)a=0==this._nbExpectedResult?1:this._nbExpectedResult<<1,e=[],null!=this._results&&java.lang.System.arraycopy(this._results,
0,e,0,this._resultSize),this._resultSize=a,this._results=e;return function(c){b.informEndOrRegister(d,c,null)}}this._results[a]=e;this._nbRecResult++;null!=this._end&&this._nbExpectedResult==this._nbRecResult&&(a=this._results,this._resultSize!=this._nbExpectedResult&&(e=[],java.lang.System.arraycopy(this._results,0,e,0,this._nbExpectedResult),a=e),this._end(a))}else this._end=c,this._nbExpectedResult==this._nbRecResult&&(a=this._results,this._resultSize!=this._nbExpectedResult&&(e=[],java.lang.System.arraycopy(this._results,
0,e,0,this._nbExpectedResult),a=e),this._end(a));return null};return a}();a.Defer=m})(a.impl||(a.impl={}))})(D.defer||(D.defer={}));(function(z){(function(n){var m=function(){function k(){}k.instance=function(){null==k.INSTANCE&&(k.INSTANCE=new a.kevoree.modeling.extrapolation.impl.DiscreteExtrapolation);return k.INSTANCE};k.prototype.extrapolate=function(g,e,c){c=c.closestChunk(g.universe(),g.now(),g.uuid(),g.metaClass(),g.previousResolved());return null!=c?a.kevoree.modeling.meta.KPrimitiveTypes.isEnum(e.attributeTypeId())?
g._manager.model().metaModel().metaTypes()[e.attributeTypeId()].literal(c.getPrimitiveType(e.index(),g.metaClass())):c.getPrimitiveType(e.index(),g.metaClass()):null};k.prototype.mutate=function(g,e,c,b){b=b.preciseChunk(g.universe(),g.now(),g.uuid(),g.metaClass(),g.previousResolved());null!=b&&(a.kevoree.modeling.meta.KPrimitiveTypes.isEnum(e.attributeTypeId())?c instanceof a.kevoree.modeling.meta.impl.MetaLiteral?b.setPrimitiveType(e.index(),c.index(),g.metaClass()):(c=g._manager.model().metaModel().metaTypes()[e.attributeTypeId()].literalByName(c.toString()),
null!=c&&b.setPrimitiveType(e.index(),c.index(),g.metaClass())):null==c?b.setPrimitiveType(e.index(),null,g.metaClass()):b.setPrimitiveType(e.index(),this.convert(e,c),g.metaClass()))};k.prototype.convert=function(a,e){return e};return k}();n.DiscreteExtrapolation=m;m=function(){function k(){}k.prototype.extrapolate=function(g,e,c){c=c.closestChunk(g.universe(),g.now(),g.uuid(),g.metaClass(),g.previousResolved());if(null!=c)switch(g=this.extrapolateValue(c,g.metaClass(),e.index(),g.now(),c.time()),
e.attributeTypeId()){case a.kevoree.modeling.meta.KPrimitiveTypes.CONTINUOUS_ID:return g;case a.kevoree.modeling.meta.KPrimitiveTypes.DOUBLE_ID:return g;default:return null}else return null};k.prototype.getPolyWeightIndex=function(a,e,c){return k.TIMEWEIGHT+a.getDoubleArrayElem(c,k.TIMEDEG,e)+1};k.prototype.getTime=function(a,e,c,b){if(0==e.getDoubleArraySize(b,c))return 0;var d=0,f=1;if(0==e.getDoubleArrayElem(b,k.TIMEDEG,c))return e.getDoubleArrayElem(b,k.TIMEWEIGHT,c);for(var h=e.getDoubleArrayElem(b,
k.POLYDEG,c),l=0;l<=h;l++)d+=e.getDoubleArrayElem(b,l+k.TIMEWEIGHT,c)*f,f*=a;return d};k.prototype.getLastTime=function(a,e,c){return this.getTime(a.getDoubleArrayElem(c,k.NUMSAMPLES,e)-1,a,e,c)};k.prototype.extrapolateValue=function(a,e,c,b,d){if(0==a.getDoubleArraySize(c,e))return 0;var f=0,h=1,l=a.getDoubleArrayElem(c,k.STEP,e),w=this.getPolyWeightIndex(a,e,c);if(0==l)return a.getDoubleArrayElem(c,w,e);b=(b-d)/l;d=a.getDoubleArrayElem(c,k.POLYDEG,e);for(l=0;l<=d;l++)f+=a.getDoubleArrayElem(c,l+
w,e)*h,h*=b;return f};k.prototype.maxErr=function(a,e){return a/Math.pow(2,e+.5)};k.prototype.insert=function(g,e,c,b,d,f,h){if(0==b.getDoubleArraySize(d,h))return this.initial_feed(g,e,b,d,h),!0;1==b.getDoubleArrayElem(d,k.NUMSAMPLES,h)&&b.setDoubleArrayElem(d,k.STEP,g-c,h);var l=b.getDoubleArrayElem(d,k.TIMEDEG,h),w=b.getDoubleArrayElem(d,k.POLYDEG,h),F=b.getDoubleArrayElem(d,k.NUMSAMPLES,h);f=this.maxErr(f,w);var C=(g-c)/b.getDoubleArrayElem(d,k.STEP,h);if(Math.abs(this.getTime(F,b,h,d)-g)>k._TIMERR)if(l<
Math.min(F,k._maxTimeDegree)){l++;for(var A=Math.min(2*w,F),I=new Float64Array(A+1),H=new Float64Array(A+1),p=0;p<A;p++)I[p]=p*F/A,H[p]=this.getTime(I[p],b,h,d);I[A]=F;H[A]=C;A=new a.kevoree.modeling.util.maths.PolynomialFit(l);A.fit(I,H);for(p=0;p<A.getCoef().length;p++)b.setDoubleArrayElem(d,p+k.TIMEWEIGHT,A.getCoef()[p],h);b.setDoubleArrayElem(d,k.TIMEDEG,l,h)}else return!1;if(Math.abs(this.extrapolateValue(b,h,d,g,c)-e)<=f)return w=b.getDoubleArrayElem(d,k.NUMSAMPLES,h)+1,b.setDoubleArrayElem(d,
k.NUMSAMPLES,w,h),!0;g=Math.min(F,k._maxDegree);if(w<g){w++;A=Math.min(2*w,F);I=new Float64Array(A+1);H=new Float64Array(A+1);for(p=0;p<A;p++)I[p]=this.getTime(p*F/A,b,h,d),H[p]=this.internal_extrapolate(I[p],b,d,h);I[A]=C;H[A]=e;A=new a.kevoree.modeling.util.maths.PolynomialFit(w);A.fit(I,H);if(this.tempError(A.getCoef(),I,H)<=f){e=this.getPolyWeightIndex(b,h,d);b.extendDoubleArray(d,b.getDoubleArraySize(d,h)+1,h);for(p=0;p<A.getCoef().length;p++)b.setDoubleArrayElem(d,p+e,A.getCoef()[p],h);b.setDoubleArrayElem(d,
k.POLYDEG,w,h);b.setDoubleArrayElem(d,k.NUMSAMPLES,F+1,h);return!0}}return!1};k.prototype.tempError=function(g,e,c){for(var b=0,d,f=0;f<e.length;f++)d=Math.abs(c[f]-a.kevoree.modeling.util.maths.PolynomialFit.extrapolate(e[f],g)),d>b&&(b=d);return b};k.prototype.internal_extrapolate=function(a,e,c,b){var d=0,f=1,h=this.getPolyWeightIndex(e,b,c);if(0==e.getDoubleArrayElem(c,k.STEP,b))return e.getDoubleArrayElem(c,h,b);for(var l=0;l<=e.getDoubleArrayElem(c,k.POLYDEG,b);l++)d+=e.getDoubleArrayElem(c,
l+h,b)*f,f*=a;return d};k.prototype.initial_feed=function(a,e,c,b,d){c.extendDoubleArray(b,k.TIMEWEIGHT+2,d);c.setDoubleArrayElem(b,k.TIMEDEG,0,d);c.setDoubleArrayElem(b,k.NUMSAMPLES,1,d);c.setDoubleArrayElem(b,k.POLYDEG,0,d);c.setDoubleArrayElem(b,k.STEP,0,d);c.setDoubleArrayElem(b,k.TIMEWEIGHT,0,d);c.setDoubleArrayElem(b,k.TIMEWEIGHT+1,e,d)};k.prototype.mutate=function(a,e,c,b){var d=b.closestChunk(a.universe(),a.now(),a.uuid(),a.metaClass(),a.previousResolved());0==d.getDoubleArraySize(e.index(),
a.metaClass())&&(d=b.preciseChunk(a.universe(),a.now(),a.uuid(),a.metaClass(),a.previousResolved()));if(!this.insert(a.now(),this.castNumber(c),d.time(),d,e.index(),e.precision(),a.metaClass())){var f=this.getLastTimeLong(d,a.metaClass(),e.index())+d.time(),d=this.extrapolateValue(d,a.metaClass(),e.index(),f,d.time());b=b.preciseChunk(a.universe(),f,a.uuid(),a.metaClass(),a.previousResolved());b.clearDoubleArray(e.index(),a.metaClass());this.insert(f,d,f,b,e.index(),e.precision(),a.metaClass());this.insert(a.now(),
this.castNumber(c),f,b,e.index(),e.precision(),a.metaClass())}};k.prototype.getLastTimeLong=function(a,e,c){return this.getLastTime(a,e,c)*a.getDoubleArrayElem(c,k.STEP,e)};k.prototype.castNumber=function(a){return+a};k.instance=function(){null==k.INSTANCE&&(k.INSTANCE=new a.kevoree.modeling.extrapolation.impl.DoublePolynomialExtrapolation);return k.INSTANCE};k._TIMERR=.001;k._maxDegree=20;k._maxTimeDegree=7;k.TIMEDEG=0;k.NUMSAMPLES=1;k.POLYDEG=2;k.STEP=3;k.TIMEWEIGHT=4;return k}();n.DoublePolynomialExtrapolation=
m;m=function(){function k(){}k.prototype.extrapolate=function(g,e,c){c=c.closestChunk(g.universe(),g.now(),g.uuid(),g.metaClass(),g.previousResolved());if(null!=c)switch(g=this.extrapolateValue(c,g.metaClass(),e.index(),g.now(),c.time()),e.attributeTypeId()){case a.kevoree.modeling.meta.KPrimitiveTypes.CONTINUOUS_ID:return g;case a.kevoree.modeling.meta.KPrimitiveTypes.DOUBLE_ID:return g;default:return null}else return null};k.prototype.extrapolateValue=function(a,e,c,b,d){if(0==a.getDoubleArraySize(c,
e))return 0;var f=0,h=1,l=a.getDoubleArrayElem(c,k.STEP,e);if(0==l)return a.getDoubleArrayElem(c,k.WEIGHTS,e);b=(b-d)/l;d=a.getDoubleArrayElem(c,k.DEGREE,e);for(l=0;l<=d;l++)f+=a.getDoubleArrayElem(c,l+k.WEIGHTS,e)*h,h*=b;return f};k.prototype.maxErr=function(a,e){return a/Math.pow(2,e+3)};k.prototype.insert=function(g,e,c,b,d,f,h){if(0==b.getDoubleArraySize(d,h))return this.initial_feed(g,e,b,d,h),!0;if(1==b.getDoubleArrayElem(d,k.NUMSAMPLES,h)){var l=g-c;if(0==l)return b.setDoubleArrayElem(d,k.WEIGHTS,
e,h),!0;b.setDoubleArrayElem(d,k.STEP,l,h)}var l=b.getDoubleArrayElem(d,k.DEGREE,h),w=b.getDoubleArrayElem(d,k.NUMSAMPLES,h),F=b.getDoubleArrayElem(d,k.STEP,h);f=this.maxErr(f,l);if(Math.abs(this.extrapolateValue(b,h,d,g,c)-e)<=f)return e=b.getDoubleArrayElem(d,k.NUMSAMPLES,h)+1,b.setDoubleArrayElem(d,k.NUMSAMPLES,e,h),b.setDoubleArrayElem(d,k.LASTTIME,g-c,h),!0;var C=Math.min(w,k._maxDegree);if(l<C){l++;var A=2*w,C=new Float64Array(A+1),I=new Float64Array(A+1),H=0;1<A&&(H=b.getDoubleArrayElem(d,
k.LASTTIME,h)/(F*(A-1)));for(var p=0;p<A;p++)C[p]=p*H,I[p]=this.internal_extrapolate(C[p],b,d,h);C[A]=(g-c)/F;I[A]=e;e=new a.kevoree.modeling.util.maths.PolynomialFit(l);e.fit(C,I);if(this.tempError(e.getCoef(),C,I)<=f){b.extendDoubleArray(d,b.getDoubleArraySize(d,h)+1,h);for(p=0;p<e.getCoef().length;p++)b.setDoubleArrayElem(d,p+k.WEIGHTS,e.getCoef()[p],h);b.setDoubleArrayElem(d,k.DEGREE,l,h);b.setDoubleArrayElem(d,k.NUMSAMPLES,w+1,h);b.setDoubleArrayElem(d,k.LASTTIME,g-c,h);return!0}}return!1};k.prototype.tempError=
function(g,e,c){for(var b=0,d,f=0;f<e.length;f++)d=Math.abs(c[f]-a.kevoree.modeling.util.maths.PolynomialFit.extrapolate(e[f],g)),d>b&&(b=d);return b};k.prototype.internal_extrapolate=function(a,e,c,b){var d=0,f=1;if(0==e.getDoubleArrayElem(c,k.STEP,b))return e.getDoubleArrayElem(c,k.WEIGHTS,b);for(var h=0;h<=e.getDoubleArrayElem(c,k.DEGREE,b);h++)d+=e.getDoubleArrayElem(c,h+k.WEIGHTS,b)*f,f*=a;return d};k.prototype.initial_feed=function(a,e,c,b,d){c.extendDoubleArray(b,k.WEIGHTS+1,d);c.setDoubleArrayElem(b,
k.DEGREE,0,d);c.setDoubleArrayElem(b,k.NUMSAMPLES,1,d);c.setDoubleArrayElem(b,k.LASTTIME,0,d);c.setDoubleArrayElem(b,k.STEP,0,d);c.setDoubleArrayElem(b,k.WEIGHTS,e,d)};k.prototype.mutate=function(g,e,c,b){var d=b.closestChunk(g.universe(),g.now(),g.uuid(),g.metaClass(),g.previousResolved());0==d.getDoubleArraySize(e.index(),g.metaClass())&&(d=b.preciseChunk(g.universe(),g.now(),g.uuid(),g.metaClass(),g.previousResolved()));if(!this.insert(g.now(),this.castNumber(c),d.time(),d,e.index(),e.precision(),
g.metaClass())){var f=d.getDoubleArrayElem(e.index(),k.LASTTIME,g.metaClass())+d.time();b=b.preciseChunk(g.universe(),f,g.uuid(),g.metaClass(),g.previousResolved());for(var h=g.metaClass().metaElements(),l=0;l<h.length;l++)if(h[l].metaType().equals(a.kevoree.modeling.meta.MetaType.ATTRIBUTE)){var w=h[l];if(w.strategy()==this&&(b.clearDoubleArray(w.index(),g.metaClass()),w.index()!=e.index())){var F=this.extrapolateValue(d,g.metaClass(),w.index(),f,d.time());this.insert(f,F,f,b,w.index(),w.precision(),
g.metaClass());var C=d.getDoubleArrayElem(w.index(),k.LASTTIME,g.metaClass())+d.time();C>=g.now()&&(F=this.extrapolateValue(d,g.metaClass(),w.index(),C,d.time()),this.insert(C,F,f,b,w.index(),w.precision(),g.metaClass()))}}F=this.extrapolateValue(d,g.metaClass(),e.index(),f,d.time());this.insert(f,F,f,b,e.index(),e.precision(),g.metaClass());this.insert(g.now(),this.castNumber(c),f,b,e.index(),e.precision(),g.metaClass())}};k.prototype.castNumber=function(a){return+a};k.instance=function(){null==
k.INSTANCE&&(k.INSTANCE=new a.kevoree.modeling.extrapolation.impl.PolynomialExtrapolation);return k.INSTANCE};k._maxDegree=20;k.DEGREE=0;k.NUMSAMPLES=1;k.STEP=2;k.LASTTIME=3;k.WEIGHTS=4;return k}();n.PolynomialExtrapolation=m})(z.impl||(z.impl={}))})(D.extrapolation||(D.extrapolation={}));(function(z){(function(n){var m=function(){function k(a,e,c){this._manager=c;this._universe=a;this._time=e}k.prototype.save=function(g,e){if(a.kevoree.modeling.util.Checker.isDefined(g)&&a.kevoree.modeling.util.Checker.isDefined(e))a.kevoree.modeling.format.json.JsonModelSerializer.serialize(g,
e);else throw Error(k.NULL_PARAM_MSG);};k.prototype.saveRoot=function(g){a.kevoree.modeling.util.Checker.isDefined(g)&&this._manager.getRoot(this._universe,this._time,function(e){null==e?g(null):a.kevoree.modeling.format.json.JsonModelSerializer.serialize(e,g)})};k.prototype.load=function(g,e){if(a.kevoree.modeling.util.Checker.isDefined(g))a.kevoree.modeling.format.json.JsonModelLoader.load(this._manager,this._universe,this._time,g,e);else throw Error(k.NULL_PARAM_MSG);};k.KEY_META="@class";k.KEY_UUID=
"@uuid";k.KEY_ROOT="@root";k.NULL_PARAM_MSG="one parameter is null";return k}();n.JsonFormat=m;m=function(){function k(){}k.load=function(g,e,c,b,d){if(null==b)d(null);else{b=JSON.parse(b);for(var f=[],h=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap(-1,-1,-1,null),l=0;l<b.length;l++)h.put(b[l][a.kevoree.modeling.format.json.JsonFormat.KEY_UUID],g.nextObjectKey());for(l=0;l<b.length;l++){var w=b[l],F=new a.kevoree.modeling.memory.chunk.impl.ArrayStringMap(Object.keys(w).length,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR),
C;for(C in w)F[C]=w[C];try{a.kevoree.modeling.format.json.JsonModelLoader.loadObj(F,g,e,c,h,f)}catch(A){console.error(A)}}null!=f[0]?g.setRoot(f[0],function(b){null!=d&&d(b)}):null!=d&&d(null)}};k.loadObj=function(g,e,c,b,d,f){var h=a.kevoree.modeling.util.PrimitiveHelper.parseLong(g.get(a.kevoree.modeling.format.json.JsonFormat.KEY_UUID).toString()),l=g.get(a.kevoree.modeling.format.json.JsonFormat.KEY_META).toString(),w=e.model().metaModel().metaClassByName(l),F=e.model().createProxy(c,b,d.get(h),
w,c,b);e.initKObject(F);var C=e.preciseChunk(F.universe(),F.now(),F.uuid(),F.metaClass(),F.previousResolved());g.each(function(b,l){if(a.kevoree.modeling.util.PrimitiveHelper.equals(b,a.kevoree.modeling.format.json.JsonFormat.KEY_ROOT))f[0]=F;else{var c=w.metaByName(b);if(null!=l)if(null!=c&&c.metaType().equals(a.kevoree.modeling.meta.MetaType.ATTRIBUTE)){var h=c.attributeTypeId();switch(h){case a.kevoree.modeling.meta.KPrimitiveTypes.CONTINUOUS_ID:for(var h=g.get(c.metaName()),e=new Float64Array(h.length),
k=0;k<h.length;k++)try{e[k]=a.kevoree.modeling.util.PrimitiveHelper.parseDouble(h[k])}catch(m){if(m instanceof Error){var r=m;console.error(r.stack)}else throw m;}C.setPrimitiveType(c.index(),e,F.metaClass());break;default:e=null;k=g.get(c.metaName()).toString();switch(h){case a.kevoree.modeling.meta.KPrimitiveTypes.STRING_ID:e=a.kevoree.modeling.format.json.JsonString.unescape(k);break;case a.kevoree.modeling.meta.KPrimitiveTypes.LONG_ID:e=a.kevoree.modeling.util.PrimitiveHelper.parseLong(k);break;
case a.kevoree.modeling.meta.KPrimitiveTypes.INT_ID:e=a.kevoree.modeling.util.PrimitiveHelper.parseInt(k);break;case a.kevoree.modeling.meta.KPrimitiveTypes.BOOL_ID:e=a.kevoree.modeling.util.PrimitiveHelper.parseBoolean(k);break;case a.kevoree.modeling.meta.KPrimitiveTypes.DOUBLE_ID:e=a.kevoree.modeling.util.PrimitiveHelper.parseDouble(k)}C.setPrimitiveType(c.index(),e,F.metaClass())}}else if(null!=c&&c.metaType()==a.kevoree.modeling.meta.MetaType.RELATION)try{C.setPrimitiveType(c.index(),a.kevoree.modeling.format.json.JsonModelLoader.transposeArr(l,
d),F.metaClass())}catch(v){if(v instanceof Error)r=v,console.error(r.stack);else throw v;}}})};k.transposeArr=function(g,e){if(null==g)return null;for(var c=a.kevoree.modeling.format.json.JsonModelLoader.sizeOfList(g),b=new Float64Array(c),d=0;d<c;d++)try{var f=a.kevoree.modeling.util.PrimitiveHelper.parseLong(a.kevoree.modeling.format.json.JsonModelLoader.getString(g,d));e.contains(f)&&(f=e.get(f));b[d]=f}catch(h){if(h instanceof Error)console.error(h.stack);else throw h;}return b};k.sizeOfList=
function(a){if(null!=a&&void 0!=a)return void 0!=a.size?a.size():a.length};k.getString=function(a,e){return void 0!=a.get?a.get(e):a[e]};return k}();n.JsonModelLoader=m;m=function(){function k(){}k.serialize=function(g,e){g._manager.getRoot(g.universe(),g.now(),function(c){var b=!1;null!=c&&(b=c.uuid()==g.uuid());var d=new java.lang.StringBuilder;d.append("[\n");a.kevoree.modeling.format.json.JsonModelSerializer.printJSON(g,d,b);g.visit(function(b){var h=!1;null!=c&&(h=c.uuid()==b.uuid());d.append(",\n");
try{a.kevoree.modeling.format.json.JsonModelSerializer.printJSON(b,d,h)}catch(l){if(l instanceof Error)console.error(l.stack),d.append("{}");else throw l;}return a.kevoree.modeling.traversal.visitor.KVisitResult.CONTINUE},function(b){d.append("\n]\n");e(d.toString())})})};k.printJSON=function(g,e,c){if(null!=g){var b=g._manager.closestChunk(g.universe(),g.now(),g.uuid(),g.metaClass(),g.previousResolved());null!=b&&e.append(a.kevoree.modeling.format.json.JsonRaw.encode(b,g.uuid(),g.metaClass(),c))}};
return k}();n.JsonModelSerializer=m;m=function(){function a(){}a.prototype.parseObject=function(a){this.readObject=JSON.parse(a)};a.prototype.get=function(a){return this.readObject[a]};a.prototype.getAsStringArray=function(a){return this.readObject[a]};a.prototype.keys=function(){var a=[],e;for(e in this.readObject)a.push(e);return a};return a}();n.JsonObjectReader=m;m=function(){function k(){}k.encode=function(g,e,c,b){var d=new java.lang.StringBuilder;d.append('{"@class":"');d.append(c.metaName());
d.append('","@uuid":');d.append(e);b&&d.append(',"'+a.kevoree.modeling.format.json.JsonFormat.KEY_ROOT+'":true');e=c.metaElements();for(b=0;b<e.length;b++){var f=e[b];if(null!=f&&f.metaType().equals(a.kevoree.modeling.meta.MetaType.ATTRIBUTE)){var h=f.attributeTypeId();if(h==a.kevoree.modeling.meta.KPrimitiveTypes.CONTINUOUS_ID){if(h=g.getDoubleArray(f.index(),c),null!=h){d.append(',"');d.append(f.metaName());d.append('":[');for(f=0;f<h.length;f++)0!=f&&d.append(","),d.append(h[f]);d.append("]")}}else{var l=
g.getPrimitiveType(f.index(),c);null!=l&&(d.append(',"'),d.append(f.metaName()),d.append('":"'),h==a.kevoree.modeling.meta.KPrimitiveTypes.STRING_ID?d.append(a.kevoree.modeling.format.json.JsonString.encode(l.toString())):d.append(l.toString()),d.append('"'))}}else if(null!=f&&f.metaType().equals(a.kevoree.modeling.meta.MetaType.RELATION)&&(h=g.getLongArray(f.index(),c),null!=h)){d.append(',"');d.append(f.metaName());d.append('":[');for(f=0;f<h.length;f++)0!=f&&d.append(","),d.append(h[f]);d.append("]")}}d.append("}");
return d.toString()};return k}();n.JsonRaw=m;m=function(){function k(){}k.encodeBuffer=function(a,e){if(null!=e)for(var c=0;c<e.length;){var b=e.charAt(c);'"'==b?(a.append(k.ESCAPE_CHAR),a.append('"')):b==k.ESCAPE_CHAR?(a.append(k.ESCAPE_CHAR),a.append(k.ESCAPE_CHAR)):"\n"==b?(a.append(k.ESCAPE_CHAR),a.append("n")):"\r"==b?(a.append(k.ESCAPE_CHAR),a.append("r")):"\t"==b?(a.append(k.ESCAPE_CHAR),a.append("t")):"\u2028"==b?(a.append(k.ESCAPE_CHAR),a.append("u"),a.append("2"),a.append("0"),a.append("2"),
a.append("8")):"\u2029"==b?(a.append(k.ESCAPE_CHAR),a.append("u"),a.append("2"),a.append("0"),a.append("2"),a.append("9")):a.append(b);c+=1}};k.encode=function(g){var e=new java.lang.StringBuilder;a.kevoree.modeling.format.json.JsonString.encodeBuffer(e,g);return e.toString()};k.unescape=function(a){if(null==a)return null;if(0==a.length)return a;for(var e=null,c=0;c<a.length;){var b=a.charAt(c);if(b==k.ESCAPE_CHAR)switch(null==e&&(e=new java.lang.StringBuilder,e.append(a.substring(0,c))),c++,b=a.charAt(c),
b){case '"':e.append('"');break;case "\\":e.append(b);break;case "/":e.append(b);break;case "b":e.append("\b");break;case "f":e.append("\f");break;case "n":e.append("\n");break;case "r":e.append("\r");break;case "t":e.append("\t");break;case "{":e.append("\\{");break;case "}":e.append("\\}");break;case "[":e.append("\\[");break;case "]":e.append("\\]");break;case ",":e.append("\\,")}else null!=e&&(e=e.append(b));c++}return null!=e?e.toString():a};k.ESCAPE_CHAR="\\";return k}();n.JsonString=m})(z.json||
(z.json={}))})(D.format||(D.format={}));(function(z){var n=function(){function m(){}m.build=function(k){return a.kevoree.modeling.util.PrimitiveHelper.equals(k,"BinaryPerceptron")?new a.kevoree.modeling.infer.impl.BinaryPerceptronAlg:a.kevoree.modeling.util.PrimitiveHelper.equals(k,"LinearRegression")?new a.kevoree.modeling.infer.impl.LinearRegressionAlg:a.kevoree.modeling.util.PrimitiveHelper.equals(k,"KMeanCluster")?new a.kevoree.modeling.infer.impl.KMeanClusterAlg:a.kevoree.modeling.util.PrimitiveHelper.equals(k,
"GaussianProfiler")?new a.kevoree.modeling.infer.impl.GaussianProfiler:a.kevoree.modeling.util.PrimitiveHelper.equals(k,"GaussianClassifier")?new a.kevoree.modeling.infer.impl.GaussianClassifierAlg:a.kevoree.modeling.util.PrimitiveHelper.equals(k,"GaussianAnomalyDetection")?new a.kevoree.modeling.infer.impl.GaussianAnomalyDetectionAlg:a.kevoree.modeling.util.PrimitiveHelper.equals(k,"Winnow")?new a.kevoree.modeling.infer.impl.WinnowAlg:a.kevoree.modeling.util.PrimitiveHelper.equals(k,"EmptyInfer")?
new a.kevoree.modeling.infer.impl.EmptyInfer:null};return m}();z.KInferAlgFactory=n;(function(m){var k=function(){function g(){this.iterations=5;this.alpha=1;this.rand=new java.util.Random}g.prototype.train=function(e,c,b,d){d=d.preciseChunk(b.universe(),b.now(),b.uuid(),b.metaClass(),b.previousResolved());var f=b.metaClass().dependencies().index(),h=b.metaClass().inputs().length+1;if(0==d.getDoubleArraySize(f,b.metaClass())){d.extendDoubleArray(b.metaClass().dependencies().index(),h,b.metaClass());
for(var l=0;l<h;l++)d.setDoubleArrayElem(f,l,.1*this.rand.nextDouble(),b.metaClass())}d=new a.kevoree.modeling.util.maths.structure.impl.Array1D(h,0,b.metaClass().dependencies().index(),d,b.metaClass());for(f=0;f<this.iterations;f++)for(h=0;h<e.rows();h++){for(var l=this.sigmoid(e,h,d),l=this.alpha*(c.get(h,0)-l),w=0;w<b.metaClass().inputs().length;w++)d.add(w,l*e.get(h,w));d.add(b.metaClass().inputs().length,l)}};g.prototype.addUp=function(a,c,b){for(var d=0,f=0;f<a.columns();f++)d+=b.get(f)*a.get(c,
f);return d+=b.get(a.columns())};g.prototype.sigmoid=function(a,c,b){return 1/(1+Math.exp(-this.addUp(a,c,b)))};g.prototype.infer=function(e,c,b){b=b.closestChunk(c.universe(),c.now(),c.uuid(),c.metaClass(),c.previousResolved());var d=c.metaClass().dependencies().index(),f=c.metaClass().inputs().length+1;if(0==b.getDoubleArraySize(d,c.metaClass()))return null;c=new a.kevoree.modeling.util.maths.structure.impl.Array1D(f,0,c.metaClass().dependencies().index(),b,c.metaClass());b=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(e.rows(),
1);for(d=0;d<e.rows();d++).5<=this.sigmoid(e,d,c)?b.set(d,0,1):b.set(d,0,0);return b};return g}();m.BinaryPerceptronAlg=k;k=function(){function g(){}g.prototype.train=function(a,c,b,d){};g.prototype.infer=function(e,c,b){e=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(e.rows(),c.metaClass().outputs().length);for(c=0;c<e.rows()*e.columns();c++)e.setAtIndex(c,42);return e};return g}();m.EmptyInfer=k;k=function(){function g(){this._alpha=.5}g.prototype.getProba=function(e,c,b,d){var f=
0,f=this.getAvg(b,d);b=this.getVariance(b,f,d);return f=a.kevoree.modeling.util.maths.Distribution.gaussianArray(e,c,f,b)};g.prototype.getAvg=function(a,c){var b=new Float64Array(c.origin().inputs().length),d=a.get(c.origin().inputs().length*g.NUMOFFIELDS);if(0!=d)for(var f=0;f<c.origin().inputs().length;f++)b[f]=a.get(g.NUMOFFIELDS*f+g.SUM)/d;return b};g.prototype.getVariance=function(a,c,b){var d=new Float64Array(b.origin().inputs().length),f=a.get(b.origin().inputs().length*g.NUMOFFIELDS);if(0!=
f)for(var h=0;h<b.origin().inputs().length;h++)d[h]=a.get(g.NUMOFFIELDS*h+g.SUMSQUARE)/f-c[h]*c[h];return d};g.prototype.train=function(e,c,b,d){var f=d.preciseChunk(b.universe(),b.now(),b.uuid(),b.metaClass(),b.previousResolved()),h=b.metaClass().dependencies().index();d=b.getByName("alpha");null==d&&(d=this._alpha);var l=b.metaClass().inputs().length,w=l*g.NUMOFFIELDS+2;if(0==f.getDoubleArraySize(h,b.metaClass())){f.extendDoubleArray(b.metaClass().dependencies().index(),w,b.metaClass());for(var F=
0;F<w;F++)f.setDoubleArrayElem(h,F,0,b.metaClass())}f=new a.kevoree.modeling.util.maths.structure.impl.Array1D(w,0,b.metaClass().dependencies().index(),f,b.metaClass());for(F=0;F<e.rows();F++)if(0==c.get(F,0)){for(h=0;h<b.metaClass().inputs().length;h++)0==f.get(l*g.NUMOFFIELDS)?(f.set(h*g.NUMOFFIELDS+g.MIN,e.get(F,h)),f.set(h*g.NUMOFFIELDS+g.MAX,e.get(F,h)),f.set(h*g.NUMOFFIELDS+g.SUM,e.get(F,h)),f.set(h*g.NUMOFFIELDS+g.SUMSQUARE,e.get(F,h)*e.get(F,h))):(e.get(F,h)<f.get(h*g.NUMOFFIELDS+g.MIN)&&
f.set(h*g.NUMOFFIELDS+g.MIN,e.get(F,h)),e.get(F,h)>f.get(h*g.NUMOFFIELDS+g.MAX)&&f.set(h*g.NUMOFFIELDS+g.MAX,e.get(F,h)),f.add(h*g.NUMOFFIELDS+g.SUM,e.get(F,h)),f.add(h*g.NUMOFFIELDS+g.SUMSQUARE,e.get(F,h)*e.get(F,h)));f.add(l*g.NUMOFFIELDS,1);h=this.getProba(e,F,f,b.metaClass().dependencies());w=f.get(l*g.NUMOFFIELDS+1);h<w&&f.set(l*g.NUMOFFIELDS+1,w+d*(h-w))}else h=this.getProba(e,F,f,b.metaClass().dependencies()),w=f.get(l*g.NUMOFFIELDS+1),h>w&&f.set(l*g.NUMOFFIELDS+1,w+d*(h-w))};g.prototype.infer=
function(e,c,b){var d=b.closestChunk(c.universe(),c.now(),c.uuid(),c.metaClass(),c.previousResolved()),f=c.metaClass().dependencies().index();b=c.metaClass().inputs().length;var h=b*g.NUMOFFIELDS+2;if(0==d.getDoubleArraySize(f,c.metaClass()))return null;d=new a.kevoree.modeling.util.maths.structure.impl.Array1D(h,0,c.metaClass().dependencies().index(),d,c.metaClass());f=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(e.rows(),1);b=d.get(b*g.NUMOFFIELDS+1);for(h=0;h<e.rows();h++)this.getProba(e,
h,d,c.metaClass().dependencies())>=b?f.set(h,0,0):f.set(h,0,1);return f};g.MIN=0;g.MAX=1;g.SUM=2;g.SUMSQUARE=3;g.NUMOFFIELDS=4;return g}();m.GaussianAnomalyDetectionAlg=k;k=function(){function g(){}g.prototype.getIndex=function(a,c,b,d){return c*(g.NUMOFFIELDS*d.origin().inputs().length+1)+g.NUMOFFIELDS*a+b};g.prototype.getCounter=function(a,c){return a*(g.NUMOFFIELDS*c.origin().inputs().length+1)+g.NUMOFFIELDS*c.origin().inputs().length};g.prototype.getAvg=function(a,c,b){var d=new Float64Array(b.origin().inputs().length),
f=c.get(this.getCounter(a,b));if(0!=f)for(var h=0;h<b.origin().inputs().length;h++)d[h]=c.get(this.getIndex(h,a,g.SUM,b))/f;return d};g.prototype.getVariance=function(a,c,b,d){var f=new Float64Array(d.origin().inputs().length),h=c.get(this.getCounter(a,d));if(0!=h)for(var l=0;l<d.origin().inputs().length;l++)f[l]=c.get(this.getIndex(l,a,g.SUMSQUARE,d))/h-b[l]*b[l];return f};g.prototype.train=function(e,c,b,d){var f=b.metaClass().outputs()[0].attributeTypeId(),f=b.manager().model().metaModel().metaTypes()[f].literals().length,
h=d.preciseChunk(b.universe(),b.now(),b.uuid(),b.metaClass(),b.previousResolved()),l=b.metaClass().dependencies().index(),w=(f+1)*(b.metaClass().inputs().length*g.NUMOFFIELDS+1);if(0==h.getDoubleArraySize(l,b.metaClass()))for(h.extendDoubleArray(b.metaClass().dependencies().index(),w,b.metaClass()),d=0;d<w;d++)h.setDoubleArrayElem(l,d,0,b.metaClass());h=new a.kevoree.modeling.util.maths.structure.impl.Array1D(w,0,b.metaClass().dependencies().index(),h,b.metaClass());for(d=0;d<e.rows();d++){l=c.get(d,
0);for(w=0;w<b.metaClass().inputs().length;w++)0==h.get(this.getCounter(l,b.metaClass().dependencies()))?(h.set(this.getIndex(w,l,g.MIN,b.metaClass().dependencies()),e.get(d,w)),h.set(this.getIndex(w,l,g.MAX,b.metaClass().dependencies()),e.get(d,w)),h.set(this.getIndex(w,l,g.SUM,b.metaClass().dependencies()),e.get(d,w)),h.set(this.getIndex(w,l,g.SUMSQUARE,b.metaClass().dependencies()),e.get(d,w)*e.get(d,w))):(e.get(d,w)<h.get(this.getIndex(w,l,g.MIN,b.metaClass().dependencies()))&&h.set(this.getIndex(w,
l,g.MIN,b.metaClass().dependencies()),e.get(d,w)),e.get(d,w)>h.get(this.getIndex(w,l,g.MAX,b.metaClass().dependencies()))&&h.set(this.getIndex(w,l,g.MAX,b.metaClass().dependencies()),e.get(d,w)),h.add(this.getIndex(w,l,g.SUM,b.metaClass().dependencies()),e.get(d,w)),h.add(this.getIndex(w,l,g.SUMSQUARE,b.metaClass().dependencies()),e.get(d,w)*e.get(d,w))),0==h.get(this.getCounter(f,b.metaClass().dependencies()))?(h.set(this.getIndex(w,f,g.MIN,b.metaClass().dependencies()),e.get(d,w)),h.set(this.getIndex(w,
f,g.MAX,b.metaClass().dependencies()),e.get(d,w)),h.set(this.getIndex(w,f,g.SUM,b.metaClass().dependencies()),e.get(d,w)),h.set(this.getIndex(w,f,g.SUMSQUARE,b.metaClass().dependencies()),e.get(d,w)*e.get(d,w))):(e.get(d,w)<h.get(this.getIndex(w,f,g.MIN,b.metaClass().dependencies()))&&h.set(this.getIndex(w,f,g.MIN,b.metaClass().dependencies()),e.get(d,w)),e.get(d,w)>h.get(this.getIndex(w,f,g.MAX,b.metaClass().dependencies()))&&h.set(this.getIndex(w,f,g.MAX,b.metaClass().dependencies()),e.get(d,w)),
h.add(this.getIndex(w,f,g.SUM,b.metaClass().dependencies()),e.get(d,w)),h.add(this.getIndex(w,f,g.SUMSQUARE,b.metaClass().dependencies()),e.get(d,w)*e.get(d,w)));h.add(this.getCounter(l,b.metaClass().dependencies()),1);h.add(this.getCounter(f,b.metaClass().dependencies()),1)}};g.prototype.infer=function(e,c,b){var d=c.metaClass().outputs()[0].attributeTypeId(),d=c.manager().model().metaModel().metaTypes()[d].literals().length;b=b.closestChunk(c.universe(),c.now(),c.uuid(),c.metaClass(),c.previousResolved());
var f=c.metaClass().dependencies().index(),h=(d+1)*(c.metaClass().inputs().length*g.NUMOFFIELDS+1);if(0==b.getDoubleArraySize(f,c.metaClass()))return null;b=new a.kevoree.modeling.util.maths.structure.impl.Array1D(h,0,c.metaClass().dependencies().index(),b,c.metaClass());f=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(e.rows(),1);for(h=0;h<e.rows();h++)for(var l=0,w=0,F=0;F<d;F++)w=this.getProba(e,h,F,b,c.metaClass().dependencies()),w>l&&(l=w,f.set(h,0,F));return f};g.prototype.getProba=
function(e,c,b,d,f){var h=0,h=this.getAvg(b,d,f);b=this.getVariance(b,d,h,f);return h=a.kevoree.modeling.util.maths.Distribution.gaussianArray(e,c,h,b)};g.prototype.getAllProba=function(e,c,b,d){for(var f=new Float64Array(d),h=0;h<d;h++){var l=this.getAvg(h,c,b),w=this.getVariance(h,c,l,b);f[h]=a.kevoree.modeling.util.maths.Distribution.gaussian(e,l,w)}return f};g.MIN=0;g.MAX=1;g.SUM=2;g.SUMSQUARE=3;g.NUMOFFIELDS=4;return g}();m.GaussianClassifierAlg=k;k=function(){function g(){this.maxTimeSlots=
24}g.prototype.getIndex=function(a,c,b,d){return c*(g.NUMOFFIELDS*(d.origin().inputs().length-1)+1)+g.NUMOFFIELDS*a+b};g.prototype.getCounter=function(a,c){return a*(g.NUMOFFIELDS*(c.origin().inputs().length-1)+1)+g.NUMOFFIELDS*(c.origin().inputs().length-1)};g.prototype.getAvg=function(a,c,b){var d=new Float64Array(b.origin().inputs().length),f=c.get(this.getCounter(a,b));if(0!=f)for(var h=0;h<b.origin().inputs().length;h++)d[h]=c.get(this.getIndex(h,a,g.SUM,b))/f;return d};g.prototype.getVariance=
function(a,c,b,d){var f=new Float64Array(d.origin().inputs().length),h=c.get(this.getCounter(a,d));if(0!=h)for(var l=0;l<d.origin().inputs().length;l++)f[l]=c.get(this.getIndex(l,a,g.SUMSQUARE,d))/h-b[l]*b[l];return f};g.prototype.train=function(e,c,b,d){var f=d.preciseChunk(b.universe(),b.now(),b.uuid(),b.metaClass(),b.previousResolved());c=b.metaClass().dependencies();var h=c.index(),l=(this.maxTimeSlots+1)*((b.metaClass().inputs().length-1)*g.NUMOFFIELDS+1);if(0==f.getDoubleArraySize(h,b.metaClass()))for(f.extendDoubleArray(c.index(),
l,b.metaClass()),d=0;d<l;d++)f.setDoubleArrayElem(h,d,0,b.metaClass());f=new a.kevoree.modeling.util.maths.structure.impl.Array1D(l,0,c.index(),f,b.metaClass());for(d=0;d<e.rows();d++){h=e.get(d,0);for(l=1;l<b.metaClass().inputs().length;l++)0==f.get(this.getCounter(h,c))?(f.set(this.getIndex(l-1,h,g.MIN,c),e.get(d,l)),f.set(this.getIndex(l-1,h,g.MAX,c),e.get(d,l)),f.set(this.getIndex(l-1,h,g.SUM,c),e.get(d,l)),f.set(this.getIndex(l-1,h,g.SUMSQUARE,c),e.get(d,l)*e.get(d,l))):(e.get(d,l)<f.get(this.getIndex(l-
1,h,g.MIN,c))&&f.set(this.getIndex(l-1,h,g.MIN,c),e.get(d,l)),e.get(d,l)>f.get(this.getIndex(l-1,h,g.MAX,c))&&f.set(this.getIndex(l-1,h,g.MAX,c),e.get(d,l)),f.add(this.getIndex(l-1,h,g.SUM,c),e.get(d,l)),f.add(this.getIndex(l-1,h,g.SUMSQUARE,c),e.get(d,l)*e.get(d,l))),0==f.get(this.getCounter(this.maxTimeSlots,c))?(f.set(this.getIndex(l-1,this.maxTimeSlots,g.MIN,c),e.get(d,l)),f.set(this.getIndex(l-1,this.maxTimeSlots,g.MAX,c),e.get(d,l)),f.set(this.getIndex(l-1,this.maxTimeSlots,g.SUM,c),e.get(d,
l)),f.set(this.getIndex(l-1,this.maxTimeSlots,g.SUMSQUARE,c),e.get(d,l)*e.get(d,l))):(e.get(d,l)<f.get(this.getIndex(l-1,this.maxTimeSlots,g.MIN,c))&&f.set(this.getIndex(l-1,this.maxTimeSlots,g.MIN,c),e.get(d,l)),e.get(d,l)>f.get(this.getIndex(l-1,this.maxTimeSlots,g.MAX,c))&&f.set(this.getIndex(l-1,this.maxTimeSlots,g.MAX,c),e.get(d,l)),f.add(this.getIndex(l-1,this.maxTimeSlots,g.SUM,c),e.get(d,l)),f.add(this.getIndex(l-1,this.maxTimeSlots,g.SUMSQUARE,c),e.get(d,l)*e.get(d,l)));f.add(this.getCounter(h,
c),1);f.add(this.getCounter(this.maxTimeSlots,c),1)}};g.prototype.infer=function(e,c,b){var d=b.closestChunk(c.universe(),c.now(),c.uuid(),c.metaClass(),c.previousResolved());b=c.metaClass().dependencies();var f=b.index(),h=(this.maxTimeSlots+1)*((c.metaClass().inputs().length-1)*g.NUMOFFIELDS+1);if(0==d.getDoubleArraySize(f,c.metaClass()))return null;c=new a.kevoree.modeling.util.maths.structure.impl.Array1D(h,0,b.index(),d,c.metaClass());d=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(e.rows(),
1);for(f=0;f<e.rows();f++){for(var h=e.get(f,0),l=new Float64Array(e.columns()-1),w=0;w<e.columns()-1;w++)l[w]=e.get(f,w+1);0<=l[0]?d.set(f,0,this.getProba(l,h,c,b)):-1==l[0]?d.set(f,0,this.getAvg(h,c,b)[0]):-2==l[0]?d.set(f,0,c.get(this.getIndex(0,h,g.MIN,b))):-3==l[0]&&d.set(f,0,c.get(this.getIndex(0,h,g.MAX,b)))}return d};g.prototype.getProba=function(e,c,b,d){var f=0,f=this.getAvg(c,b,d);c=this.getVariance(c,b,f,d);return f=a.kevoree.modeling.util.maths.Distribution.gaussian(e,f,c)};g.MIN=0;g.MAX=
1;g.SUM=2;g.SUMSQUARE=3;g.NUMOFFIELDS=4;return g}();m.GaussianProfiler=k;k=function(){function g(){this.k=3;this.iterations=100}g.prototype.train=function(e,c,b,d){if(e.rows()<this.k)throw Error("training setPrimitiveType not enough");var f=d.preciseChunk(b.universe(),b.now(),b.uuid(),b.metaClass(),b.previousResolved()),h=b.metaClass().dependencies().index(),l=this.k*b.metaClass().inputs().length;if(0==f.getDoubleArraySize(h,b.metaClass()))for(f.extendDoubleArray(b.metaClass().dependencies().index(),
l,b.metaClass()),c=0;c<this.k;c++)for(d=0;d<b.metaClass().inputs().length;d++)f.setDoubleArrayElem(h,d+c*b.metaClass().inputs().length,e.get(c,d),b.metaClass());f=new a.kevoree.modeling.util.maths.structure.impl.Array1D(l,0,b.metaClass().dependencies().index(),f,b.metaClass());for(h=0;h<this.iterations;h++){var w,l=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(this.k,b.metaClass().inputs().length),F=new Int32Array(this.k);for(c=0;c<e.rows();c++){w=this.classify(e,c,f);for(d=0;d<b.metaClass().inputs().length;d++)l.add(w,
d,e.get(c,d));F[w]++}for(c=0;c<this.k;c++)if(0!=F[c])for(d=0;d<b.metaClass().inputs().length;d++)f.set(d+c*b.metaClass().inputs().length,l.get(c,d)/F[c]);else for(w=(new java.util.Random).nextInt(e.rows()),d=0;d<b.metaClass().inputs().length;d++)f.set(d+c*b.metaClass().inputs().length,e.get(w,d))}};g.prototype.classify=function(a,c,b){for(var d=-1,f=-1,h=0;h<this.k;h++){for(var l=0,w=0;w<a.columns();w++)l+=(a.get(c,w)-b.get(h*a.columns()+w))*(a.get(c,w)-b.get(h*a.columns()+w));0>d?(d=l,f=h):l<d&&
(d=l,f=h)}return f};g.prototype.infer=function(e,c,b){b=b.closestChunk(c.universe(),c.now(),c.uuid(),c.metaClass(),c.previousResolved());var d=c.metaClass().dependencies().index(),f=this.k*c.metaClass().inputs().length;if(0==b.getDoubleArraySize(d,c.metaClass()))return null;c=new a.kevoree.modeling.util.maths.structure.impl.Array1D(f,0,c.metaClass().dependencies().index(),b,c.metaClass());b=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(e.rows(),1);for(d=0;d<e.rows();d++)b.set(d,0,
this.classify(e,d,c));return b};return g}();m.KMeanClusterAlg=k;k=function(){function g(){this.alpha=.005;this.gamma=0;this.iterations=10}g.prototype.train=function(e,c,b,d){var f=d.preciseChunk(b.universe(),b.now(),b.uuid(),b.metaClass(),b.previousResolved()),h=b.metaClass().dependencies().index(),l=b.metaClass().inputs().length+1;if(0==f.getDoubleArraySize(h,b.metaClass()))for(f.extendDoubleArray(b.metaClass().dependencies().index(),l,b.metaClass()),d=0;d<l;d++)f.setDoubleArrayElem(h,d,g.rand.nextDouble(),
b.metaClass());f=new a.kevoree.modeling.util.maths.structure.impl.Array1D(l,0,b.metaClass().dependencies().index(),f,b.metaClass());for(d=0;d<this.iterations;d++)for(h=0;h<e.rows();h++){for(var l=this.estimate(e,h,f),l=-this.alpha*(l-c.get(h,0)),w=0;w<b.metaClass().inputs().length;w++)f.set(w,f.get(w)*(1-this.alpha*this.gamma)+l*e.get(h,w));f.add(b.metaClass().inputs().length,l)}};g.prototype.estimate=function(a,c,b){for(var d=0,f=0;f<a.columns();f++)d+=a.get(c,f)*b.get(f);return d+=b.get(a.columns())};
g.prototype.infer=function(e,c,b){b=b.closestChunk(c.universe(),c.now(),c.uuid(),c.metaClass(),c.previousResolved());var d=c.metaClass().dependencies().index(),f=c.metaClass().inputs().length+1;if(0==b.getDoubleArraySize(d,c.metaClass()))return null;c=new a.kevoree.modeling.util.maths.structure.impl.Array1D(f,0,c.metaClass().dependencies().index(),b,c.metaClass());b=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(e.rows(),1);for(d=0;d<e.rows();d++)b.set(d,0,this.estimate(e,d,c));return b};
g.rand=new java.util.Random;return g}();m.LinearRegressionAlg=k;k=function(){function g(){}g.prototype.train=function(a,c,b,d){};g.prototype.infer=function(e,c,b){return new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(1,1)};return g}();m.RecommendationAlg=k;k=function(){function g(){}g.prototype.train=function(e,c,b,d){d=d.preciseChunk(b.universe(),b.now(),b.uuid(),b.metaClass(),b.previousResolved());var f=b.metaClass().dependencies().index();if(0==d.getDoubleArraySize(f,b.metaClass()))for(d.extendDoubleArray(f,
g.NUMOFFIELDS*b.metaClass().inputs().length+1,b.metaClass()),c=0;c<g.NUMOFFIELDS*b.metaClass().inputs().length+1;c++)d.setDoubleArrayElem(f,c,0,b.metaClass());d=new a.kevoree.modeling.util.maths.structure.impl.Array1D(g.NUMOFFIELDS*e.columns()+1,0,f,d,b.metaClass());for(c=0;c<e.rows();c++){for(f=0;f<b.metaClass().inputs().length;f++)0==d.get(g.NUMOFFIELDS*e.columns())?(d.set(g.MIN+f*g.NUMOFFIELDS,e.get(c,f)),d.set(g.MAX+f*g.NUMOFFIELDS,e.get(c,f)),d.set(g.SUM+f*g.NUMOFFIELDS,e.get(c,f)),d.set(g.SUMSQuare+
f*g.NUMOFFIELDS,e.get(c,f)*e.get(c,f))):(e.get(c,f)<d.get(g.MIN+f*g.NUMOFFIELDS)&&d.set(g.MIN+f*g.NUMOFFIELDS,e.get(c,f)),e.get(c,f)>d.get(g.MAX+f*g.NUMOFFIELDS)&&d.set(g.MAX+f*g.NUMOFFIELDS,e.get(c,f)),d.add(g.SUM+f*g.NUMOFFIELDS,e.get(c,f)),d.add(g.SUMSQuare+f*g.NUMOFFIELDS,e.get(c,f)*e.get(c,f)));d.add(g.NUMOFFIELDS*b.metaClass().inputs().length,1)}};g.prototype.infer=function(e,c,b){e=b.closestChunk(c.universe(),c.now(),c.uuid(),c.metaClass(),c.previousResolved());c=this.getAvgAll(e,c.metaClass().dependencies());
e=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(1,c.length);for(b=0;b<c.length;b++)e.set(0,b,c[b]);return e};g.prototype.getAvgAll=function(a,c){for(var b=new Float64Array(c.origin().inputs().length),d=0;d<c.origin().inputs().length;d++)b[d]=this.getAvg(d,a,c);return b};g.prototype.getMinAll=function(a,c){for(var b=new Float64Array(c.origin().inputs().length),d=0;d<c.origin().inputs().length;d++)b[d]=this.getMin(d,a,c);return b};g.prototype.getMaxAll=function(a,c){for(var b=new Float64Array(c.origin().inputs().length),
d=0;d<c.origin().inputs().length;d++)b[d]=this.getMax(d,a,c);return b};g.prototype.getVarianceAll=function(a,c,b){for(var d=new Float64Array(c.origin().inputs().length),f=0;f<c.origin().inputs().length;f++)d[f]=this.getVariance(f,a,c,b[f]);return d};g.prototype.getAvg=function(a,c,b){if(0==c.getDoubleArraySize(b.index(),b.origin()))return 0;var d=c.getDoubleArrayElem(b.index(),c.getDoubleArraySize(b.index(),b.origin())-1,b.origin());return 0==d?0:c.getDoubleArrayElem(b.index(),a*g.NUMOFFIELDS+g.SUM,
b.origin())/d};g.prototype.getMin=function(a,c,b){return 0==c.getDoubleArraySize(b.index(),b.origin())||0==c.getDoubleArrayElem(b.index(),c.getDoubleArraySize(b.index(),b.origin())-1,b.origin())?0:c.getDoubleArrayElem(b.index(),a*g.NUMOFFIELDS+g.MIN,b.origin())};g.prototype.getMax=function(a,c,b){return 0==c.getDoubleArraySize(b.index(),b.origin())||0==c.getDoubleArrayElem(b.index(),c.getDoubleArraySize(b.index(),b.origin())-1,b.origin())?0:c.getDoubleArrayElem(b.index(),a*g.NUMOFFIELDS+g.MAX,b.origin())};
g.prototype.getVariance=function(a,c,b,d){if(0==c.getDoubleArraySize(b.index(),b.origin()))return 0;var f=c.getDoubleArrayElem(b.index(),c.getDoubleArraySize(b.index(),b.origin())-1,b.origin());return 0==f?0:c.getDoubleArrayElem(b.index(),a*g.NUMOFFIELDS+g.SUMSQuare,b.origin())/f-d*d};g.MIN=0;g.MAX=1;g.SUM=2;g.SUMSQuare=3;g.NUMOFFIELDS=4;return g}();m.StatInferAlg=k;k=function(){function g(){this.beta=this.alpha=2;this.iterations=1;this.rand=new java.util.Random}g.prototype.train=function(e,c,b,d){var f=
d.preciseChunk(b.universe(),b.now(),b.uuid(),b.metaClass(),b.previousResolved()),h=b.metaClass().dependencies().index();d=b.metaClass().inputs().length;if(0==f.getDoubleArraySize(h,b.metaClass())){f.extendDoubleArray(b.metaClass().dependencies().index(),d,b.metaClass());for(var l=0;l<d;l++)f.setDoubleArrayElem(h,l,this.rand.nextDouble(),b.metaClass())}b=new a.kevoree.modeling.util.maths.structure.impl.Array1D(d,0,b.metaClass().dependencies().index(),f,b.metaClass());for(f=0;f<this.iterations;f++)for(h=
0;h<e.rows();h++)if(this.calculate(e,h,b)!=c.get(h,0))if(0==c.get(h,0))for(l=0;l<d;l++)b.set(l,b.get(l)/this.beta);else for(l=0;l<d;l++)b.set(l,b.get(l)*this.alpha)};g.prototype.calculate=function(a,c,b){for(var d=0,f=0;f<a.columns();f++)d+=b.get(f)*a.get(c,f);return d>=a.columns()?1:0};g.prototype.infer=function(e,c,b){b=b.closestChunk(c.universe(),c.now(),c.uuid(),c.metaClass(),c.previousResolved());var d=c.metaClass().dependencies().index(),f=c.metaClass().inputs().length;if(0==b.getDoubleArraySize(d,
c.metaClass()))return null;c=new a.kevoree.modeling.util.maths.structure.impl.Array1D(f,0,c.metaClass().dependencies().index(),b,c.metaClass());b=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(e.rows(),1);for(d=0;d<e.rows();d++)b.set(d,0,this.calculate(e,d,c));return b};return g}();m.WinnowAlg=k})(z.impl||(z.impl={}))})(D.infer||(D.infer={}));(function(z){var n=function(){function a(){}a.DIRTY_BIT_INDEX=0;a.DIRTY_BIT=1<<a.DIRTY_BIT_INDEX;a.REMOVED_BIT_INDEX=1;a.REMOVED_BIT=1<<a.REMOVED_BIT_INDEX;
return a}();z.KChunkFlags=n;(function(m){(function(k){var g=function(){function e(a,b,d,f){this.kvSize=1;this._threshold=0;this._root_index=-1;this._size=0;this._universe=a;this._time=b;this._obj=d;this._flags=new java.util.concurrent.atomic.AtomicLong(0);this._counter=new java.util.concurrent.atomic.AtomicInteger(0);this._space=f}e.prototype.counter=function(){return this._counter.get()};e.prototype.inc=function(){return this._counter.incrementAndGet()};e.prototype.dec=function(){return this._counter.decrementAndGet()};
e.prototype.universe=function(){return this._universe};e.prototype.time=function(){return this._time};e.prototype.obj=function(){return this._obj};e.prototype.getFlags=function(){return this._flags.get()};e.prototype.setFlags=function(a,b){var d,f;do d=this._flags.get(),f=d&~b|a;while(!this._flags.compareAndSet(d,f))};e.prototype.space=function(){return this._space};e.prototype.allocate=function(c){this.state=new a.kevoree.modeling.memory.chunk.impl.AbstractArrayTree.InternalState(new Int32Array(c*
e.META_SIZE),new Float64Array(c*this.kvSize),[]);this._threshold=c*e.LOAD_FACTOR};e.prototype.reallocate=function(c){this._threshold=c*e.LOAD_FACTOR;var b=new Float64Array(c*this.kvSize);null!=this.state&&null!=this.state._back_kv&&java.lang.System.arraycopy(this.state._back_kv,0,b,0,this._size*this.kvSize);var d=[];if(null!=this.state&&null!=this.state._back_colors){java.lang.System.arraycopy(this.state._back_colors,0,d,0,this._size);for(var f=this._size;f<c;f++)d[f]=!1}var h=new Int32Array(c*e.META_SIZE);
if(null!=this.state&&null!=this.state._back_meta)for(java.lang.System.arraycopy(this.state._back_meta,0,h,0,this._size*e.META_SIZE),f=this._size*e.META_SIZE;f<c*e.META_SIZE;f++)h[f]=-1;this.state=new a.kevoree.modeling.memory.chunk.impl.AbstractArrayTree.InternalState(h,b,d)};e.prototype.size=function(){return this._size};e.prototype.key=function(a){return-1==a?-1:this.state._back_kv[a*this.kvSize]};e.prototype.setKey=function(a,b){this.state._back_kv[a*this.kvSize]=b};e.prototype.value=function(a){return-1==
a?-1:this.state._back_kv[a*this.kvSize+1]};e.prototype.setValue=function(a,b){this.state._back_kv[a*this.kvSize+1]=b};e.prototype.left=function(a){return-1==a?-1:this.state._back_meta[a*e.META_SIZE]};e.prototype.setLeft=function(a,b){this.state._back_meta[a*e.META_SIZE]=b};e.prototype.right=function(a){return-1==a?-1:this.state._back_meta[a*e.META_SIZE+1]};e.prototype.setRight=function(a,b){this.state._back_meta[a*e.META_SIZE+1]=b};e.prototype.parent=function(a){return-1==a?-1:this.state._back_meta[a*
e.META_SIZE+2]};e.prototype.setParent=function(a,b){this.state._back_meta[a*e.META_SIZE+2]=b};e.prototype.color=function(a){return-1==a?!0:this.state._back_colors[a]};e.prototype.setColor=function(a,b){this.state._back_colors[a]=b};e.prototype.grandParent=function(a){return-1==a?-1:-1!=this.parent(a)?this.parent(this.parent(a)):-1};e.prototype.sibling=function(a){return-1==this.parent(a)?-1:a==this.left(this.parent(a))?this.right(this.parent(a)):this.left(this.parent(a))};e.prototype.uncle=function(a){return-1!=
this.parent(a)?this.sibling(this.parent(a)):-1};e.prototype.previous=function(a){if(-1!=this.left(a)){for(a=this.left(a);-1!=this.right(a);)a=this.right(a);return a}if(-1!=this.parent(a)){if(a!=this.right(this.parent(a)))for(;-1!=this.parent(a)&&a==this.left(this.parent(a));)a=this.parent(a);return this.parent(a)}return-1};e.prototype.next=function(a){if(-1!=this.right(a)){for(a=this.right(a);-1!=this.left(a);)a=this.left(a);return a}if(-1!=this.parent(a)){if(a!=this.left(this.parent(a)))for(;-1!=
this.parent(a)&&a==this.right(this.parent(a));)a=this.parent(a);return this.parent(a)}return-1};e.prototype.lookup=function(c){var b=this._root_index;if(-1==b)return a.kevoree.modeling.KConfig.NULL_LONG;for(;-1!=b;){if(c==this.key(b))return this.key(b);b=c<this.key(b)?this.left(b):this.right(b)}return b};e.prototype.range=function(a,b,d){for(b=this.internal_previousOrEqual_index(b);-1!=b&&this.key(b)>=a;)d(this.key(b)),b=this.previous(b)};e.prototype.internal_previousOrEqual_index=function(a){var b=
this._root_index;if(-1==b)return b;for(;-1!=b;){if(a==this.key(b))return b;if(a>this.key(b))if(-1!=this.right(b))b=this.right(b);else return b;else if(-1!=this.left(b))b=this.left(b);else{for(a=this.parent(b);-1!=a&&b==this.left(a);)b=a,a=this.parent(a);return a}}return-1};e.prototype.rotateLeft=function(a){var b=this.right(a);this.replaceNode(a,b);this.setRight(a,this.left(b));-1!=this.left(b)&&this.setParent(this.left(b),a);this.setLeft(b,a);this.setParent(a,b)};e.prototype.rotateRight=function(a){var b=
this.left(a);this.replaceNode(a,b);this.setLeft(a,this.right(b));-1!=this.right(b)&&this.setParent(this.right(b),a);this.setRight(b,a);this.setParent(a,b)};e.prototype.replaceNode=function(a,b){-1==this.parent(a)?this._root_index=b:a==this.left(this.parent(a))?this.setLeft(this.parent(a),b):this.setRight(this.parent(a),b);-1!=b&&this.setParent(b,this.parent(a))};e.prototype.insertCase1=function(a){-1==this.parent(a)?this.setColor(a,!0):this.insertCase2(a)};e.prototype.insertCase2=function(a){this.color(this.parent(a))||
this.insertCase3(a)};e.prototype.insertCase3=function(a){this.color(this.uncle(a))?this.insertCase4(a):(this.setColor(this.parent(a),!0),this.setColor(this.uncle(a),!0),this.setColor(this.grandParent(a),!1),this.insertCase1(this.grandParent(a)))};e.prototype.insertCase4=function(a){a==this.right(this.parent(a))&&this.parent(a)==this.left(this.grandParent(a))?(this.rotateLeft(this.parent(a)),a=this.left(a)):a==this.left(this.parent(a))&&this.parent(a)==this.right(this.grandParent(a))&&(this.rotateRight(this.parent(a)),
a=this.right(a));this.insertCase5(a)};e.prototype.insertCase5=function(a){this.setColor(this.parent(a),!0);this.setColor(this.grandParent(a),!1);a==this.left(this.parent(a))&&this.parent(a)==this.left(this.grandParent(a))?this.rotateRight(this.grandParent(a)):this.rotateLeft(this.grandParent(a))};e.prototype.serialize=function(c){if(-1==this._root_index)return"0";c=this._root_index;for(var b=this.state,d=new java.lang.StringBuilder,f=0,h=0;h<b._back_meta.length/e.META_SIZE;h++){var l=b._back_meta[h*
e.META_SIZE+2];if(-1!=l||h==c){var w=!1;-1!=l&&(w=b._back_meta[l*e.META_SIZE]==h);this.color(h)?w?d.append(e.RED_LEFT):d.append(e.RED_RIGHT):w?d.append(e.BLACK_LEFT):d.append(e.BLACK_RIGHT);a.kevoree.modeling.util.Base64.encodeLongToBuffer(b._back_kv[h*this.kvSize],d);d.append(",");-1!=l&&a.kevoree.modeling.util.Base64.encodeIntToBuffer(l,d);1<this.kvSize&&(d.append(","),a.kevoree.modeling.util.Base64.encodeLongToBuffer(b._back_kv[h*this.kvSize+1],d));f++}}return a.kevoree.modeling.util.Base64.encodeInt(f)+
","+a.kevoree.modeling.util.Base64.encodeInt(c)+d.toString()};e.prototype.init=function(c,b,d){if(null!=c&&0!=c.length){for(b=d=0;b<c.length&&","!=c.charAt(b)&&c.charAt(b)!=e.BLACK_LEFT&&c.charAt(b)!=e.BLACK_RIGHT&&c.charAt(b)!=e.RED_LEFT&&c.charAt(b)!=e.RED_RIGHT;)b++;","==c.charAt(b)&&(this._size=a.kevoree.modeling.util.Base64.decodeToIntWithBounds(c,d,b),b++,d=b);for(;b<c.length&&c.charAt(b)!=e.BLACK_LEFT&&c.charAt(b)!=e.BLACK_RIGHT&&c.charAt(b)!=e.RED_LEFT&&c.charAt(b)!=e.RED_RIGHT;)b++;this._root_index=
a.kevoree.modeling.util.Base64.decodeToIntWithBounds(c,d,b);this.allocate(this._size);for(d=0;d<this._size;d++){var f=d*e.META_SIZE;this.state._back_meta[f]=-1;this.state._back_meta[f+1]=-1;this.state._back_meta[f+2]=-1}for(d=0;b<c.length;){for(;b<c.length&&c.charAt(b)!=e.BLACK_LEFT&&c.charAt(b)!=e.BLACK_RIGHT&&c.charAt(b)!=e.RED_LEFT&&c.charAt(b)!=e.RED_RIGHT;)b++;if(b<c.length){var h=c.charAt(b),f=!1;if(h==e.BLACK_LEFT||h==e.RED_LEFT)f=!0;h==e.BLACK_LEFT||h==e.BLACK_RIGHT?this.setColor(d,!1):this.setColor(d,
!0);b++;for(h=b;b<c.length&&","!=c.charAt(b);)b++;h=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(c,h,b);this.setKey(d,h);b++;for(h=b;b<c.length&&","!=c.charAt(b)&&c.charAt(b)!=e.BLACK_LEFT&&c.charAt(b)!=e.BLACK_RIGHT&&c.charAt(b)!=e.RED_LEFT&&c.charAt(b)!=e.RED_RIGHT;)b++;b>h&&(h=a.kevoree.modeling.util.Base64.decodeToIntWithBounds(c,h,b),this.setParent(d,h),f?this.setLeft(h,d):this.setRight(h,d));if(b<c.length&&","==c.charAt(b)){b++;for(h=b;b<c.length&&c.charAt(b)!=e.BLACK_LEFT&&c.charAt(b)!=
e.BLACK_RIGHT&&c.charAt(b)!=e.RED_LEFT&&c.charAt(b)!=e.RED_RIGHT;)b++;b>h&&(f=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(c,h,b),this.setValue(d,f))}d++}}}};e.prototype.free=function(a){this.state=null;this._threshold=this._size=0};e.prototype.internal_insert=function(a,b){this._size+1>this._threshold&&this.reallocate(0==this._size?1:this._size<<1);var d=this._size;if(0==d)this.setKey(d,a),2==this.kvSize&&this.setValue(d,b),this.setColor(d,!1),this.setLeft(d,-1),this.setRight(d,-1),this.setParent(d,
-1),this._root_index=d,this._size=1;else{for(var f=this._root_index;;){if(a==this.key(f))return;if(a<this.key(f))if(-1==this.left(f)){this.setKey(d,a);2==this.kvSize&&this.setValue(d,b);this.setColor(d,!1);this.setLeft(d,-1);this.setRight(d,-1);this.setParent(d,-1);this.setLeft(f,d);this._size++;break}else f=this.left(f);else if(-1==this.right(f)){this.setKey(d,a);2==this.kvSize&&this.setValue(d,b);this.setColor(d,!1);this.setLeft(d,-1);this.setRight(d,-1);this.setParent(d,-1);this.setRight(f,d);
this._size++;break}else f=this.right(f)}this.setParent(d,f)}this.insertCase1(d);this.internal_set_dirty()};e.prototype.internal_lookup_value=function(c){var b=this._root_index;if(-1==b)return a.kevoree.modeling.KConfig.NULL_LONG;for(;-1!=b;){if(c==this.key(b))return this.value(b);b=c<this.key(b)?this.left(b):this.right(b)}return b};e.prototype.internal_set_dirty=function(){null!=this._space?(this._flags.get()&a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT)!=a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT&&
(this._space.declareDirty(this),this.setFlags(a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT,0)):this.setFlags(a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT,0)};e.prototype.type=function(){throw"Abstract method";};e.prototype.dependencies=function(){return null};e.prototype.addDependency=function(a,b,d){throw Error("Not implemented yet");};e.BLACK_LEFT="{";e.BLACK_RIGHT="}";e.RED_LEFT="[";e.RED_RIGHT="]";e.META_SIZE=3;e.LOAD_FACTOR=.75;return e}();k.AbstractArrayTree=g;(function(a){var c=function(){return function(a,
d,f){this._back_meta=a;this._back_kv=d;this._back_colors=f}}();a.InternalState=c})(g=k.AbstractArrayTree||(k.AbstractArrayTree={}));g=function(){function a(c,b){}a.prototype.clear=function(){for(var a in this)this.hasOwnProperty(a)&&delete this[a]};a.prototype.get=function(a){return this[a]};a.prototype.put=function(a,b){var d=this[a];this[a]=b;return d};a.prototype.contains=function(a){return this.hasOwnProperty(a)};a.prototype.remove=function(a){var b=this[a];delete this[a];return b};a.prototype.size=
function(){return Object.keys(this).length};a.prototype.each=function(a){for(var b in this)this.hasOwnProperty(b)&&a(+b,this[b])};return a}();k.ArrayIntMap=g;g=function(){function e(c,b,d,f){this.state=null;this.initialCapacity=16;this._metaClassIndex=-1;this._universe=c;this._time=b;this._obj=d;this._flags=new java.util.concurrent.atomic.AtomicLong(0);this._counter=new java.util.concurrent.atomic.AtomicInteger(0);this._space=f;this.droppedCount=this.elementCount=0;c=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap.InternalState(this.initialCapacity,
new Float64Array(2*this.initialCapacity),new Int32Array(this.initialCapacity),new Int32Array(this.initialCapacity));for(b=0;b<this.initialCapacity;b++)c.elementNext[b]=-1,c.elementHash[b]=-1;this.state=c;this.threshold=c.elementDataSize*e.loadFactor}e.prototype.counter=function(){return this._counter.get()};e.prototype.inc=function(){return this._counter.incrementAndGet()};e.prototype.dec=function(){return this._counter.decrementAndGet()};e.prototype.clear=function(){if(0<this.elementCount){this.droppedCount=
this.elementCount=0;for(var c=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap.InternalState(this.initialCapacity,new Float64Array(2*this.initialCapacity),new Int32Array(this.initialCapacity),new Int32Array(this.initialCapacity)),b=0;b<this.initialCapacity;b++)c.elementNext[b]=-1,c.elementHash[b]=-1;this.state=c;this.threshold=c.elementDataSize*e.loadFactor}};e.prototype.rehashCapacity=function(c){c=0==c?1:c<<1;var b=new Float64Array(2*c);java.lang.System.arraycopy(this.state.elementKV,0,
b,0,this.state.elementKV.length);for(var d=new Int32Array(c),f=new Int32Array(c),h=0;h<c;h++)d[h]=-1,f[h]=-1;for(h=0;h<this.state.elementNext.length;h++)if(-1!=this.state.elementNext[h]){var l=(this.state.elementKV[2*h]&2147483647)%c,w=f[l];d[h]=-1!=w?w:-2;f[l]=h}this.state=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap.InternalState(c,b,d,f);this.threshold=c*e.loadFactor};e.prototype.each=function(a){for(var b=this.state,d=0;d<b.elementNext.length;d++)-1!=b.elementNext[d]&&a(b.elementKV[2*
d],b.elementKV[2*d+1])};e.prototype.metaClassIndex=function(){return this._metaClassIndex};e.prototype.contains=function(a){var b=this.state;if(0==this.state.elementDataSize)return!1;for(var d=b.elementHash[(a&2147483647)%b.elementDataSize];0<=d;){if(a==b.elementKV[2*d])return!0;d=b.elementNext[d]}return!1};e.prototype.get=function(c){var b=this.state;if(0==this.state.elementDataSize)return a.kevoree.modeling.KConfig.NULL_LONG;for(var d=b.elementHash[(c&2147483647)%b.elementDataSize];0<=d;){if(c==
b.elementKV[2*d])return b.elementKV[2*d+1];d=b.elementNext[d]}return a.kevoree.modeling.KConfig.NULL_LONG};e.prototype.put=function(a,b){var d=-1,f=-1;0!=this.state.elementDataSize&&(f=(a&2147483647)%this.state.elementDataSize,d=this.findNonNullKeyEntry(a,f));if(-1==d){++this.elementCount>this.threshold&&(this.rehashCapacity(this.state.elementDataSize),f=(a&2147483647)%this.state.elementDataSize);d=this.elementCount+this.droppedCount-1;this.state.elementKV[2*d]=a;this.state.elementKV[2*d+1]=b;var h=
this.state.elementHash[f];this.state.elementNext[d]=-1!=h?h:-2;this.state.elementHash[f]=d}else this.state.elementKV[d+1]=b;this.internal_set_dirty()};e.prototype.findNonNullKeyEntry=function(a,b){for(var d=this.state.elementHash[b];0<=d;){if(a==this.state.elementKV[2*d])return d;d=this.state.elementNext[d]}return-1};e.prototype.remove=function(a){var b=this.state;if(0!=this.state.elementDataSize){for(var b=(a&2147483647)%b.elementDataSize,d=this.state.elementHash[b],f=-1;0<=d&&a!=this.state.elementKV[2*
d];)f=d,d=this.state.elementNext[d];-1!=d&&(-1==f?this.state.elementHash[b]=0<this.state.elementNext[d]?d:-1:this.state.elementNext[f]=this.state.elementNext[d],this.state.elementNext[d]=-1,this.elementCount--,this.droppedCount++)}};e.prototype.size=function(){return this.elementCount};e.prototype.init=function(c,b,d){this._metaClassIndex=d;if(null!=c&&0!=c.length){var f=0;for(d=0;d<c.length&&","!=c.charAt(d)&&"/"!=c.charAt(d);)d++;if(!(d>=c.length)){","==c.charAt(d)&&(this._metaClassIndex=b.metaClassByName(c.substring(f,
d)).index(),d++,f=d);for(;d<c.length&&"/"!=c.charAt(d);)d++;b=a.kevoree.modeling.util.Base64.decodeToIntWithBounds(c,f,d);for(var f=0==b?1:b<<1,h=new Float64Array(2*f),l=new Int32Array(f),w=new Int32Array(f),F=0;F<f;F++)l[F]=-1,w[F]=-1;for(h=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap.InternalState(f,h,l,w);d<c.length;){d++;for(l=d;d<c.length&&":"!=c.charAt(d);)d++;for(w=d;d<c.length&&","!=c.charAt(d);)d++;var l=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(c,l,w),g=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(c,
w+1,d),w=(l&2147483647)%h.elementDataSize,F=this.elementCount;h.elementKV[2*F]=l;h.elementKV[2*F+1]=g;l=h.elementHash[w];h.elementNext[F]=-1!=l?l:-2;h.elementHash[w]=F;this.elementCount++}this.elementCount=b;this.droppedCount=0;this.state=h;this.threshold=f*e.loadFactor}}};e.prototype.serialize=function(c){var b=new java.lang.StringBuilder;-1!=this._metaClassIndex&&(b.append(c.metaClass(this._metaClassIndex).metaName()),b.append(","));a.kevoree.modeling.util.Base64.encodeIntToBuffer(this.elementCount,
b);b.append("/");c=!0;for(var d=this.state,f=0;f<d.elementNext.length;f++)if(-1!=d.elementNext[f]){var h=d.elementKV[2*f],l=d.elementKV[2*f+1];c||b.append(",");c=!1;a.kevoree.modeling.util.Base64.encodeLongToBuffer(h,b);b.append(":");a.kevoree.modeling.util.Base64.encodeLongToBuffer(l,b)}return b.toString()};e.prototype.free=function(a){this.clear()};e.prototype.type=function(){return a.kevoree.modeling.memory.space.KChunkTypes.LONG_LONG_MAP};e.prototype.space=function(){return this._space};e.prototype.internal_set_dirty=
function(){null!=this._space?(this._flags.get()&a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT)!=a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT&&(this._space.declareDirty(this),this.setFlags(a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT,0)):this.setFlags(a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT,0)};e.prototype.getFlags=function(){return this._flags.get()};e.prototype.setFlags=function(a,b){var d,f;do d=this._flags.get(),f=d&~b|a;while(!this._flags.compareAndSet(d,f))};e.prototype.universe=
function(){return this._universe};e.prototype.time=function(){return this._time};e.prototype.obj=function(){return this._obj};e.prototype.dependencies=function(){return null};e.prototype.addDependency=function(a,b,d){throw Error("Not implemented yet");};e.loadFactor=.75;return e}();k.ArrayLongLongMap=g;(function(a){var c=function(){return function(a,d,f,h){this.elementDataSize=a;this.elementKV=d;this.elementNext=f;this.elementHash=h}}();a.InternalState=c})(g=k.ArrayLongLongMap||(k.ArrayLongLongMap=
{}));g=function(e){function c(a,d,f,h){e.call(this,a,d,f,h);this.kvSize=2}__extends(c,e);c.prototype.previousOrEqualValue=function(b){b=this.internal_previousOrEqual_index(b);return-1!=b?this.value(b):a.kevoree.modeling.KConfig.NULL_LONG};c.prototype.lookupValue=function(a){return this.internal_lookup_value(a)};c.prototype.insert=function(a,d){this.internal_insert(a,d)};c.prototype.type=function(){return a.kevoree.modeling.memory.space.KChunkTypes.LONG_LONG_TREE};return c}(a.kevoree.modeling.memory.chunk.impl.AbstractArrayTree);
k.ArrayLongLongTree=g;g=function(){function a(c,b){}a.prototype.clear=function(){for(var a in this)this.hasOwnProperty(a)&&delete this[a]};a.prototype.get=function(a){return this[a]};a.prototype.put=function(a,b){var d=this[a];this[a]=b;return d};a.prototype.contains=function(a){return this.hasOwnProperty(a)};a.prototype.remove=function(a){var b=this[a];delete this[a];return b};a.prototype.size=function(){return Object.keys(this).length};a.prototype.each=function(a){for(var b in this)this.hasOwnProperty(b)&&
a(+b,this[b])};return a}();k.ArrayLongMap=g;g=function(e){function c(a,d,f,h){e.call(this,a,d,f,h)}__extends(c,e);c.prototype.previousOrEqual=function(b){b=this.internal_previousOrEqual_index(b);return-1!=b?this.key(b):a.kevoree.modeling.KConfig.NULL_LONG};c.prototype.insertKey=function(a){this.internal_insert(a,a)};c.prototype.type=function(){return a.kevoree.modeling.memory.space.KChunkTypes.LONG_TREE};return c}(a.kevoree.modeling.memory.chunk.impl.AbstractArrayTree);k.ArrayLongTree=g;g=function(){function a(c,
b){}a.prototype.clear=function(){for(var a in this)this.hasOwnProperty(a)&&delete this[a]};a.prototype.get=function(a){return this[a]};a.prototype.put=function(a,b){var d=this[a];this[a]=b;return d};a.prototype.contains=function(a){return this.hasOwnProperty(a)};a.prototype.remove=function(a){var b=this[a];delete this[a];return b};a.prototype.size=function(){return Object.keys(this).length};a.prototype.each=function(a){for(var b in this)this.hasOwnProperty(b)&&a(b,this[b])};return a}();k.ArrayStringMap=
g;g=function(){function e(a,b,d,f){this._metaClassIndex=-1;this._universe=a;this._time=b;this._obj=d;this._flags=new java.util.concurrent.atomic.AtomicLong(0);this._counter=new java.util.concurrent.atomic.AtomicInteger(0);this._dependencies=new java.util.concurrent.atomic.AtomicReference;this._space=f}e.prototype.space=function(){return this._space};e.prototype.metaClassIndex=function(){return this._metaClassIndex};e.prototype.serialize=function(c){var b=c.metaClass(this._metaClassIndex);c=new java.lang.StringBuilder;
var d=!0,b=b.metaElements();if(null!=this.raw&&null!=b)for(var f=0;f<this.raw.length&&f<b.length;f++)if(null!=this.raw[f])if(d?d=!1:c.append(a.kevoree.modeling.KConfig.CHUNK_ELEM_SEP),a.kevoree.modeling.util.Base64.encodeStringToBuffer(b[f].metaName(),c),c.append(a.kevoree.modeling.KConfig.CHUNK_VAL_SEP),b[f].metaType()==a.kevoree.modeling.meta.MetaType.ATTRIBUTE){var h=b[f];switch(h.attributeTypeId()){case a.kevoree.modeling.meta.KPrimitiveTypes.STRING_ID:a.kevoree.modeling.util.Base64.encodeStringToBuffer(this.raw[f],
c);break;case a.kevoree.modeling.meta.KPrimitiveTypes.LONG_ID:a.kevoree.modeling.util.Base64.encodeLongToBuffer(this.raw[f],c);break;case a.kevoree.modeling.meta.KPrimitiveTypes.CONTINUOUS_ID:h=this.raw[f];a.kevoree.modeling.util.Base64.encodeIntToBuffer(h.length,c);for(var l=0;l<h.length;l++)c.append(a.kevoree.modeling.KConfig.CHUNK_VAL_SEP),a.kevoree.modeling.util.Base64.encodeDoubleToBuffer(h[l],c);break;case a.kevoree.modeling.meta.KPrimitiveTypes.BOOL_ID:this.raw[f]?c.append("1"):c.append("0");
break;case a.kevoree.modeling.meta.KPrimitiveTypes.DOUBLE_ID:a.kevoree.modeling.util.Base64.encodeDoubleToBuffer(this.raw[f],c);break;case a.kevoree.modeling.meta.KPrimitiveTypes.INT_ID:a.kevoree.modeling.util.Base64.encodeIntToBuffer(this.raw[f],c);break;default:a.kevoree.modeling.meta.KPrimitiveTypes.isEnum(h.attributeTypeId())&&a.kevoree.modeling.util.Base64.encodeIntToBuffer(this.raw[f],c)}}else if(b[f].metaType()==a.kevoree.modeling.meta.MetaType.RELATION)for(h=this.raw[f],a.kevoree.modeling.util.Base64.encodeIntToBuffer(h.length,
c),l=0;l<h.length;l++)c.append(a.kevoree.modeling.KConfig.CHUNK_VAL_SEP),a.kevoree.modeling.util.Base64.encodeLongToBuffer(h[l],c);else if(b[f].metaType()==a.kevoree.modeling.meta.MetaType.DEPENDENCIES||b[f].metaType()==a.kevoree.modeling.meta.MetaType.INPUT||b[f].metaType()==a.kevoree.modeling.meta.MetaType.OUTPUT)for(h=this.raw[f],a.kevoree.modeling.util.Base64.encodeIntToBuffer(h.length,c),l=0;l<h.length;l++)c.append(a.kevoree.modeling.KConfig.CHUNK_VAL_SEP),a.kevoree.modeling.util.Base64.encodeDoubleToBuffer(h[l],
c);return c.toString()};e.prototype.loadObject=function(c,b,d,f){switch(c.attributeTypeId()){case a.kevoree.modeling.meta.KPrimitiveTypes.STRING_ID:return a.kevoree.modeling.util.Base64.decodeToStringWithBounds(b,d,f);case a.kevoree.modeling.meta.KPrimitiveTypes.LONG_ID:return a.kevoree.modeling.util.Base64.decodeToLongWithBounds(b,d,f);case a.kevoree.modeling.meta.KPrimitiveTypes.INT_ID:return a.kevoree.modeling.util.Base64.decodeToIntWithBounds(b,d,f);case a.kevoree.modeling.meta.KPrimitiveTypes.BOOL_ID:return"1"==
b.charAt(d)?!0:!1;case a.kevoree.modeling.meta.KPrimitiveTypes.DOUBLE_ID:return a.kevoree.modeling.util.Base64.decodeToDoubleWithBounds(b,d,f);default:return null}};e.prototype.init=function(c,b,d){-1==this._metaClassIndex&&(this._metaClassIndex=d);if(-1!=this._metaClassIndex&&(b=b.metaClass(this._metaClassIndex),this.raw=[],null!=c)){d=0;for(var f=c.length,h=null,l=0,w=null,e=null,g=-1;d<f;)c.charAt(d)==a.kevoree.modeling.KConfig.CHUNK_ELEM_SEP?(null!=h&&(h.metaType().equals(a.kevoree.modeling.meta.MetaType.ATTRIBUTE)&&
h.attributeTypeId()!=a.kevoree.modeling.meta.KPrimitiveTypes.CONTINUOUS_ID?this.raw[h.index()]=this.loadObject(h,c,l,d):h.metaType().equals(a.kevoree.modeling.meta.MetaType.RELATION)&&null!=e?(e[g]=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(c,l,d),this.raw[h.index()]=e,e=null):null!=w&&(w[g]=a.kevoree.modeling.util.Base64.decodeToDoubleWithBounds(c,l,d),this.raw[h.index()]=w,w=null)),h=null,l=d+1):c.charAt(d)==a.kevoree.modeling.KConfig.CHUNK_VAL_SEP&&(null==h?h=b.metaByName(a.kevoree.modeling.util.Base64.decodeToStringWithBounds(c,
l,d)):h.metaType().equals(a.kevoree.modeling.meta.MetaType.RELATION)?null==e?(e=new Float64Array(a.kevoree.modeling.util.Base64.decodeToIntWithBounds(c,l,d)),g=0):(e[g]=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(c,l,d),g++):null==w?(w=new Float64Array(a.kevoree.modeling.util.Base64.decodeToIntWithBounds(c,l,d)),g=0):(w[g]=a.kevoree.modeling.util.Base64.decodeToDoubleWithBounds(c,l,d),g++),l=d+1),d++;null!=h&&(h.metaType().equals(a.kevoree.modeling.meta.MetaType.ATTRIBUTE)&&h.attributeTypeId()!=
a.kevoree.modeling.meta.KPrimitiveTypes.CONTINUOUS_ID?this.raw[h.index()]=this.loadObject(h,c,l,d):h.metaType().equals(a.kevoree.modeling.meta.MetaType.RELATION)&&null!=e?(e[g]=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(c,l,d),this.raw[h.index()]=e):null!=w&&(w[g]=a.kevoree.modeling.util.Base64.decodeToDoubleWithBounds(c,l,d),this.raw[h.index()]=w))}};e.prototype.counter=function(){return this._counter.get()};e.prototype.inc=function(){return this._counter.incrementAndGet()};e.prototype.dec=
function(){return this._counter.decrementAndGet()};e.prototype.free=function(a){this.raw=null};e.prototype.type=function(){return a.kevoree.modeling.memory.space.KChunkTypes.OBJECT_CHUNK};e.prototype.getPrimitiveType=function(a,b){return null!=this.raw?this.raw[a]:null};e.prototype.getLongArraySize=function(a,b){var d=this.raw[a];return null!=d?d.length:0};e.prototype.getLongArrayElem=function(c,b,d){c=this.raw[c];return null!=c?c[b]:a.kevoree.modeling.KConfig.NULL_LONG};e.prototype.getLongArray=
function(a,b){var d=this.raw[a];return null!=d?d:null};e.prototype.addLongToArray=function(a,b,d){if(null!=this.raw){d=this.raw[a];if(null==d)d=new Float64Array(1),d[0]=b;else{for(var f=0;f<d.length;f++)if(d[f]==b)return!1;f=new Float64Array(d.length+1);java.lang.System.arraycopy(d,0,f,0,d.length);f[d.length]=b;d=f}this.raw[a]=d;this.internal_set_dirty();return!0}return!1};e.prototype.removeLongToArray=function(a,b,d){if(null!=this.raw&&(d=this.raw[a],null!=d)){for(var f=-1,h=0;h<d.length;h++)if(d[h]==
b){f=h;break}if(-1!=f)return 0==d.length-1?this.raw[a]=null:(b=new Float64Array(d.length-1),java.lang.System.arraycopy(d,0,b,0,f),java.lang.System.arraycopy(d,f+1,b,f,d.length-f-1),this.raw[a]=b),this.internal_set_dirty(),!0}return!1};e.prototype.clearLongArray=function(a,b){this.raw[a]=null};e.prototype.getDoubleArray=function(a,b){var d=this.raw[a];return null!=d?d:null};e.prototype.getDoubleArraySize=function(a,b){var d=this.raw[a];return null!=d?d.length:0};e.prototype.getDoubleArrayElem=function(c,
b,d){c=this.getDoubleArray(c,d);return a.kevoree.modeling.util.Checker.isDefined(c)?c[b]:0};e.prototype.setDoubleArrayElem=function(c,b,d,f){c=this.getDoubleArray(c,f);a.kevoree.modeling.util.Checker.isDefined(c)&&(c[b]=d,this.internal_set_dirty())};e.prototype.extendDoubleArray=function(a,b,d){null!=this.raw&&(d=this.raw[a],null==d?d=new Float64Array(b):(b=new Float64Array(b),java.lang.System.arraycopy(d,0,b,0,d.length),d=b),this.raw[a]=d,this.internal_set_dirty())};e.prototype.clearDoubleArray=
function(a,b){this.raw[a]=null};e.prototype.setPrimitiveType=function(a,b,d){this.raw[a]=b;this.internal_set_dirty()};e.prototype.clone=function(c,b,d,f){if(null==this.raw)return new a.kevoree.modeling.memory.chunk.impl.HeapObjectChunk(c,b,d,this._space);f=[];java.lang.System.arraycopy(this.raw,0,f,0,this.raw.length);c=new a.kevoree.modeling.memory.chunk.impl.HeapObjectChunk(c,b,d,this._space);c.raw=f;c._metaClassIndex=this._metaClassIndex;c.internal_set_dirty();return c};e.prototype.toJSON=function(c){var b=
c.metaClass(this._metaClassIndex);c=new java.lang.StringBuilder;c.append("{");var d=!0,b=b.metaElements();if(null!=this.raw&&null!=b)for(var f=0;f<this.raw.length&&f<b.length;f++)if(null!=this.raw[f])if(d?(c.append('"'),d=!1):c.append(',"'),c.append(b[f].metaName()),c.append('":'),b[f].metaType()==a.kevoree.modeling.meta.MetaType.ATTRIBUTE){var h=b[f];switch(h.attributeTypeId()){case a.kevoree.modeling.meta.KPrimitiveTypes.STRING_ID:c.append('"');c.append(a.kevoree.modeling.format.json.JsonString.encode(this.raw[f]));
c.append('"');break;case a.kevoree.modeling.meta.KPrimitiveTypes.LONG_ID:c.append(this.raw[f]);break;case a.kevoree.modeling.meta.KPrimitiveTypes.CONTINUOUS_ID:c.append("[");for(var h=this.raw[f],l=0;l<h.length;l++)0!=l&&c.append(","),c.append(h[l]);c.append("]");break;case a.kevoree.modeling.meta.KPrimitiveTypes.BOOL_ID:this.raw[f]?c.append("1"):c.append("0");break;case a.kevoree.modeling.meta.KPrimitiveTypes.DOUBLE_ID:c.append(this.raw[f]);break;case a.kevoree.modeling.meta.KPrimitiveTypes.INT_ID:c.append(this.raw[f]);
break;default:a.kevoree.modeling.meta.KPrimitiveTypes.isEnum(h.attributeTypeId())&&a.kevoree.modeling.util.Base64.encodeIntToBuffer(this.raw[f],c)}}else if(b[f].metaType()==a.kevoree.modeling.meta.MetaType.RELATION){c.append("[");h=this.raw[f];for(l=0;l<h.length;l++)0!=l&&c.append(","),c.append(h[l]);c.append("]")}else if(b[f].metaType()==a.kevoree.modeling.meta.MetaType.DEPENDENCIES||b[f].metaType()==a.kevoree.modeling.meta.MetaType.INPUT||b[f].metaType()==a.kevoree.modeling.meta.MetaType.OUTPUT){c.append("[");
h=this.raw[f];for(l=0;l<h.length;l++)0!=l&&c.append(","),c.append(h[l]);c.append("]")}c.append("}");return c.toString()};e.prototype.internal_set_dirty=function(){null!=this._space?(this._flags.get()&a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT)!=a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT&&(this._space.declareDirty(this),this.setFlags(a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT,0)):this.setFlags(a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT,0)};e.prototype.getFlags=function(){return this._flags.get()};
e.prototype.setFlags=function(a,b){var d,f;do d=this._flags.get(),f=d&~b|a;while(!this._flags.compareAndSet(d,f))};e.prototype.universe=function(){return this._universe};e.prototype.time=function(){return this._time};e.prototype.obj=function(){return this._obj};e.prototype.dependencies=function(){return this._dependencies.get()};e.prototype.addDependency=function(a,b,d){var f,h;do if(f=this._dependencies.get(),null==f)h=new Float64Array([a,b,d]);else{h=new Float64Array(f.length+3);var l=f.length;
java.lang.System.arraycopy(f,0,h,0,l);h[l]=a;h[l+1]=b;h[l+2]=d}while(!this._dependencies.compareAndSet(f,h))};return e}();k.HeapObjectChunk=g})(m.impl||(m.impl={}))})(z.chunk||(z.chunk={}));(function(m){var k=function(){function g(){}g.prototype.driver=function(){null==this._driver&&(this._driver=new a.kevoree.modeling.cdn.impl.MemoryContentDeliveryDriver);return this._driver};g.prototype.blas=function(){null==this._blas&&(this._blas=new a.kevoree.modeling.util.maths.structure.blas.impl.JavaBlas);
return this._blas};g.prototype.scheduler=function(){null==this._scheduler&&(this._scheduler=new a.kevoree.modeling.scheduler.impl.DirectScheduler);return this._scheduler};g.prototype.strategy=function(){null==this._strategy&&(this._strategy=new a.kevoree.modeling.memory.strategy.impl.HeapMemoryStrategy);return this._strategy};g.create=function(){return new a.kevoree.modeling.memory.manager.DataManagerBuilder};g.prototype.withContentDeliveryDriver=function(a){this._driver=a;return this};g.prototype.withScheduler=
function(a){this._scheduler=a;return this};g.prototype.withMemoryStrategy=function(a){this._strategy=a;return this};g.prototype.withBlas=function(a){this._blas=a;return this};g.prototype.build=function(){return new a.kevoree.modeling.memory.manager.impl.DataManager(this.driver(),this.scheduler(),this.strategy(),this.blas())};g.buildDefault=function(){return a.kevoree.modeling.memory.manager.DataManagerBuilder.create().build()};return g}();m.DataManagerBuilder=k;(function(g){var e=function(){function c(b,
d,f,h){this._universeKeyCalculator=this._objectKeyCalculator=null;this.isConnected=!1;this.currentCdnListener=-1;this._space=f.newSpace();this._scheduler=d;this._spaceManager=f.newSpaceManager(this._space,this._scheduler);this._resolver=new a.kevoree.modeling.memory.resolver.impl.DistortedTimeResolver(this._spaceManager,this);this._listenerManager=new a.kevoree.modeling.memory.manager.impl.ListenerManager;this._modelKeyCalculator=new a.kevoree.modeling.memory.manager.impl.KeyCalculator(c.zeroPrefix,
0);this._db=b;this.attachContentDeliveryDriver(new a.kevoree.modeling.cdn.impl.MemoryContentDeliveryDriver);this._operationManager=new a.kevoree.modeling.operation.impl.HashOperationManager(this);this._blas=h}c.prototype.setModel=function(a){this._model=a};c.prototype.model=function(){return this._model};c.prototype.blas=function(){return this._blas};c.prototype.nextUniverseKey=function(){if(null==this._universeKeyCalculator)throw Error(c.UNIVERSE_NOT_CONNECTED_ERROR);return this._universeKeyCalculator.nextKey()};
c.prototype.nextObjectKey=function(){if(null==this._objectKeyCalculator)throw Error(c.UNIVERSE_NOT_CONNECTED_ERROR);return this._objectKeyCalculator.nextKey()};c.prototype.nextModelKey=function(){return this._modelKeyCalculator.nextKey()};c.prototype.initUniverse=function(b,d){var f=this._space.get(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG);null==f||f.contains(b)||f.put(b,d)};c.prototype.save=function(b){var d=this;this._scheduler.dispatch(function(){var f=
d._space.detachDirties();if(0==f.size())null!=b&&b(null);else{for(var h=new Float64Array((f.size()+c.PREFIX_TO_SAVE_SIZE)*c.KEY_SIZE),l=[],w=0,e=d._model.metaModel();f.hasNext();){var g=f.next(),g=d._spaceManager.getAndMark(g[0],g[1],g[2]);if(null!=g&&(g.getFlags()&a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT)==a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT&&(g.getFlags()&a.kevoree.modeling.memory.KChunkFlags.REMOVED_BIT)!=a.kevoree.modeling.memory.KChunkFlags.REMOVED_BIT){h[w*c.KEY_SIZE]=g.universe();
h[w*c.KEY_SIZE+1]=g.time();h[w*c.KEY_SIZE+2]=g.obj();try{l[w]=g.serialize(e),g.setFlags(0,a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT),w++}catch(A){if(A instanceof Error)console.error(A.stack);else throw A;}d._spaceManager.unmarkMemoryElement(g)}}h[w*c.KEY_SIZE]=a.kevoree.modeling.KConfig.BEGINNING_OF_TIME;h[w*c.KEY_SIZE+1]=a.kevoree.modeling.KConfig.NULL_LONG;h[w*c.KEY_SIZE+2]=d._objectKeyCalculator.prefix();l[w]=""+d._objectKeyCalculator.lastComputedIndex();w++;h[w*c.KEY_SIZE]=a.kevoree.modeling.KConfig.END_OF_TIME;
h[w*c.KEY_SIZE+1]=a.kevoree.modeling.KConfig.NULL_LONG;h[w*c.KEY_SIZE+2]=d._universeKeyCalculator.prefix();l[w]=""+d._universeKeyCalculator.lastComputedIndex();d._db.put(h,l,b,d.currentCdnListener)}})};c.prototype.initKObject=function(a){this._resolver.indexObject(a)};c.prototype.preciseChunk=function(a,d,f,h,l){h=this._resolver.preciseChunk(a,d,f,h,l);if(null!=h)return h;throw Error("Cache Miss, not implemented Yet "+a+","+d+","+f);};c.prototype.closestChunk=function(a,d,f,h,l){h=this._resolver.closestChunk(a,
d,f,h,l);if(null!=h)return h;throw Error("Cache Miss, not implemented Yet "+a+","+d+","+f);};c.prototype.connect=function(b){this.isConnected&&null!=b&&b(null);if(null==this._db)null!=b&&b(Error("Please attach a KDataBase AND a KBroker first !"));else{var d=this;d._scheduler.start();d._scheduler.dispatch(function(){d._db.connect(function(f){if(null==f){f=d._operationManager.mappings();if(null!=f&&1<=f.length){var h=new a.kevoree.modeling.message.impl.Message;h.setType(a.kevoree.modeling.message.impl.Message.OPERATION_MAPPING);
h.setValues(f);d._db.sendToPeer(null,h,null)}d._db.atomicGetIncrement(new Float64Array([a.kevoree.modeling.KConfig.END_OF_TIME,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG]),function(l){d._prefix=l;l=new Float64Array([a.kevoree.modeling.KConfig.BEGINNING_OF_TIME,a.kevoree.modeling.KConfig.NULL_LONG,l,a.kevoree.modeling.KConfig.END_OF_TIME,a.kevoree.modeling.KConfig.NULL_LONG,l,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG]);
d._db.get(l,function(l){if(3==l.length){var h=null;try{var f=l[c.UNIVERSE_INDEX];if(null==f||a.kevoree.modeling.util.PrimitiveHelper.equals(f,""))f="0";var e=l[c.OBJ_INDEX];if(null==e||a.kevoree.modeling.util.PrimitiveHelper.equals(e,""))e="0";var g=l[c.GLO_TREE_INDEX],k=d._spaceManager.createAndMark(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.memory.space.KChunkTypes.LONG_LONG_MAP);if(null!=g)try{k.init(g,d.model().metaModel(),
-1)}catch(p){if(p instanceof Error)l=p,console.error(l.stack);else throw p;}var m=a.kevoree.modeling.util.PrimitiveHelper.parseLong(f),t=a.kevoree.modeling.util.PrimitiveHelper.parseLong(e);d._universeKeyCalculator=new a.kevoree.modeling.memory.manager.impl.KeyCalculator(d._prefix,m);d._objectKeyCalculator=new a.kevoree.modeling.memory.manager.impl.KeyCalculator(d._prefix,t);d.isConnected=!0}catch(u){if(u instanceof Error)h=l=u;else throw u;}null!=b&&b(h)}else null!=b&&b(Error("Error while connecting the KDataStore..."))})})}else null!=
b&&b(f)})})}};c.prototype.close=function(a){this.isConnected?(this._scheduler.stop(),this.isConnected=!1,null!=this._db?this._db.close(a):null!=a&&a(null)):null!=a&&a(null)};c.prototype.deleteUniverse=function(a,d){throw Error("Not implemented yet !");};c.prototype.lookup=function(a,d,f,h){this._scheduler.dispatch(this._resolver.lookup(a,d,f,h))};c.prototype.lookupAllObjects=function(a,d,f,h){this._scheduler.dispatch(this._resolver.lookupAllObjects(a,d,f,h))};c.prototype.lookupAllTimes=function(a,
d,f,h){this._scheduler.dispatch(this._resolver.lookupAllTimes(a,d,f,h))};c.prototype.createPreparedLookup=function(b){return new a.kevoree.modeling.memory.manager.impl.PreparedLookup(b)};c.prototype.lookupPrepared=function(a,d){this._scheduler.dispatch(this._resolver.lookupPrepared(a,d))};c.prototype.getRoot=function(a,d,f){this._resolver.getRoot(a,d,f)};c.prototype.setRoot=function(a,d){this._resolver.setRoot(a,d)};c.prototype.cdn=function(){return this._db};c.prototype.scheduler=function(){return this._scheduler};
c.prototype.attachContentDeliveryDriver=function(b){var d=this;this.currentCdnListener=d._db.addUpdateListener({onKeysUpdate:function(b){for(var h=new Float64Array(b.length),l=0,w=new Float64Array(b.length),e=b.length/c.KEY_SIZE,g=0,A=0;A<e;A++){var I=d._spaceManager.getAndMark(b[3*A],b[3*A+1],b[3*A+2]);null!=I&&((I.getFlags()&a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT)!=a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT&&(h[g*c.KEY_SIZE]=b[A*c.KEY_SIZE],h[g*c.KEY_SIZE+1]=b[A*c.KEY_SIZE+1],h[g*
c.KEY_SIZE+2]=b[A*c.KEY_SIZE+2],g++),d._spaceManager.unmarkMemoryElement(I));d._listenerManager.isListened(b[A*c.KEY_SIZE+2])&&b[A*c.KEY_SIZE]!=a.kevoree.modeling.KConfig.NULL_LONG&&b[A*c.KEY_SIZE+1]!=a.kevoree.modeling.KConfig.NULL_LONG&&b[A*c.KEY_SIZE+2]!=a.kevoree.modeling.KConfig.NULL_LONG&&(w[l*c.KEY_SIZE]=b[A*c.KEY_SIZE],w[l*c.KEY_SIZE+1]=b[A*c.KEY_SIZE+1],w[l*c.KEY_SIZE+2]=b[A*c.KEY_SIZE+2],l++)}if(0!=g||0!=l){var k=new Float64Array(3*g);java.lang.System.arraycopy(h,0,k,0,3*g);var p=new Float64Array(3*
l);java.lang.System.arraycopy(w,0,p,0,3*l);var m=d._model.metaModel();d._db.get(k,function(a){for(var l=0;l<a.length;l++)if(null!=a[l]){var b=d._spaceManager.getAndMark(k[3*l],k[3*l+1],k[3*l+2]);null!=b&&(b.init(a[l],m,-1),d._spaceManager.unmarkMemoryElement(b))}d._resolver.lookupPreciseKeys(p,function(a){d._listenerManager.dispatch(a)})()})}},onOperationCall:function(a){d._operationManager.dispatch(a)}})};c.prototype.operationManager=function(){return this._operationManager};c.prototype.createListener=
function(a){return this._listenerManager.createListener(a)};c.prototype.resolveTimes=function(a,d,f,h,l){this._resolver.resolveTimes(a,d,f,h,l)};c.prototype.spaceSize=function(){return this._space.size()};c.prototype.printDebug=function(){this._space.printDebug(this._model.metaModel())};c.UNIVERSE_NOT_CONNECTED_ERROR="Please connect your createModel prior to create a universe or an object";c.UNIVERSE_INDEX=0;c.OBJ_INDEX=1;c.GLO_TREE_INDEX=2;c.zeroPrefix=0;c.PREFIX_TO_SAVE_SIZE=2;c.KEY_SIZE=3;return c}();
g.DataManager=e;e=function(){function a(b,d,f){this._universe=b;this._listenerManager=d;this._id=f}a.prototype.listenerID=function(){return this._id};a.prototype.universe=function(){return 0};a.prototype.listenObjects=function(){return this._listenerManager._listener2Objects.get(this._id)};a.prototype.listen=function(a){this._listenerManager.manageRegistration(this._id,a)};a.prototype.destroy=function(){this._listenerManager.manageRegistration(this._id,null)};a.prototype.then=function(a){this.cb=
a};return a}();g.HeapListener=e;e=function(){function c(b,d){this._prefix="0x"+b.toString(a.kevoree.modeling.KConfig.PREFIX_SIZE);this._currentIndex=d}c.prototype.nextKey=function(){if(this._currentIndex==a.kevoree.modeling.KConfig.KEY_PREFIX_MASK)throw Error("Object Index could not be created because it exceeded the capacity of the current prefix. Ask for a new prefix.");this._currentIndex++;var b=this._currentIndex.toString(a.kevoree.modeling.KConfig.PREFIX_SIZE),b=parseInt(this._prefix+"000000000".substring(0,
9-b.length)+b,a.kevoree.modeling.KConfig.PREFIX_SIZE);if(b>=a.kevoree.modeling.KConfig.NULL_LONG)throw Error("Object Index exceeds teh maximum JavaScript number capacity. (2^"+a.kevoree.modeling.KConfig.LONG_SIZE+")");return b};c.prototype.lastComputedIndex=function(){return this._currentIndex};c.prototype.prefix=function(){return parseInt(this._prefix,a.kevoree.modeling.KConfig.PREFIX_SIZE)};return c}();g.KeyCalculator=e;e=function(){function c(){this._keyGen=new a.kevoree.modeling.memory.manager.impl.KeyCalculator(0,
0);this._listeners=new a.kevoree.modeling.memory.chunk.impl.ArrayLongMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR);this._obj2Listener=new a.kevoree.modeling.memory.chunk.impl.ArrayLongMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR);this._listener2Objects=new a.kevoree.modeling.memory.chunk.impl.ArrayLongMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR)}c.prototype.clear=
function(){this._listeners.clear();this._obj2Listener.clear();this._listener2Objects.clear()};c.prototype.createListener=function(b){b=new a.kevoree.modeling.memory.manager.impl.HeapListener(b,this,this._keyGen.nextKey());this._listeners.put(b.listenerID(),b);return b};c.prototype.manageRegistration=function(a,d){if(null!=d){if(this._listener2Objects.contains(a)){var f=this._listener2Objects.get(a),h=new Float64Array(f.length+1);java.lang.System.arraycopy(f,0,h,0,f.length);h[f.length]=d.uuid();this._listener2Objects.put(a,
h)}else f=new Float64Array(1),f[0]=d.uuid(),this._listener2Objects.put(a,f);this._obj2Listener.contains(d.uuid())?(f=this._obj2Listener.get(d.uuid()),h=new Float64Array(f.length+1),java.lang.System.arraycopy(f,0,h,0,f.length),h[f.length]=a,this._obj2Listener.put(d.uuid(),h)):(f=new Float64Array(1),f[0]=a,this._obj2Listener.put(d.uuid(),f))}else if(f=this._listener2Objects.get(a),null!=f)for(this._listener2Objects.remove(a),h=0;h<f.length;h++){for(var l=this._obj2Listener.get(f[h]),c=-1,e=0;e<l.length;e++)l[e]==
a&&(c=e);-1!=c&&(0==c?(e=new Float64Array(l.length-1),java.lang.System.arraycopy(f,c,e,0,l.length-1)):(e=new Float64Array(l.length-1),java.lang.System.arraycopy(f,0,e,0,c-1),java.lang.System.arraycopy(f,c+1,e,c,l.length-c-1)),this._obj2Listener.put(f[h],e))}};c.prototype.isListened=function(a){a=this._obj2Listener.get(a);return null!=a&&0<a.length?!0:!1};c.prototype.dispatch=function(a){for(var d=0;d<a.length;d++)if(null!=a[d]){var f=this._obj2Listener.get(a[d].uuid());if(null!=f&&0<f.length)for(var h=
0;h<f.length;h++){var l=this._listeners.get(f[h]).cb;null!=l&&l(a[d])}}};return c}();g.ListenerManager=e;e=function(){function a(b){this._current=-1;this._size=b;this._flatStatement=new Float64Array(3*b);this._current=0}a.prototype.addLookupOperation=function(a,d,f){if(this._current>=this._size)throw Error("PreparedLookup is full, prepared capacity:"+this._size);this._flatStatement[3*this._current]=a;this._flatStatement[3*this._current+1]=d;this._flatStatement[3*this._current+2]=f;this._current++};
a.prototype.flatLookup=function(){return this._flatStatement};return a}();g.PreparedLookup=e})(m.impl||(m.impl={}))})(z.manager||(z.manager={}));(function(m){(function(k){var g=function(){function e(a,b){this._spaceManager=a;this._manager=b;this._spaceManager.setResolver(this)}e.prototype.lookup=function(c,b,d,f){var h=this;return function(){try{h.getOrLoadAndMark(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,function(l){null!=l&&h.getOrLoadAndMark(a.kevoree.modeling.KConfig.NULL_LONG,
a.kevoree.modeling.KConfig.NULL_LONG,d,function(e){if(null==e)h._spaceManager.unmarkMemoryElement(l),f(null);else{var g=a.kevoree.modeling.memory.resolver.impl.DistortedTimeResolver.resolve_universe(l,e,b,c);h.getOrLoadAndMark(g,a.kevoree.modeling.KConfig.NULL_LONG,d,function(A){if(null==A)h._spaceManager.unmarkMemoryElement(e),h._spaceManager.unmarkMemoryElement(l),f(null);else{var I=A.previousOrEqual(b);I==a.kevoree.modeling.KConfig.NULL_LONG?(h._spaceManager.unmarkMemoryElement(A),h._spaceManager.unmarkMemoryElement(e),
h._spaceManager.unmarkMemoryElement(l),f(null)):h.getOrLoadAndMark(g,I,d,function(a){null==a?(h._spaceManager.unmarkMemoryElement(A),h._spaceManager.unmarkMemoryElement(e),h._spaceManager.unmarkMemoryElement(l),f(null)):(a=h._manager.model().metaModel().metaClass(a.metaClassIndex()),a=h._manager.model().createProxy(c,b,d,a,g,I),h._spaceManager.register(a),f(a))})}})}})})}catch(l){if(l instanceof Error)console.error(l.stack);else throw l;}}};e.prototype.lookupAllObjects=function(c,b,d,f){var h=this;
return function(){try{h.getOrLoadAndMark(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,function(l){if(null!=l){for(var e=new Float64Array(3*d.length),g=0;g<d.length;g++)e[3*g]=a.kevoree.modeling.KConfig.NULL_LONG,e[3*g+1]=a.kevoree.modeling.KConfig.NULL_LONG,e[3*g+2]=d[g];h.getOrLoadAndMarkAll(e,function(e){if(null==e||0==e.length)h._spaceManager.unmarkMemoryElement(l),f([]);else{for(var g=new Float64Array(3*d.length),F=0;F<d.length;F++){var C=
a.kevoree.modeling.memory.resolver.impl.DistortedTimeResolver.resolve_universe(l,e[F],b,c);g[3*F]=C;g[3*F+1]=a.kevoree.modeling.KConfig.NULL_LONG;g[3*F+2]=d[F]}h.getOrLoadAndMarkAll(g,function(F){if(null==F||0==F.length)h._spaceManager.unmarkAllMemoryElements(e),h._spaceManager.unmarkMemoryElement(l),f([]);else{for(var C=new Float64Array(3*d.length),k=0;k<d.length;k++){var p=F[k].previousOrEqual(b);p!=a.kevoree.modeling.KConfig.NULL_LONG?(C[3*k]=g[3*k],C[3*k+1]=p,C[3*k+2]=d[k]):java.lang.System.arraycopy(a.kevoree.modeling.KContentKey.NULL_KEY,
0,C,3*k,3)}h.getOrLoadAndMarkAll(C,function(a){if(null==a||0==a.length)h._spaceManager.unmarkAllMemoryElements(F),h._spaceManager.unmarkAllMemoryElements(e),h._spaceManager.unmarkMemoryElement(l),f([]);else{for(var k=[],p=0;p<a.length;p++)k[p]=null!=a[p]?h._manager.model().createProxy(c,b,d[p],h._manager.model().metaModel().metaClass(a[p].metaClassIndex()),g[3*p],C[3*p+1]):null;h._spaceManager.registerAll(k);f(k)}})}})}})}})}catch(l){if(l instanceof Error)console.error(l.stack);else throw l;}}};e.prototype.lookupPreciseKeys=
function(c,b){var d=this;return function(){try{d.getOrLoadAndMark(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,function(h){if(null!=h){for(var l=new Float64Array(3*c.length),f=0,e=c.length/3,g=0;g<e;g++)l[f]=a.kevoree.modeling.KConfig.NULL_LONG,f++,l[f]=a.kevoree.modeling.KConfig.NULL_LONG,f++,l[f]=c[3*g+2],f++,l[f]=c[3*g],f++,l[f]=a.kevoree.modeling.KConfig.NULL_LONG,f++,l[f]=c[3*g+2],f++,l[f]=c[3*g],f++,l[f]=c[3*g+1],f++,l[f]=c[3*
g+2],f++;d.getOrLoadAndMarkAll(l,function(l){if(null==l||0==l.length)d._spaceManager.unmarkMemoryElement(h),b([]);else{for(var f=[],c=0,w=-1,e=0;e<l.length;e++)null!=l[e]&&l[e].type()==a.kevoree.modeling.memory.space.KChunkTypes.OBJECT_CHUNK?(f[c]=d._manager.model().createProxy(l[e].universe(),l[e].time(),l[e].obj(),d._manager.model().metaModel().metaClass(w),l[e].universe(),l[e].time()),c++):null!=l[e]&&l[e].type()==a.kevoree.modeling.memory.space.KChunkTypes.LONG_LONG_MAP&&(w=l[e].metaClassIndex());
d._spaceManager.registerAll(f);b(f)}})}})}catch(f){if(f instanceof Error)console.error(f.stack);else throw f;}}};e.prototype.lookupPrepared=function(c,b){var d=this,f=c.flatLookup().length/3,h=c.flatLookup();return function(){try{d.getOrLoadAndMark(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,function(l){if(null!=l){for(var c=new Float64Array(3*f),e=0;e<f;e++)c[3*e]=a.kevoree.modeling.KConfig.NULL_LONG,c[3*e+1]=a.kevoree.modeling.KConfig.NULL_LONG,
c[3*e+2]=h[3*e+2];d.getOrLoadAndMarkAll(c,function(c){if(null==c||0==c.length)d._spaceManager.unmarkMemoryElement(l),b([]);else{for(var e=new Float64Array(3*f),g=0;g<f;g++){var F=a.kevoree.modeling.memory.resolver.impl.DistortedTimeResolver.resolve_universe(l,c[g],h[3*g+1],h[3*g]);e[3*g]=F;e[3*g+1]=a.kevoree.modeling.KConfig.NULL_LONG;e[3*g+2]=h[3*g+2]}d.getOrLoadAndMarkAll(e,function(g){if(null==g||0==g.length)d._spaceManager.unmarkAllMemoryElements(c),d._spaceManager.unmarkMemoryElement(l),b([]);
else{for(var F=new Float64Array(3*f),C=0;C<f;C++){var k=g[C].previousOrEqual(h[3*C+1]);k!=a.kevoree.modeling.KConfig.NULL_LONG?(F[3*C]=e[3*C],F[3*C+1]=k,F[3*C+2]=h[3*C+2]):java.lang.System.arraycopy(a.kevoree.modeling.KContentKey.NULL_KEY,0,F,3*C,3)}d.getOrLoadAndMarkAll(F,function(a){if(null==a||0==a.length)d._spaceManager.unmarkAllMemoryElements(g),d._spaceManager.unmarkAllMemoryElements(c),d._spaceManager.unmarkMemoryElement(l),b([]);else{for(var f=[],C=0;C<a.length;C++)f[C]=null!=a[C]?d._manager.model().createProxy(h[3*
C],h[3*C+1],h[3*C+2],d._manager.model().metaModel().metaClass(a[C].metaClassIndex()),e[3*C],F[3*C+1]):null;d._spaceManager.registerAll(f);b(f)}})}})}})}})}catch(l){if(l instanceof Error)console.error(l.stack);else throw l;}}};e.prototype.lookupAllTimes=function(c,b,d,f){var h=this;return function(){try{h.getOrLoadAndMark(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,function(l){null!=l&&h.getOrLoadAndMark(a.kevoree.modeling.KConfig.NULL_LONG,
a.kevoree.modeling.KConfig.NULL_LONG,d,function(e){if(null==e)h._spaceManager.unmarkMemoryElement(l),f(null);else{for(var g=new Float64Array(b.length),A=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap(-1,-1,-1,null),k=0,m=0;m<b.length;m++)g[m]=a.kevoree.modeling.memory.resolver.impl.DistortedTimeResolver.resolve_universe(l,e,b[m],c),A.contains(g[m])||(A.put(g[m],k),k++);var p=new Float64Array(3*k);A.each(function(l,b){var h=3*b;p[h]=b;p[h+1]=a.kevoree.modeling.KConfig.NULL_LONG;p[h+2]=d});
h.getOrLoadAndMarkAll(p,function(k){if(null==k||0==k.length)h._spaceManager.unmarkMemoryElement(e),h._spaceManager.unmarkMemoryElement(l),f(null);else{for(var I=new Float64Array(b.length),p=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap(-1,-1,-1,null),m=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap(-1,-1,-1,null),H=0,q=0;q<b.length;q++){var x=A.get(g[q]);I[q]=k[x].previousOrEqual(b[q]);p.contains(I[q])||(p.put(I[q],H),m.put(I[q],g[q]),H++)}var y=new Float64Array(3*H);p.each(function(a,
l){var b=3*l;y[b]=m.get(a);y[b+1]=a;y[b+2]=d});h.getOrLoadAndMarkAll(y,function(A){if(null==A||0==A.length)h._spaceManager.unmarkAllMemoryElements(k),h._spaceManager.unmarkMemoryElement(e),h._spaceManager.unmarkMemoryElement(l),f(null);else{for(var m=[],H=0;H<b.length;H++){var r=g[H],q=I[H],v=p.get(I[H]);m[H]=-1!=v&&r!=a.kevoree.modeling.KConfig.NULL_LONG&&q!=a.kevoree.modeling.KConfig.NULL_LONG?h._manager.model().createProxy(c,b[H],d,h._manager.model().metaModel().metaClass(A[v].metaClassIndex()),
r,q):null}h._spaceManager.registerAll(m);f(m)}})}})}})})}catch(l){if(l instanceof Error)console.error(l.stack);else throw l;}}};e.prototype.preciseChunk=function(a,b,d,f,h){return this.internal_chunk(a,b,d,!1,f,h)};e.prototype.closestChunk=function(a,b,d,f,h){return this.internal_chunk(a,b,d,!0,f,h)};e.prototype.internal_chunk=function(c,b,d,f,h,l){1!=h.temporalResolution()&&(b-=b%h.temporalResolution());h=this._spaceManager.getAndMark(c,b,d);if(null!=h){var w,e,g=!1;do w=l.get(),w[a.kevoree.modeling.abs.AbstractKObject.UNIVERSE_PREVIOUS_INDEX]!=
c||w[a.kevoree.modeling.abs.AbstractKObject.TIME_PREVIOUS_INDEX]!=b?(e=new Float64Array([c,b]),g=!0):e=w;while(!l.compareAndSet(w,e));g?this._spaceManager.unmark(w[a.kevoree.modeling.abs.AbstractKObject.UNIVERSE_PREVIOUS_INDEX],w[a.kevoree.modeling.abs.AbstractKObject.TIME_PREVIOUS_INDEX],d):this._spaceManager.unmarkMemoryElement(h);return h}var A=this._spaceManager.getAndMark(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,d);if(null==A)return null;var k=this._spaceManager.getAndMark(a.kevoree.modeling.KConfig.NULL_LONG,
a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG);if(null==k)return this._spaceManager.unmarkMemoryElement(A),null;var m=a.kevoree.modeling.memory.resolver.impl.DistortedTimeResolver.resolve_universe(k,A,b,c),p=this._spaceManager.getAndMark(m,a.kevoree.modeling.KConfig.NULL_LONG,d);if(null==p)return this._spaceManager.unmarkMemoryElement(k),this._spaceManager.unmarkMemoryElement(A),null;var B=p.previousOrEqual(b);if(B!=a.kevoree.modeling.KConfig.NULL_LONG){w=!f&&B!=b;f=!f&&
m!=c;h=this._spaceManager.getAndMark(m,B,d);if(null==h)return console.error("DePhasing problem, null chunk unexpected"),this._spaceManager.unmarkMemoryElement(p),this._spaceManager.unmarkMemoryElement(k),this._spaceManager.unmarkMemoryElement(A),null;if(w||f){g=!1;do w=l.get(),w[a.kevoree.modeling.abs.AbstractKObject.UNIVERSE_PREVIOUS_INDEX]!=c||w[a.kevoree.modeling.abs.AbstractKObject.TIME_PREVIOUS_INDEX]!=b?(e=new Float64Array([c,b]),g=!0):e=w;while(!l.compareAndSet(w,e));if(g)return l=this._spaceManager.cloneAndMark(h,
c,b,d,this._manager.model().metaModel()),2<h.counter()&&(h.addDependency(c,b,d),this._spaceManager.markMemoryElement(l)),f?(this._spaceManager.createAndMark(c,a.kevoree.modeling.KConfig.NULL_LONG,d,a.kevoree.modeling.memory.space.KChunkTypes.LONG_TREE).insertKey(b),this._spaceManager.unmarkMemoryElement(p),A.put(c,b)):p.insertKey(b),this._spaceManager.unmarkMemoryElement(h),this._spaceManager.unmarkMemoryElement(h),this._spaceManager.unmarkMemoryElement(p),this._spaceManager.unmarkMemoryElement(k),
this._spaceManager.unmarkMemoryElement(A),l;console.error("Should not be here !!!!");this._spaceManager.unmarkMemoryElement(p);this._spaceManager.unmarkMemoryElement(k);this._spaceManager.unmarkMemoryElement(A);l=this._spaceManager.getAndMark(c,b,d);for(A=0;null==l&&A<a.kevoree.modeling.KConfig.CAS_MAX_TRY;)l=this._spaceManager.getAndMark(c,b,d),A++;if(null==l)throw Error("CAS synchronisation problem!");this._spaceManager.unmarkMemoryElement(h);return l}g=!1;do w=l.get(),w[a.kevoree.modeling.abs.AbstractKObject.UNIVERSE_PREVIOUS_INDEX]!=
m||w[a.kevoree.modeling.abs.AbstractKObject.TIME_PREVIOUS_INDEX]!=B?(e=new Float64Array([m,B]),g=!0):e=w;while(!l.compareAndSet(w,e));g?this._spaceManager.unmark(w[a.kevoree.modeling.abs.AbstractKObject.UNIVERSE_PREVIOUS_INDEX],w[a.kevoree.modeling.abs.AbstractKObject.TIME_PREVIOUS_INDEX],d):this._spaceManager.unmarkMemoryElement(h);this._spaceManager.unmarkMemoryElement(p);this._spaceManager.unmarkMemoryElement(k);this._spaceManager.unmarkMemoryElement(A);return h}this._spaceManager.unmarkMemoryElement(p);
this._spaceManager.unmarkMemoryElement(k);this._spaceManager.unmarkMemoryElement(A);return null};e.prototype.indexObject=function(c){var b=c.metaClass().index(),d=this._spaceManager.createAndMark(c.universe(),c.now(),c.uuid(),a.kevoree.modeling.memory.space.KChunkTypes.OBJECT_CHUNK);d.init(null,this._manager.model().metaModel(),b);d.setFlags(a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT,0);d.space().declareDirty(d);d=this._spaceManager.createAndMark(c.universe(),a.kevoree.modeling.KConfig.NULL_LONG,
c.uuid(),a.kevoree.modeling.memory.space.KChunkTypes.LONG_TREE);d.init(null,this._manager.model().metaModel(),b);d.insertKey(c.now());d=this._spaceManager.createAndMark(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,c.uuid(),a.kevoree.modeling.memory.space.KChunkTypes.LONG_LONG_MAP);d.init(null,this._manager.model().metaModel(),b);d.put(c.universe(),c.now());this._spaceManager.register(c)};e.prototype.typeFromKey=function(c,b,d){c=c!=a.kevoree.modeling.KConfig.NULL_LONG;
a.kevoree.modeling.KConfig.END_OF_TIME==d?d=c?a.kevoree.modeling.memory.space.KChunkTypes.LONG_LONG_TREE:a.kevoree.modeling.memory.space.KChunkTypes.LONG_LONG_MAP:(b=b!=a.kevoree.modeling.KConfig.NULL_LONG,d=d!=a.kevoree.modeling.KConfig.NULL_LONG,d=c&&b&&d?a.kevoree.modeling.memory.space.KChunkTypes.OBJECT_CHUNK:c&&!b&&d?a.kevoree.modeling.memory.space.KChunkTypes.LONG_TREE:a.kevoree.modeling.memory.space.KChunkTypes.LONG_LONG_MAP);return d};e.prototype.getOrLoadAndMark=function(c,b,d,f){if(c==a.kevoree.modeling.KContentKey.NULL_KEY[0]&&
b==a.kevoree.modeling.KContentKey.NULL_KEY[1]&&d==a.kevoree.modeling.KContentKey.NULL_KEY[2])f(null);else{var h=this._spaceManager.getAndMark(c,b,d);null!=h?f(h):this.load(new Float64Array([c,b,d]),function(a){f(a[0])})}};e.prototype.getOrLoadAndMarkAll=function(c,b){for(var d=c.length/e.KEYS_SIZE,f=[],h=0,l=[],w=0;w<d;w++)c[w*e.KEYS_SIZE]==a.kevoree.modeling.KContentKey.NULL_KEY[0]&&c[w*e.KEYS_SIZE+1]==a.kevoree.modeling.KContentKey.NULL_KEY[1]&&c[w*e.KEYS_SIZE+2]==a.kevoree.modeling.KContentKey.NULL_KEY[2]?
(f[w]=!1,l[w]=null):(l[w]=this._spaceManager.getAndMark(c[w*e.KEYS_SIZE],c[w*e.KEYS_SIZE+1],c[w*e.KEYS_SIZE+2]),null==l[w]?(f[w]=!0,h++):f[w]=!1);if(0==h)b(l);else{for(var h=new Float64Array(3*h),g=0,w=0;w<d;w++)f[w]&&(h[g]=c[w*e.KEYS_SIZE],g++,h[g]=c[w*e.KEYS_SIZE+1],g++,h[g]=c[w*e.KEYS_SIZE+2],g++);this.load(h,function(a){for(var h=0,c=0;c<d;c++)f[c]&&(l[c]=a[h],h++);b(l)})}};e.prototype.getRoot=function(c,b,d){var f=this,h=a.kevoree.modeling.KConfig.END_OF_TIME;this.getOrLoadAndMark(a.kevoree.modeling.KConfig.NULL_LONG,
a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,function(l){null==l?d(null):f.getOrLoadAndMark(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,h,function(w){if(null==w)f._spaceManager.unmarkMemoryElement(l),d(null);else{var e=a.kevoree.modeling.memory.resolver.impl.DistortedTimeResolver.resolve_universe(l,w,b,c);f.getOrLoadAndMark(e,a.kevoree.modeling.KConfig.NULL_LONG,h,function(h){var e=h.previousOrEqualValue(b);f._spaceManager.unmarkMemoryElement(h);
f._spaceManager.unmarkMemoryElement(w);f._spaceManager.unmarkMemoryElement(l);e==a.kevoree.modeling.KConfig.NULL_LONG?d(null):f._manager.lookup(c,b,e,d)})}})})};e.prototype.setRoot=function(c,b){var d=this,f=a.kevoree.modeling.KConfig.END_OF_TIME;this.getOrLoadAndMark(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,function(h){null==h?b(null):d.getOrLoadAndMark(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,
f,function(l){var f=l;null==l&&(f=d._spaceManager.createAndMark(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.END_OF_TIME,a.kevoree.modeling.memory.space.KChunkTypes.LONG_LONG_MAP));var e=a.kevoree.modeling.memory.resolver.impl.DistortedTimeResolver.resolve_universe(h,l,c.now(),c.universe());f.put(c.universe(),c.now());e!=c.universe()?(f=d._spaceManager.createAndMark(c.universe(),a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.END_OF_TIME,
a.kevoree.modeling.memory.space.KChunkTypes.LONG_LONG_TREE),f.insert(c.now(),c.uuid()),d._spaceManager.unmarkMemoryElement(f),d._spaceManager.unmarkMemoryElement(l),d._spaceManager.unmarkMemoryElement(h),null!=b&&b(null)):d.getOrLoadAndMark(e,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.END_OF_TIME,function(f){var w=f;null==w&&(w=d._spaceManager.createAndMark(e,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.END_OF_TIME,a.kevoree.modeling.memory.space.KChunkTypes.LONG_LONG_TREE));
w.insert(c.now(),c.uuid());d._spaceManager.unmarkMemoryElement(f);d._spaceManager.unmarkMemoryElement(l);d._spaceManager.unmarkMemoryElement(h);null!=b&&b(null)})})})};e.prototype.resolveTimes=function(c,b,d,f,h){var l=this,e=new Float64Array([a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,b]);this.getOrLoadAndMarkAll(e,function(e){if(null==e||0==e.length)h(new Float64Array(0));
else{for(var w=a.kevoree.modeling.memory.resolver.impl.DistortedTimeResolver.universeSelectByRange(e[0],e[1],d,f,c),g=new Float64Array(3*w.length),k=0;k<w.length;k++)g[3*k]=w[k],g[3*k+1]=a.kevoree.modeling.KConfig.NULL_LONG,g[3*k+2]=b;var m=e[1];l.getOrLoadAndMarkAll(g,function(b){if(null==b||0==b.length)l._spaceManager.unmarkAllMemoryElements(e),h(new Float64Array(0));else{for(var c=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap(-1,-1,-1,null),g=f,A=0;A<w.length;A++){var k=b[A];if(null!=
k){var I=m.get(w[A]),I=I>d?I:d,q=g;k.range(I,g,function(a){0==c.size()?c.put(c.size(),a):a!=q&&c.put(c.size(),a)});g=I}}g=new Float64Array(c.size());for(A=0;A<c.size();A++)g[A]=c.get(A);l._spaceManager.unmarkAllMemoryElements(b);l._spaceManager.unmarkAllMemoryElements(e);h(g)}})}})};e.resolve_universe=function(c,b,d,f){if(null==c||null==b)return f;for(var h=f,l=a.kevoree.modeling.KConfig.NULL_LONG,e=b.get(h);h!=l;){if(e!=a.kevoree.modeling.KConfig.NULL_LONG&&e<=d)return h;l=h;h=c.get(h);e=b.get(h)}return f};
e.universeSelectByRange=function(c,b,d,f,h){for(var l=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap(-1,-1,-1,null),e=a.kevoree.modeling.KConfig.NULL_LONG,g=b.get(h);h!=e;){if(g!=a.kevoree.modeling.KConfig.NULL_LONG)if(g<=d){l.put(l.size(),h);break}else g<=f&&l.put(l.size(),h);e=h;h=c.get(h);g=b.get(h)}c=new Float64Array(l.size());for(b=0;b<l.size();b++)c[b]=l.get(b);return c};e.prototype.load=function(c,b){var d=this;this._manager.cdn().get(c,function(f){for(var h=[],l=0;l<f.length;l++){var e=
c[3*l],g=c[3*l+1],C=c[3*l+2];h[l]=d._spaceManager.createAndMark(e,g,C,d.typeFromKey(e,g,C));var A=-1;e!=a.kevoree.modeling.KConfig.NULL_LONG&&g!=a.kevoree.modeling.KConfig.NULL_LONG&&C!=a.kevoree.modeling.KConfig.NULL_LONG&&(e=d._spaceManager.getAndMark(a.kevoree.modeling.KConfig.NULL_LONG,a.kevoree.modeling.KConfig.NULL_LONG,C),null!=e&&(A=e.metaClassIndex(),d._spaceManager.unmarkMemoryElement(e)));h[l].init(f[l],d._manager.model().metaModel(),A)}b(h)})};e.prototype.getRelatedKeysResultSize=function(){return 4};
e.prototype.getRelatedKeys=function(c,b,d,f){f[0]=c;f[1]=b;f[2]=d;f[3]=c;f[4]=a.kevoree.modeling.KConfig.NULL_LONG;f[5]=d;f[6]=a.kevoree.modeling.KConfig.NULL_LONG;f[7]=a.kevoree.modeling.KConfig.NULL_LONG;f[8]=d;f[9]=a.kevoree.modeling.KConfig.NULL_LONG;f[10]=a.kevoree.modeling.KConfig.NULL_LONG;f[11]=a.kevoree.modeling.KConfig.NULL_LONG};e.KEYS_SIZE=3;return e}();k.DistortedTimeResolver=g})(m.impl||(m.impl={}))})(z.resolver||(z.resolver={}));(function(m){var k=function(){function a(){}a.OBJECT_CHUNK=
0;a.LONG_TREE=1;a.LONG_LONG_TREE=2;a.LONG_LONG_MAP=3;return a}();m.KChunkTypes=k;(function(g){var e=function(){function c(a){this._space=a}c.prototype.getAndMark=function(b,d,f){b=this._space.get(b,d,f);null!=b&&(b.getFlags()&a.kevoree.modeling.memory.KChunkFlags.REMOVED_BIT)!=a.kevoree.modeling.memory.KChunkFlags.REMOVED_BIT&&b.inc();return b};c.prototype.unmark=function(a,d,f){a=this._space.get(a,d,f);null!=a&&0>=a.dec()&&this.cleanDependenciesAndPotentiallyRemoveChunk(a)};c.prototype.createAndMark=
function(a,d,f,h){a=this._space.create(a,d,f,h);null!=a&&a.inc();return a};c.prototype.unmarkMemoryElement=function(a){0>=a.dec()&&this.cleanDependenciesAndPotentiallyRemoveChunk(a)};c.prototype.markMemoryElement=function(a){a.inc()};c.prototype.unmarkAllMemoryElements=function(a){for(var d=0;d<a.length;d++){var f=a[d];0>=a[d].dec()&&this.cleanDependenciesAndPotentiallyRemoveChunk(f)}};c.prototype.cleanDependenciesAndPotentiallyRemoveChunk=function(b){var d=b.dependencies();if(null!=d&&0<d.length)for(var f=
0;f<d.length;f+=3)this.unmark(d[f],d[f+1],d[f+2]);(b.getFlags()&a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT)!=a.kevoree.modeling.memory.KChunkFlags.DIRTY_BIT&&(b.setFlags(a.kevoree.modeling.memory.KChunkFlags.REMOVED_BIT,0),this._space.remove(b.universe(),b.time(),b.obj(),this._metaModel))};c.prototype.cloneAndMark=function(a,d,f,h,l){a=this._space.clone(a,d,f,h,l);a.inc();return a};c.prototype.clear=function(){};c.prototype.register=function(a){throw"Abstract method";};c.prototype.registerAll=
function(a){throw"Abstract method";};c.prototype.setResolver=function(a){throw"Abstract method";};return c}();g.AbstractCountingChunkSpaceManager=e;e=function(){function a(b,d){this.maxIndex=this.currentIndex=0;this._dirties=b;this._origin=d;this.maxIndex=b.length/3;this.tempKeys=new Float64Array(3)}a.prototype.hasNext=function(){return this.currentIndex<this.maxIndex};a.prototype.next=function(){this.currentIndex<this.maxIndex&&(this.tempKeys[0]=this._dirties[3*this.currentIndex],this.tempKeys[1]=
this._dirties[3*this.currentIndex+1],this.tempKeys[2]=this._dirties[3*this.currentIndex+2]);this.currentIndex++;return this.tempKeys};a.prototype.size=function(){return this.maxIndex};return a}();g.ChunkIterator=e;e=function(){function c(){this._dirtyState=new java.util.concurrent.atomic.AtomicReference;this._state=new java.util.concurrent.atomic.AtomicReference;this._dirtyState.set(new a.kevoree.modeling.memory.space.impl.HeapChunkSpace.InternalDirtyState);for(var b=a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,
d=new a.kevoree.modeling.memory.space.impl.HeapChunkSpace.InternalState(b,new Float64Array(3*b),new Int32Array(b),new Int32Array(b),[]),f=0;f<b;f++)d.elementNext[f]=-1,d.elementHash.set(f,-1);d._threshold=d.elementDataSize*c.LOAD_FACTOR;this._state.set(d)}c.prototype.get=function(a,d,f){var h=this._state.get();if(0==h.elementDataSize)return null;for(var l=h.elementHash.get(((a^d^f)&2147483647)%h.elementDataSize);-1!=l;){if(a==h.elementK3[3*l]&&d==h.elementK3[3*l+1]&&f==h.elementK3[3*l+2])return h.values[l];
l=h.elementNext[l]}return null};c.prototype.create=function(a,d,f,h){h=this.internal_createElement(a,d,f,h);return this.internal_put(a,d,f,h)};c.prototype.clone=function(a,d,f,h,l){return this.internal_put(d,f,h,a.clone(d,f,h,l))};c.prototype.internal_createElement=function(b,d,f,h){switch(h){case a.kevoree.modeling.memory.space.KChunkTypes.OBJECT_CHUNK:return new a.kevoree.modeling.memory.chunk.impl.HeapObjectChunk(b,d,f,this);case a.kevoree.modeling.memory.space.KChunkTypes.LONG_LONG_MAP:return new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap(b,
d,f,this);case a.kevoree.modeling.memory.space.KChunkTypes.LONG_TREE:return new a.kevoree.modeling.memory.chunk.impl.ArrayLongTree(b,d,f,this);case a.kevoree.modeling.memory.space.KChunkTypes.LONG_LONG_TREE:return new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongTree(b,d,f,this);default:return null}};c.prototype.internal_put=function(b,d,f,h){var l,c,e,g=0;do{l=this._state.get();var A=-1;e=-1;c=b^d^f;0!=l.elementDataSize&&(e=(c&2147483647)%l.elementDataSize,A=this.findNonNullKeyEntry(b,d,f,e,
l));if(-1==A){A=l._valuesIndex.getAndIncrement();if(A>l._threshold)return this.complex_insert(b,d,f,h,c,A);c=l;c.elementK3[3*A]=b;c.elementK3[3*A+1]=d;c.elementK3[3*A+2]=f;c.values[A]=h;c.elementNext[A]=c.elementHash.getAndSet(e,A);c._elementCount.incrementAndGet();e=h}else c=l,e=c.values[A];g++;if(g==a.kevoree.modeling.KConfig.CAS_MAX_TRY)throw Error("CompareAndSwap error, failed to converge");}while(!this._state.compareAndSet(l,c));return e};c.prototype.complex_insert=function(a,d,f,h,l,c){var e,
g;do{e=this._state.get();g=c>e._threshold?this.rehashCapacity(e):e;var A=(l&2147483647)%g.elementDataSize;g.elementK3[3*c]=a;g.elementK3[3*c+1]=d;g.elementK3[3*c+2]=f;g.values[c]=h;g.elementNext[c]=g.elementHash.getAndSet(A,c);g._elementCount.incrementAndGet()}while(!this._state.compareAndSet(e,g));return h};c.prototype.rehashCapacity=function(b){var d=0==b.elementDataSize?1:b.elementDataSize<<1,f=new Float64Array(3*d),h=[],l=b.sparse;l||(java.lang.System.arraycopy(b.elementK3,0,f,0,3*b.elementDataSize),
java.lang.System.arraycopy(b.values,0,h,0,b.elementDataSize));for(var e=new Int32Array(d),g=new Int32Array(d),C=0;C<d;C++)e[C]=-1,g[C]=-1;for(var A=0,C=0;C<b.elementDataSize;C++)if(null!=b.values[C]){var k=((b.elementK3[3*C]^b.elementK3[3*C+1]^b.elementK3[3*C+2])&2147483647)%d;e[C]=g[k];g[k]=C;l&&(h[A]=b.values[C],f[3*A]=b.elementK3[3*C],f[3*A+1]=b.elementK3[3*C+1],f[3*A+2]=b.elementK3[3*C+2],A++)}f=new a.kevoree.modeling.memory.space.impl.HeapChunkSpace.InternalState(d,f,e,g,h);f._threshold=d*c.LOAD_FACTOR;
f._valuesIndex.set(b._valuesIndex.get());l?(f._elementCount.set(A),f._valuesIndex.set(A)):(f._elementCount.set(b._elementCount.get()),f._valuesIndex.set(b._valuesIndex.get()));return f};c.prototype.findNonNullKeyEntry=function(a,d,f,h,l){for(h=l.elementHash.get(h);0<=h;){if(a==l.elementK3[3*h]&&d==l.elementK3[3*h+1]&&f==l.elementK3[3*h+2])return h;h=l.elementNext[h]}return-1};c.prototype.detachDirties=function(){var b=this._dirtyState.getAndSet(new a.kevoree.modeling.memory.space.impl.HeapChunkSpace.InternalDirtyState),
d=b._dirtyIndex.get(),f=new Float64Array(3*d);java.lang.System.arraycopy(b._dirtyList,0,f,0,3*d);return new a.kevoree.modeling.memory.space.impl.ChunkIterator(f,this)};c.prototype.declareDirty=function(b){var d=0,f;do if(f=this._dirtyState.get(),f.declareDirty(b.universe(),b.time(),b.obj()),d++,d==a.kevoree.modeling.KConfig.CAS_MAX_TRY)throw Error("CompareAndSwap error, failed to converge");while(!this._dirtyState.compareAndSet(f,f))};c.prototype.remove=function(b,d,f,h){var l,c=0;do{l=this._state.get();
var e=((b^d^f)&2147483647)%l.elementDataSize;if(0==l.elementDataSize)break;for(var g=l.elementHash.get(e),A=-1;0<=g&&(b!=l.elementK3[3*g]||d!=l.elementK3[3*g+1]||f!=l.elementK3[3*g+2]);)A=g,g=l.elementNext[g];if(-1==g)break;-1==A?l.elementHash.compareAndSet(e,g,l.elementNext[g]):l.elementNext[A]=l.elementNext[g];l.elementNext[g]=-1;e=l.values[g];l.values[g]=null;null!=e&&e.free(h);l._elementCount.decrementAndGet();c++;if(c==a.kevoree.modeling.KConfig.CAS_MAX_TRY)throw Error("CompareAndSwap error, failed to converge");
}while(!this._state.compareAndSet(l,l))};c.prototype.clear=function(b){var d=this._state.get();if(0<d._elementCount.get()){for(var f=0;f<d.elementDataSize;f++)null!=d.values[f]&&d.values[f].free(b);b=a.kevoree.modeling.KConfig.CACHE_INIT_SIZE;d=new a.kevoree.modeling.memory.space.impl.HeapChunkSpace.InternalState(b,new Float64Array(3*b),new Int32Array(b),new Int32Array(b),[]);for(f=0;f<b;f++)d.elementNext[f]=-1,d.elementHash.set(f,-1);d._elementCount.set(0);d._valuesIndex.set(0);d._threshold=d.elementDataSize*
c.LOAD_FACTOR;this._state.set(d)}};c.prototype.free=function(a){for(var d=this._state.getAndSet(null),f=0;f<d.elementDataSize;f++)null!=d.values[f]&&d.values[f].free(a);d._elementCount.set(0);d._valuesIndex.set(0);d._threshold=0};c.prototype.printDebug=function(a){try{for(var d=this._state.get(),f=0;f<d.values.length;f++){var h=d.values[f];if(null!=h){var l=h.serialize(a);console.log(d.elementK3[3*f]+","+d.elementK3[3*f+1]+","+d.elementK3[3*f+2]+"\x3d\x3e"+h.type()+"(count:"+h.counter()+",flag:"+
h.getFlags()+")\x3d\x3d\x3e"+l)}}}catch(c){if(c instanceof Error)console.error(c.stack);else throw c;}};c.prototype.size=function(){return this._state.get()._elementCount.get()};c.LOAD_FACTOR=.75;return c}();g.HeapChunkSpace=e;(function(c){var b=function(){return function(a,b,h,l,c){this.sparse=!1;this.elementDataSize=a;this.elementK3=b;this.elementNext=h;this.elementHash=new java.util.concurrent.atomic.AtomicIntegerArray(l);this.values=c;this._elementCount=new java.util.concurrent.atomic.AtomicInteger(0);
this._valuesIndex=new java.util.concurrent.atomic.AtomicInteger(0)}}();c.InternalState=b;b=function(){function b(){this._dirtyList=new Float64Array(3*a.kevoree.modeling.KConfig.CACHE_INIT_SIZE);this._dirtyIndex=new java.util.concurrent.atomic.AtomicInteger(0)}b.prototype.declareDirty=function(a,b,l){var d=3*this._dirtyIndex.getAndIncrement();d+2<this._dirtyList.length||this.reallocate(d);this._dirtyList[d]=a;this._dirtyList[d+1]=b;this._dirtyList[d+2]=l};b.prototype.reallocate=function(a){if(a+2>=
this._dirtyList.length){var b=this._dirtyList;this._dirtyList=new Float64Array(a<<1);java.lang.System.arraycopy(b,0,this._dirtyList,0,a)}};return b}();c.InternalDirtyState=b})(e=g.HeapChunkSpace||(g.HeapChunkSpace={}));e=function(){function a(b){this._space=b}a.prototype.getAndMark=function(a,d,f){return this._space.get(a,d,f)};a.prototype.unmark=function(a,d,f){};a.prototype.createAndMark=function(a,d,f,h){return this._space.create(a,d,f,h)};a.prototype.unmarkMemoryElement=function(a){};a.prototype.markMemoryElement=
function(a){};a.prototype.unmarkAllMemoryElements=function(a){};a.prototype.cloneAndMark=function(a,d,f,h,l){return this._space.clone(a,d,f,h,l)};a.prototype.clear=function(){};a.prototype.register=function(a){};a.prototype.registerAll=function(a){};a.prototype.setResolver=function(a){};return a}();g.NoopChunkSpaceManager=e})(m.impl||(m.impl={}))})(z.space||(z.space={}));(function(m){(function(k){var g=function(){function e(){}e.prototype.newSpace=function(){return new a.kevoree.modeling.memory.space.impl.HeapChunkSpace};
e.prototype.newSpaceManager=function(c,b){return new a.kevoree.modeling.memory.space.impl.NoopChunkSpaceManager(c)};return e}();k.HeapMemoryStrategy=g})(m.impl||(m.impl={}))})(z.strategy||(z.strategy={}))})(D.memory||(D.memory={}));(function(z){(function(n){var m=function(){function k(){this.internal=[]}k.prototype.id=function(){return this.internal[k.ID_INDEX]};k.prototype.setID=function(a){this.internal[k.ID_INDEX]=a};k.prototype.type=function(){return this.internal[k.TYPE_INDEX]};k.prototype.setType=
function(a){this.internal[k.TYPE_INDEX]=a};k.prototype.operationName=function(){return this.internal[k.OPERATION_INDEX]};k.prototype.setOperationName=function(a){this.internal[k.OPERATION_INDEX]=a};k.prototype.className=function(){return this.internal[k.CLASS_INDEX]};k.prototype.setClassName=function(a){this.internal[k.CLASS_INDEX]=a};k.prototype.keys=function(){return this.internal[k.KEYS_INDEX]};k.prototype.setKeys=function(a){this.internal[k.KEYS_INDEX]=a};k.prototype.values=function(){return this.internal[k.VALUES_INDEX]};
k.prototype.setValues=function(a){this.internal[k.VALUES_INDEX]=a};k.prototype.values2=function(){return this.internal[k.VALUES2_INDEX]};k.prototype.setValues2=function(a){this.internal[k.VALUES2_INDEX]=a};k.prototype.peer=function(){return this.internal[k.PEER_INDEX]};k.prototype.setPeer=function(a){this.internal[k.PEER_INDEX]=a};k.prototype.save=function(){for(var g=new java.lang.StringBuilder,e=!0,c=0;c<k.NB_ELEM;c++)if(null!=this.internal[c])switch(e||g.append(a.kevoree.modeling.KConfig.ELEM_SEP),
e=!1,g.append(k.KEYS_NAME[c]),g.append(a.kevoree.modeling.KConfig.VAL_SEP),c){case 0:a.kevoree.modeling.util.Base64.encodeIntToBuffer(this.internal[c],g);break;case 1:a.kevoree.modeling.util.Base64.encodeIntToBuffer(this.internal[c],g);break;case 2:a.kevoree.modeling.util.Base64.encodeStringToBuffer(this.internal[c],g);break;case 3:a.kevoree.modeling.util.Base64.encodeStringToBuffer(this.internal[c],g);break;case 4:a.kevoree.modeling.util.Base64.encodeStringToBuffer(this.internal[c],g);break;case 5:var b=
this.internal[c];a.kevoree.modeling.util.Base64.encodeIntToBuffer(b.length,g);for(var d=0;d<b.length;d++)g.append(a.kevoree.modeling.KConfig.VAL_SEP),a.kevoree.modeling.util.Base64.encodeLongToBuffer(b[d],g);break;case 6:b=this.internal[c];a.kevoree.modeling.util.Base64.encodeIntToBuffer(b.length,g);for(d=0;d<b.length;d++)g.append(a.kevoree.modeling.KConfig.VAL_SEP),null!=b[d]&&a.kevoree.modeling.util.Base64.encodeStringToBuffer(b[d],g);break;case 7:for(b=this.internal[c],a.kevoree.modeling.util.Base64.encodeIntToBuffer(b.length,
g),d=0;d<b.length;d++)g.append(a.kevoree.modeling.KConfig.VAL_SEP),null!=b[d]&&a.kevoree.modeling.util.Base64.encodeStringToBuffer(b[d],g)}return g.toString()};k.load=function(g){var e=new a.kevoree.modeling.message.impl.Message;if(null==g)return null;for(var c=0,b=-1,d=-1,f=null,h=null,l=-1,w=g.length;c<w;){if(g.charAt(c)==a.kevoree.modeling.KConfig.ELEM_SEP)-1!=b&&(2>b?e.internal[b]=a.kevoree.modeling.util.Base64.decodeToIntWithBounds(g,d,c):5>b?e.internal[b]=a.kevoree.modeling.util.Base64.decodeToStringWithBounds(g,
d,c):5==b&&null!=f?(f[l]=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(g,d,c),e.internal[b]=f,f=null):null!=h&&(h[l]=a.kevoree.modeling.util.Base64.decodeToStringWithBounds(g,d,c),e.internal[b]=h,h=null)),b=d=-1;else if(g.charAt(c)==a.kevoree.modeling.KConfig.VAL_SEP){if(-1==b)for(var d=g.charAt(c-1),F=0;F<k.NB_ELEM;F++)d==k.KEYS_NAME[F]&&(b=F);else 5<b?null==h?(h=[],l=0):(h[l]=a.kevoree.modeling.util.Base64.decodeToStringWithBounds(g,d,c),l++):null==f?(f=new Float64Array(a.kevoree.modeling.util.Base64.decodeToIntWithBounds(g,
d,c)),l=0):(f[l]=a.kevoree.modeling.util.Base64.decodeToLongWithBounds(g,d,c),l++);d=c+1}c++}-1!=b&&(2>b?e.internal[b]=a.kevoree.modeling.util.Base64.decodeToInt(g.substring(d,c)):5>b?e.internal[b]=a.kevoree.modeling.util.Base64.decodeToStringWithBounds(g,d,c):5==b&&null!=f?(f[l]=a.kevoree.modeling.util.Base64.decodeToLong(g.substring(d,c)),e.internal[b]=f):null!=h&&(h[l]=a.kevoree.modeling.util.Base64.decodeToStringWithBounds(g,d,c),e.internal[b]=h));return e};k.TYPE_INDEX=0;k.ID_INDEX=1;k.OPERATION_INDEX=
2;k.CLASS_INDEX=3;k.PEER_INDEX=4;k.KEYS_INDEX=5;k.VALUES_INDEX=6;k.VALUES2_INDEX=7;k.KEYS_NAME="TIOCPKVW".split("");k.EVENTS_TYPE=0;k.GET_REQ_TYPE=1;k.GET_RES_TYPE=2;k.PUT_REQ_TYPE=3;k.PUT_RES_TYPE=4;k.OPERATION_CALL_TYPE=5;k.OPERATION_RESULT_TYPE=6;k.ATOMIC_GET_INC_REQUEST_TYPE=7;k.ATOMIC_GET_INC_RESULT_TYPE=8;k.OPERATION_MAPPING=9;k.NB_ELEM=8;return k}();n.Message=m})(z.impl||(z.impl={}))})(D.message||(D.message={}));(function(z){var n=function(){function m(){}m.isEnum=function(a){return 0<=a};
m.BOOL_ID=-1;m.STRING_ID=-2;m.LONG_ID=-3;m.INT_ID=-4;m.DOUBLE_ID=-5;m.CONTINUOUS_ID=-6;m.BOOL=new a.kevoree.modeling.abs.AbstractDataType("BOOL",m.BOOL_ID);m.STRING=new a.kevoree.modeling.abs.AbstractDataType("STRING",m.STRING_ID);m.LONG=new a.kevoree.modeling.abs.AbstractDataType("LONG",m.LONG_ID);m.INT=new a.kevoree.modeling.abs.AbstractDataType("INT",m.INT_ID);m.DOUBLE=new a.kevoree.modeling.abs.AbstractDataType("DOUBLE",m.DOUBLE_ID);m.CONTINUOUS=new a.kevoree.modeling.abs.AbstractDataType("CONTINUOUS",
m.CONTINUOUS_ID);return m}();z.KPrimitiveTypes=n;n=function(){function a(){}a.prototype.equals=function(a){return this==a};a.values=function(){return a._MetaTypeVALUES};a.ATTRIBUTE=new a;a.RELATION=new a;a.DEPENDENCY=new a;a.DEPENDENCIES=new a;a.INPUT=new a;a.OUTPUT=new a;a.OPERATION=new a;a.CLASS=new a;a.MODEL=new a;a.ENUM=new a;a.LITERAL=new a;a._MetaTypeVALUES=[a.ATTRIBUTE,a.RELATION,a.DEPENDENCY,a.DEPENDENCIES,a.INPUT,a.OUTPUT,a.OPERATION,a.CLASS,a.MODEL,a.ENUM,a.LITERAL];return a}();z.MetaType=
n;(function(m){var k=function(g){function e(a,b){g.call(this,b);this._p_metaModel=a}__extends(e,g);e.prototype.metaModel=function(){return this._p_metaModel};e.prototype.internalCreateUniverse=function(c){return new a.kevoree.modeling.meta.impl.GenericUniverse(c,this._manager)};e.prototype.internalCreateObject=function(c,b,d,f,h,l){return null!=f.inferAlg()?new a.kevoree.modeling.meta.impl.GenericObjectInfer(c,b,d,f,this._manager,h,l):new a.kevoree.modeling.meta.impl.GenericObject(c,b,d,f,this._manager,
h,l)};return e}(a.kevoree.modeling.abs.AbstractKModel);m.GenericModel=k;k=function(a){function e(c,b,d,f,h,l,e){a.call(this,c,b,d,f,h,l,e)}__extends(e,a);return e}(a.kevoree.modeling.abs.AbstractKObject);m.GenericObject=k;k=function(a){function e(c,b,d,f,h,l,e){a.call(this,c,b,d,f,h,l,e)}__extends(e,a);return e}(a.kevoree.modeling.abs.AbstractKObjectInfer);m.GenericObjectInfer=k;k=function(g){function e(a,b){g.call(this,a,b)}__extends(e,g);e.prototype.internal_create=function(c){return new a.kevoree.modeling.meta.impl.GenericView(this._universe,
c,this._manager)};return e}(a.kevoree.modeling.abs.AbstractKUniverse);m.GenericUniverse=k;k=function(a){function e(c,b,d){a.call(this,c,b,d)}__extends(e,a);return e}(a.kevoree.modeling.abs.AbstractKView);m.GenericView=k;k=function(){function g(e,c,b,d,f,h){this._name=e;this._index=c;this._precision=b;this._key=d;this._attributeTypeId=f;this._extrapolation=h;null==this._extrapolation&&(this._extrapolation=a.kevoree.modeling.extrapolation.impl.DiscreteExtrapolation.instance())}g.prototype.attributeTypeId=
function(){return this._attributeTypeId};g.prototype.index=function(){return this._index};g.prototype.metaName=function(){return this._name};g.prototype.metaType=function(){return a.kevoree.modeling.meta.MetaType.ATTRIBUTE};g.prototype.precision=function(){return this._precision};g.prototype.key=function(){return this._key};g.prototype.strategy=function(){return this._extrapolation};g.prototype.setExtrapolation=function(a){this._extrapolation=a};g.prototype.setPrecision=function(a){this._precision=
a};return g}();m.MetaAttribute=k;k=function(){function g(e,c,b,d){this._parents=this._cachedOutputs=this._cachedInputs=this._indexes=null;this._temporalResolution=1;this._name=e;this._index=c;this._meta=[];this._alg=b;this._parents=d;this._indexes=new a.kevoree.modeling.memory.chunk.impl.ArrayStringMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR);null!=this._alg&&this.internal_add_meta(new a.kevoree.modeling.meta.impl.MetaDependencies(this._meta.length,
this))}g.prototype.init=function(a){this._indexes.clear();this._meta=a;for(var c=0;c<this._meta.length;c++)this._indexes.put(a[c].metaName(),a[c].index());this.clearCached()};g.prototype.metaByName=function(a){return null!=this._indexes&&(a=this._indexes.get(a),null!=a)?this._meta[a]:null};g.prototype.metaParents=function(){return this._parents};g.prototype.attribute=function(e){e=this.metaByName(e);return null!=e&&e.metaType()==a.kevoree.modeling.meta.MetaType.ATTRIBUTE?e:null};g.prototype.reference=
function(e){e=this.metaByName(e);return null!=e&&e.metaType()==a.kevoree.modeling.meta.MetaType.RELATION?e:null};g.prototype.operation=function(e){e=this.metaByName(e);return null!=e&&e.metaType()==a.kevoree.modeling.meta.MetaType.OPERATION?e:null};g.prototype.metaElements=function(){return this._meta};g.prototype.index=function(){return this._index};g.prototype.metaName=function(){return this._name};g.prototype.metaType=function(){return a.kevoree.modeling.meta.MetaType.CLASS};g.prototype.meta=function(a){return 0<=
a&&a<this._meta.length?this._meta[a]:null};g.prototype.addAttribute=function(a,c){return this.internal_addatt(a,c)};g.prototype.internal_addatt=function(e,c){var b=-1,d;c.id()==a.kevoree.modeling.meta.KPrimitiveTypes.CONTINUOUS_ID?(d=a.kevoree.modeling.extrapolation.impl.PolynomialExtrapolation.instance(),b=.1):d=a.kevoree.modeling.extrapolation.impl.DiscreteExtrapolation.instance();b=new a.kevoree.modeling.meta.impl.MetaAttribute(e,this._meta.length,b,!1,c.id(),d);this.internal_add_meta(b);return b};
g.prototype.addRelation=function(a,c,b){return this.internal_addref(a,c,b)};g.prototype.internal_addref=function(e,c,b){null==b?(b="op_"+e,c.getOrCreate(b,e,this,!1)):c.getOrCreate(b,e,this,!0);e=new a.kevoree.modeling.meta.impl.MetaRelation(e,this._meta.length,!0,c.index(),b,this.index(),-1);this.internal_add_meta(e);return e};g.prototype.getOrCreate=function(e,c,b,d){var f=this.reference(e);if(null!=f)return f;e=new a.kevoree.modeling.meta.impl.MetaRelation(e,this._meta.length,d,b.index(),c,this.index(),
-1);this.internal_add_meta(e);return e};g.prototype.addOperation=function(e){e=new a.kevoree.modeling.meta.impl.MetaOperation(e,this._meta.length,this.index(),new Int32Array([]),-1,[],!1);this.internal_add_meta(e);return e};g.prototype.inferAlg=function(){return this._alg};g.prototype.addDependency=function(a,c){var b=this.dependencies();return null!=b?b.addDependency(a,c):null};g.prototype.addInput=function(e,c){var b=new a.kevoree.modeling.meta.impl.MetaInferInput(e,this._meta.length,c);this.internal_add_meta(b);
return b};g.prototype.addOutput=function(e,c){var b=new a.kevoree.modeling.meta.impl.MetaInferOutput(e,this._meta.length,c.id());this.internal_add_meta(b);return b};g.prototype.dependencies=function(){return this.metaByName(a.kevoree.modeling.meta.impl.MetaDependencies.DEPENDENCIES_NAME)};g.prototype.inputs=function(){null==this._cachedInputs&&this.cacheInputs();return this._cachedInputs};g.prototype.cacheInputs=function(){for(var e=0,c=0;c<this._meta.length;c++)this._meta[c].metaType().equals(a.kevoree.modeling.meta.MetaType.INPUT)&&
e++;this._cachedInputs=[];for(c=e=0;c<this._meta.length;c++)this._meta[c].metaType().equals(a.kevoree.modeling.meta.MetaType.INPUT)&&(this._cachedInputs[e]=this._meta[c],e++)};g.prototype.outputs=function(){null==this._cachedOutputs&&this.cacheOuputs();return this._cachedOutputs};g.prototype.temporalResolution=function(){return this._temporalResolution};g.prototype.setTemporalResolution=function(a){this._temporalResolution=a};g.prototype.cacheOuputs=function(){for(var e=0,c=0;c<this._meta.length;c++)this._meta[c].metaType().equals(a.kevoree.modeling.meta.MetaType.OUTPUT)&&
e++;this._cachedOutputs=[];for(c=e=0;c<this._meta.length;c++)this._meta[c].metaType().equals(a.kevoree.modeling.meta.MetaType.OUTPUT)&&(this._cachedOutputs[e]=this._meta[c],e++)};g.prototype.clearCached=function(){this._cachedInputs=this._cachedOutputs=null};g.prototype.internal_add_meta=function(a){this.clearCached();this._meta[a.index()]=a;this._indexes.put(a.metaName(),a.index())};g.prototype.addParent=function(a){var c=new Int32Array(this._parents.length+1);java.lang.System.arraycopy(this._parents,
0,c,0,this._parents.length);c[this._parents.length]=a.index();this._parents=c};return g}();m.MetaClass=k;k=function(){function g(e,c){this._indexes=null;this._index=e;this._origin=c;this._dependencies=[];this._indexes=new a.kevoree.modeling.memory.chunk.impl.ArrayStringMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR)}g.prototype.origin=function(){return this._origin};g.prototype.allDependencies=function(){return this._dependencies};g.prototype.dependencyByName=
function(a){a=this._indexes.get(a);return null!=a?this._dependencies[a]:null};g.prototype.index=function(){return this._index};g.prototype.metaName=function(){return g.DEPENDENCIES_NAME};g.prototype.metaType=function(){return a.kevoree.modeling.meta.MetaType.DEPENDENCIES};g.prototype.addDependency=function(e,c){var b=new a.kevoree.modeling.meta.impl.MetaDependency(e,this._dependencies.length,this,c);this.internal_add_dep(b);return b};g.prototype.internal_add_dep=function(a){this._dependencies[a.index()]=
a;this._indexes.put(a.metaName(),a.index())};g.DEPENDENCIES_NAME="allDependencies";return g}();m.MetaDependencies=k;k=function(){function g(a,c,b,d){this._name=a;this._index=c;this._referredMetaClassIndex=d}g.prototype.referredMetaClassIndex=function(){return this._referredMetaClassIndex};g.prototype.index=function(){return this._index};g.prototype.metaName=function(){return this._name};g.prototype.metaType=function(){return a.kevoree.modeling.meta.MetaType.DEPENDENCY};return g}();m.MetaDependency=
k;k=function(){function g(e,c){this._indexes=null;this._name=e;this._index=c;this._literals=[];this._indexes=new a.kevoree.modeling.memory.chunk.impl.ArrayStringMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR)}g.prototype.init=function(a){this._literals=a;for(var c=0;c<a.length;c++)this._indexes.put(a[c].metaName(),a[c].index())};g.prototype.literals=function(){return this._literals};g.prototype.literalByName=function(a){return null!=this._indexes&&(a=this._indexes.get(a),
null!=a)?this._literals[a]:null};g.prototype.literal=function(a){return this._literals[a]};g.prototype.addLiteral=function(e){e=new a.kevoree.modeling.meta.impl.MetaLiteral(e,this._literals.length,this._name);this.internal_add_meta(e);return e};g.prototype.name=function(){return this._name};g.prototype.id=function(){return this._index};g.prototype.index=function(){return this._index};g.prototype.metaName=function(){return this._name};g.prototype.metaType=function(){return a.kevoree.modeling.meta.MetaType.ENUM};
g.prototype.internal_add_meta=function(a){this._literals[a.index()]=a;this._indexes.put(a.metaName(),a.index())};return g}();m.MetaEnum=k;k=function(){function g(a,c,b){this._name=a;this._index=c;this._extractor=b}g.prototype.extractorQuery=function(){return this._extractor};g.prototype.extractor=function(){return null!=this._cachedTraversal?this._cachedTraversal:this.cacheTraversal()};g.prototype.cacheTraversal=function(){return this._cachedTraversal=a.kevoree.modeling.traversal.query.impl.QueryEngine.getINSTANCE().buildTraversal(this._extractor)};
g.prototype.index=function(){return this._index};g.prototype.metaName=function(){return this._name};g.prototype.metaType=function(){return a.kevoree.modeling.meta.MetaType.INPUT};return g}();m.MetaInferInput=k;k=function(){function g(a,c,b){this._name=a;this._index=c;this._type=b}g.prototype.index=function(){return this._index};g.prototype.metaName=function(){return this._name};g.prototype.metaType=function(){return a.kevoree.modeling.meta.MetaType.OUTPUT};g.prototype.attributeTypeId=function(){return this._type};
return g}();m.MetaInferOutput=k;k=function(){function g(a,c,b){this._name=a;this._index=c;this._className=b}g.prototype.index=function(){return this._index};g.prototype.metaName=function(){return this._name};g.prototype.metaType=function(){return a.kevoree.modeling.meta.MetaType.LITERAL};g.prototype.toString=function(){return"KLiteral@"+this._className+"."+this._name};return g}();m.MetaLiteral=k;k=function(){function g(e){this._metaTypes_indexes=this._metaClasses_indexes=null;this._name=e;this._index=
0;this._metaClasses=[];this._metaTypes=[];this._metaClasses_indexes=new a.kevoree.modeling.memory.chunk.impl.ArrayStringMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR);this._metaTypes_indexes=new a.kevoree.modeling.memory.chunk.impl.ArrayStringMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR)}g.prototype.index=function(){return this._index};g.prototype.metaName=function(){return this._name};g.prototype.metaType=
function(){return a.kevoree.modeling.meta.MetaType.MODEL};g.prototype.init=function(a,c){this._metaClasses_indexes.clear();this._metaTypes_indexes.clear();this._metaClasses=a;this._metaTypes=c;for(var b=0;b<this._metaClasses.length;b++)this._metaClasses_indexes.put(a[b].metaName(),a[b].index());for(b=0;b<this._metaTypes.length;b++)this._metaTypes_indexes.put(c[b].metaName(),c[b].index())};g.prototype.metaClasses=function(){return this._metaClasses};g.prototype.metaClassByName=function(a){if(null==
this._metaClasses_indexes)return null;a=this._metaClasses_indexes.get(a);return null==a?null:this._metaClasses[a]};g.prototype.metaClass=function(a){return 0<=a&&a<this._metaClasses.length?this._metaClasses[a]:null};g.prototype.addMetaClass=function(a){return this.internal_addmetaclass(a,null)};g.prototype.addInferMetaClass=function(a,c){return this.internal_addmetaclass(a,c)};g.prototype.metaTypes=function(){return this._metaTypes};g.prototype.metaTypeByName=function(a){if(null==this._metaTypes)return null;
a=this._metaTypes_indexes.get(a);return null==a?null:this._metaTypes[a]};g.prototype.addMetaEnum=function(e){e=new a.kevoree.modeling.meta.impl.MetaEnum(e,this._metaTypes.length);this.internal_add_type(e);return e};g.prototype.internal_addmetaclass=function(e,c){if(this._metaClasses_indexes.contains(e))return this.metaClassByName(e);if(null==this._metaClasses)return this._metaClasses=[],this._metaClasses[0]=new a.kevoree.modeling.meta.impl.MetaClass(e,0,c,new Int32Array([])),this._metaClasses_indexes.put(e,
this._metaClasses[0].index()),this._metaClasses[0];var b=new a.kevoree.modeling.meta.impl.MetaClass(e,this._metaClasses.length,c,new Int32Array([]));this.internal_add_meta_class(b);return b};g.prototype.internal_add_meta_class=function(a){this._metaClasses[a.index()]=a;this._metaClasses_indexes.put(a.metaName(),a.index())};g.prototype.internal_add_type=function(a){this._metaTypes[a.index()]=a;this._metaTypes_indexes.put(a.metaName(),a.index())};g.prototype.createModel=function(e){return new a.kevoree.modeling.meta.impl.GenericModel(this,
e)};return g}();m.MetaModel=k;k=function(){function g(a,c,b,d,f,h,l){this._paramIsArray=this._paramTypes=null;this._returnIsArray=!1;this._name=a;this._index=c;this._originMetaClassIndex=b;this._paramTypes=d;this._returnType=f;this._paramIsArray=h;this._returnIsArray=l}g.prototype.index=function(){return this._index};g.prototype.metaName=function(){return this._name};g.prototype.metaType=function(){return a.kevoree.modeling.meta.MetaType.OPERATION};g.prototype.originMetaClassIndex=function(){return this._originMetaClassIndex};
g.prototype.paramTypes=function(){return this._paramTypes};g.prototype.paramMultiplicities=function(){return this._paramIsArray};g.prototype.returnType=function(){return this._returnType};g.prototype.returnTypeIsArray=function(){return this._returnIsArray};g.prototype.addParam=function(a,c){var b=new Int32Array(this._paramTypes.length+1),d=[];java.lang.System.arraycopy(this._paramTypes,0,b,0,this._paramTypes.length);java.lang.System.arraycopy(this._paramIsArray,0,d,0,this._paramIsArray.length);b[this._paramTypes.length]=
a.id();d[this._paramIsArray.length]=c;this._paramTypes=b;this._paramIsArray=d};g.prototype.setReturnType=function(a,c){this._returnType=a.id();this._returnIsArray=c};return g}();m.MetaOperation=k;k=function(){function g(a,c,b,d,f,h,l){this._maxBound=-1;this._name=a;this._index=c;this._visible=b;this._referredMetaClassIndex=d;this._op_name=f;this._originMetaClassIndex=h;this._maxBound=l}g.prototype.referredMetaClassIndex=function(){return this._referredMetaClassIndex};g.prototype.oppositeName=function(){return this._op_name};
g.prototype.originMetaClassIndex=function(){return this._originMetaClassIndex};g.prototype.index=function(){return this._index};g.prototype.metaName=function(){return this._name};g.prototype.metaType=function(){return a.kevoree.modeling.meta.MetaType.RELATION};g.prototype.visible=function(){return this._visible};g.prototype.maxBound=function(){return this._maxBound};g.prototype.setMaxBound=function(a){this._maxBound=a};return g}();m.MetaRelation=k})(z.impl||(z.impl={}))})(D.meta||(D.meta={}));(function(z){var n=
function(){function m(){}m.serialize=function(k,g,e){if(e){e=new java.lang.StringBuilder;for(var c=0;c<g.length;c++)0!=c&&e.append(a.kevoree.modeling.KConfig.KEY_SEP),e.append(a.kevoree.modeling.operation.OperationStrategies.serialize(k,g[c],!1));return e.toString()}switch(k){case a.kevoree.modeling.meta.KPrimitiveTypes.BOOL_ID:return g?"1":"0";case a.kevoree.modeling.meta.KPrimitiveTypes.STRING_ID:return a.kevoree.modeling.format.json.JsonString.encode(g.toString());case a.kevoree.modeling.meta.KPrimitiveTypes.DOUBLE_ID:return a.kevoree.modeling.util.Base64.encodeDouble(g);
case a.kevoree.modeling.meta.KPrimitiveTypes.INT_ID:return a.kevoree.modeling.util.Base64.encodeInt(g);case a.kevoree.modeling.meta.KPrimitiveTypes.LONG_ID:return a.kevoree.modeling.util.Base64.encodeLong(g);default:return a.kevoree.modeling.util.Base64.encodeInt(g.index())}};m.serializeParam=function(k,g){for(var e=k.paramTypes(),c=k.paramMultiplicities(),b=[],d=0;d<e.length;d++)b[d]=a.kevoree.modeling.operation.OperationStrategies.serialize(e[d],g[d],c[d]);return b};m.serializeReturn=function(k,
g){return a.kevoree.modeling.operation.OperationStrategies.serialize(k.returnType(),g,k.returnTypeIsArray())};m.unserialize=function(k,g,e,c){if(c){c=new java.util.ArrayList;for(var b=0,d=0;b<e.length;)e.charAt(b)==a.kevoree.modeling.KConfig.KEY_SEP&&(b!=d&&c.add(e.substring(d,b)),d=b+1),b++;b!=d&&c.add(e.substring(d,b));switch(g){case a.kevoree.modeling.meta.KPrimitiveTypes.BOOL_ID:e=[];break;case a.kevoree.modeling.meta.KPrimitiveTypes.STRING_ID:e=[];break;case a.kevoree.modeling.meta.KPrimitiveTypes.DOUBLE_ID:e=
[];break;case a.kevoree.modeling.meta.KPrimitiveTypes.INT_ID:e=[];break;case a.kevoree.modeling.meta.KPrimitiveTypes.LONG_ID:e=[];break;default:e=[]}for(b=0;b<c.size();b++)e[b]=a.kevoree.modeling.operation.OperationStrategies.unserialize(k,g,c.get(b),!1);return e}switch(g){case a.kevoree.modeling.meta.KPrimitiveTypes.BOOL_ID:return a.kevoree.modeling.util.PrimitiveHelper.equals(e,"1");case a.kevoree.modeling.meta.KPrimitiveTypes.STRING_ID:return a.kevoree.modeling.format.json.JsonString.unescape(e);
case a.kevoree.modeling.meta.KPrimitiveTypes.DOUBLE_ID:return a.kevoree.modeling.util.Base64.decodeToDouble(e);case a.kevoree.modeling.meta.KPrimitiveTypes.INT_ID:return a.kevoree.modeling.util.Base64.decodeToInt(e);case a.kevoree.modeling.meta.KPrimitiveTypes.LONG_ID:return a.kevoree.modeling.util.Base64.decodeToLong(e);default:return c=a.kevoree.modeling.util.Base64.decodeToInt(e),k.metaTypes()[g].literal(c)}};m.unserializeReturn=function(k,g,e){return null!=e?a.kevoree.modeling.operation.OperationStrategies.unserialize(k,
g.returnType(),e,g.returnTypeIsArray()):null};m.unserializeParam=function(k,g,e){var c=g.paramTypes();g=g.paramMultiplicities();for(var b=[],d=0;d<c.length;d++)b[d]=a.kevoree.modeling.operation.OperationStrategies.unserialize(k,c[d],e[d],g[d]);return b};m.NAMED_PEER=function(k){return function(g,e,c,b,d,f,h){d=new a.kevoree.modeling.message.impl.Message;d.setType(a.kevoree.modeling.message.impl.Message.OPERATION_CALL_TYPE);d.setKeys(new Float64Array([c.universe(),c.now(),c.uuid()]));d.setClassName(c.metaClass().metaName());
d.setOperationName(e.metaName());d.setValues(a.kevoree.modeling.operation.OperationStrategies.serializeParam(e,b));d.setValues2(h);g.sendToPeer(k,d,function(l){null!=l.values()?f(a.kevoree.modeling.operation.OperationStrategies.unserializeReturn(c.manager().model().metaModel(),e,l.values()[0])):f(a.kevoree.modeling.operation.OperationStrategies.unserializeReturn(c.manager().model().metaModel(),e,null))})}};m.ONLY_ONE=function(k,g,e,c,b,d,f){b=new a.kevoree.modeling.message.impl.Message;b.setType(a.kevoree.modeling.message.impl.Message.OPERATION_CALL_TYPE);
b.setKeys(new Float64Array([e.universe(),e.now(),e.uuid()]));b.setClassName(e.metaClass().metaName());b.setOperationName(g.metaName());b.setValues(a.kevoree.modeling.operation.OperationStrategies.serializeParam(g,c));b.setValues2(f);k.sendToPeer(null,b,function(b){null!=b.values()?d(a.kevoree.modeling.operation.OperationStrategies.unserializeReturn(e.manager().model().metaModel(),g,b.values()[0])):d(a.kevoree.modeling.operation.OperationStrategies.unserializeReturn(e.manager().model().metaModel(),
g,null))})};return m}();z.OperationStrategies=n;(function(m){var k=function(){function g(e){this.staticOperations=new a.kevoree.modeling.memory.chunk.impl.ArrayIntMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR);this._manager=e}g.prototype.register=function(e,c){var b=this.staticOperations.get(e.originMetaClassIndex());null==b&&(b=new a.kevoree.modeling.memory.chunk.impl.ArrayIntMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR),
this.staticOperations.put(e.originMetaClassIndex(),b));b.put(e.index(),c)};g.prototype.invoke=function(a,c,b,d,f){if(null==c)throw Error("Operation must be defined to invoke an operation");var h=c.paramTypes();if(0!=h.length&&h.length!=b.length)throw Error("Bad Number of arguments for method "+c.metaName());var l=this.staticOperations.get(c.originMetaClassIndex()),h=null;null!=l&&(h=l.get(c.index()));if(null!=h)h(a,b,f);else{for(var w=a.metaClass(),g=a.manager().model().metaModel(),C=null,C=new java.util.ArrayList;null==
h&&null!=w&&0<w.metaParents().length;){for(var l=w.metaParents(),w=-1,A=0,k=null,m=null;A<l.length&&-1==w;)k=g.metaClass(l[A]),m=k.operation(c.metaName()),null!=m&&(w=A),A++;-1==w?w=null:(C.add(k.metaName()),w=k,l=this.staticOperations.get(m.originMetaClassIndex()),h=l.get(m.index()))}null!=h?h(a,b,f):(h=C.toArray([]),d(this._manager.cdn(),c,a,b,this,f,h))}};g.prototype.dispatch=function(e){var c=this;if(e.type()==a.kevoree.modeling.message.impl.Message.OPERATION_CALL_TYPE){var b=e.keys(),d=this._manager.model().metaModel().metaClassByName(e.className()),
f=d.operation(e.operationName()),d=this.staticOperations.get(d.index()),h=null;null!=d&&(h=d.get(f.index()));if(null!=h){var l=h;this._manager.lookup(b[0],b[1],b[2],function(b){null!=b?l(b,a.kevoree.modeling.operation.OperationStrategies.unserializeParam(c._manager.model().metaModel(),f,e.values()),function(l){if(null!=e.id()){var b=new a.kevoree.modeling.message.impl.Message;b.setPeer(e.peer());b.setID(e.id());b.setType(a.kevoree.modeling.message.impl.Message.OPERATION_RESULT_TYPE);b.setValues([a.kevoree.modeling.operation.OperationStrategies.serializeReturn(f,
l)]);c._manager.cdn().sendToPeer(e.peer(),b,null)}}):null!=e.id()&&(b=new a.kevoree.modeling.message.impl.Message,b.setID(e.id()),b.setPeer(e.peer()),b.setType(a.kevoree.modeling.message.impl.Message.OPERATION_RESULT_TYPE),b.setValues(null),c._manager.cdn().sendToPeer(e.peer(),b,null))})}else null!=e.id()&&(b=new a.kevoree.modeling.message.impl.Message,b.setID(e.id()),b.setPeer(e.peer()),b.setType(a.kevoree.modeling.message.impl.Message.OPERATION_RESULT_TYPE),b.setValues(null),this._manager.cdn().sendToPeer(e.peer(),
b,null))}};g.prototype.mappings=function(){var a=this,c=new java.util.ArrayList;this.staticOperations.each(function(b,d){if(null!=d){var f=a._manager.model().metaModel().metaClass(b),h=f.metaName();d.each(function(a,b){var d=f.meta(a);c.add(h);c.add(d.metaName())})}});return c.toArray([])};return g}();m.HashOperationManager=k})(z.impl||(z.impl={}))})(D.operation||(D.operation={}));(function(a){(function(a){var m=function(){return function(){this.dispatch=function(a){setTimeout(a,0)};this.start=function(){};
this.stop=function(){};this.run=function(){}}}();a.AsyncScheduler=m;m=function(){function a(){}a.prototype.dispatch=function(a){a()};a.prototype.start=function(){};a.prototype.stop=function(){};return a}();a.DirectScheduler=m})(a.impl||(a.impl={}))})(D.scheduler||(D.scheduler={}));(function(z){(function(n){var m=function(){function k(a){this._terminated=!1;this._initObjs=a}k.prototype.internal_chain_action=function(a){if(this._terminated)throw Error(k.TERMINATED_MESSAGE);null==this._initAction&&(this._initAction=
a);null!=this._lastAction&&this._lastAction.chain(a);this._lastAction=a;return this};k.prototype.traverse=function(g){return this.internal_chain_action(new a.kevoree.modeling.traversal.impl.actions.TraverseAction(g))};k.prototype.traverseQuery=function(g){return this.internal_chain_action(new a.kevoree.modeling.traversal.impl.actions.TraverseQueryAction(g))};k.prototype.withAttribute=function(g,e){return this.internal_chain_action(new a.kevoree.modeling.traversal.impl.actions.FilterAttributeAction(g,
e))};k.prototype.withoutAttribute=function(g,e){return this.internal_chain_action(new a.kevoree.modeling.traversal.impl.actions.FilterNotAttributeAction(g,e))};k.prototype.attributeQuery=function(g){return this.internal_chain_action(new a.kevoree.modeling.traversal.impl.actions.FilterAttributeQueryAction(g))};k.prototype.filter=function(g){return this.internal_chain_action(new a.kevoree.modeling.traversal.impl.actions.FilterAction(g))};k.prototype.collect=function(g,e){return this.internal_chain_action(new a.kevoree.modeling.traversal.impl.actions.DeepCollectAction(g,
e))};k.prototype.traverseIndex=function(g){return this.internal_chain_action(new a.kevoree.modeling.traversal.impl.actions.TraverseIndexAction(g))};k.prototype.traverseTime=function(a,e,c){throw Error("Not Implemented Yet!");};k.prototype.traverseUniverse=function(a,e){throw Error("Not Implemented Yet!");};k.prototype.then=function(g){null!=this._initObjs&&this._initAction.execute(new a.kevoree.modeling.traversal.impl.TraversalContext(this._initObjs,null,function(a){g(a)}))};k.prototype.eval=function(g,
e){this.internal_chain_action(new a.kevoree.modeling.traversal.impl.actions.MathExpressionAction(g));this._terminated=!0;null!=this._initObjs&&this._initAction.execute(new a.kevoree.modeling.traversal.impl.TraversalContext(this._initObjs,null,e))};k.prototype.map=function(g,e){this.internal_chain_action(new a.kevoree.modeling.traversal.impl.actions.MapAction(g));this._terminated=!0;null!=this._initObjs&&this._initAction.execute(new a.kevoree.modeling.traversal.impl.TraversalContext(this._initObjs,
null,e))};k.prototype.exec=function(g,e,c){null==this._initObjs&&this._initAction.execute(new a.kevoree.modeling.traversal.impl.TraversalContext(g,e,c))};k.TERMINATED_MESSAGE="Traversal is terminated by the call of done method, please create another promise";return k}();n.Traversal=m;m=function(){function a(g,e,c){this._inputs=g;this._resolver=e;this._finalCallback=c}a.prototype.inputObjects=function(){return this._inputs};a.prototype.setInputObjects=function(a){this._inputs=a};a.prototype.indexResolver=
function(){return this._resolver};a.prototype.finalCallback=function(){return this._finalCallback};return a}();n.TraversalContext=m;(function(k){var g=function(){function e(a,b){this._finalElements=this._alreadyPassed=null;this._reference=a;this._continueCondition=b}e.prototype.chain=function(a){this._next=a};e.prototype.execute=function(c){var b=this;if(null==c.inputObjects()||0==c.inputObjects().length)null!=this._next?this._next.execute(c):c.finalCallback()(c.inputObjects());else{this._alreadyPassed=
new a.kevoree.modeling.memory.chunk.impl.ArrayLongMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR);this._finalElements=new a.kevoree.modeling.memory.chunk.impl.ArrayLongMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR);for(var d=[],f=0;f<c.inputObjects().length;f++)if(null==this._continueCondition||this._continueCondition(c.inputObjects()[f]))d[f]=c.inputObjects()[f],this._alreadyPassed.put(c.inputObjects()[f].uuid(),
c.inputObjects()[f]);var h=[function(a){for(var d=[],f=0,e=0;e<a.length;e++)null!=b._continueCondition&&!b._continueCondition(a[e])||b._alreadyPassed.contains(a[e].uuid())||(d[e]=a[e],b._alreadyPassed.put(a[e].uuid(),a[e]),b._finalElements.put(a[e].uuid(),a[e]),f++);if(0<f)b.executeStep(d,h[0]);else{var g=[],k=new Int32Array([0]);b._finalElements.each(function(a,l){g[k[0]]=l;k[0]++});null==b._next?c.finalCallback()(g):(c.setInputObjects(g),b._next.execute(c))}}];this.executeStep(d,h[0])}};e.prototype.executeStep=
function(c,b){for(var d=null,f=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap(-1,-1,-1,null),h=0;h<c.length;h++)if(null!=c[h])try{var l=c[h],d=l,e=l._manager.closestChunk(l.universe(),l.now(),l.uuid(),l.metaClass(),l.previousResolved());if(null!=e)if(null==this._reference)for(var g=l.metaClass().metaElements(),C=0;C<g.length;C++){if(null!=g[C]&&g[C].metaType()==a.kevoree.modeling.meta.MetaType.RELATION){var A=e.getLongArray(g[C].index(),l.metaClass());if(null!=A)for(var k=0;k<A.length;k++)f.put(A[k],
A[k])}}else{var m=l.internal_transpose_ref(this._reference);if(null!=m&&(A=e.getLongArray(m.index(),l.metaClass()),null!=A))for(C=0;C<A.length;C++)f.put(A[C],A[C])}}catch(p){if(p instanceof Error)console.error(p.stack);else throw p;}var B=new Float64Array(f.size()),t=new Int32Array([0]);f.each(function(a,l){B[t[0]]=a;t[0]++});d._manager.lookupAllObjects(d.universe(),d.now(),B,function(a){b(a)})};return e}();k.DeepCollectAction=g;g=function(){function a(c){this._filter=c}a.prototype.chain=function(a){this._next=
a};a.prototype.execute=function(a){for(var b=[],d=0,f=0;f<a.inputObjects().length;f++)try{this._filter(a.inputObjects()[f])&&(b[f]=!0,d++)}catch(h){if(h instanceof Error)console.error(h.stack);else throw h;}for(var d=[],l=0,f=0;f<a.inputObjects().length;f++)b[f]&&(d[l]=a.inputObjects()[f],l++);null==this._next?a.finalCallback()(d):(a.setInputObjects(d),this._next.execute(a))};return a}();k.FilterAction=g;g=function(){function e(a,b){this._attribute=a;this._expectedValue=b}e.prototype.chain=function(a){this._next=
a};e.prototype.execute=function(c){if(null==c.inputObjects()||0==c.inputObjects().length)null!=this._next?this._next.execute(c):c.finalCallback()(c.inputObjects());else{for(var b=[],d=0,f=0;f<c.inputObjects().length;f++)try{var h=c.inputObjects()[f],l=h._manager.closestChunk(h.universe(),h.now(),h.uuid(),h.metaClass(),h.previousResolved());if(null!=l)if(null==this._attribute)if(null==this._expectedValue)b[f]=!0,d++;else{for(var e=!1,g=h.metaClass().metaElements(),C=0;C<g.length;C++)if(g[C]instanceof
a.kevoree.modeling.meta.impl.MetaAttribute){var A=l.getPrimitiveType(g[C].index(),h.metaClass());null==A?a.kevoree.modeling.util.PrimitiveHelper.equals(this._expectedValue.toString(),"*")&&(e=!0):a.kevoree.modeling.util.PrimitiveHelper.equals(A.toString(),this._expectedValue.toString())?e=!0:a.kevoree.modeling.util.PrimitiveHelper.matches(A.toString(),this._expectedValue.toString().replace("*",".*"))&&(e=!0)}e&&(b[f]=!0,d++)}else{var k=h.internal_transpose_att(this._attribute);null!=k&&(A=l.getPrimitiveType(k.index(),
h.metaClass()),null==this._expectedValue?null==A&&(b[f]=!0,d++):null==A?a.kevoree.modeling.util.PrimitiveHelper.equals(this._expectedValue.toString(),"*")&&(b[f]=!0,d++):a.kevoree.modeling.util.PrimitiveHelper.equals(A.toString(),this._expectedValue.toString())?(b[f]=!0,d++):a.kevoree.modeling.util.PrimitiveHelper.matches(A.toString(),this._expectedValue.toString().replace("*",".*"))&&(b[f]=!0,d++))}else console.error("WARN: Empty KObject "+h.uuid())}catch(m){if(m instanceof Error)console.error(m.stack);
else throw m;}d=[];for(f=h=0;f<c.inputObjects().length;f++)b[f]&&(d[h]=c.inputObjects()[f],h++);null==this._next?c.finalCallback()(d):(c.setInputObjects(d),this._next.execute(c))}};return e}();k.FilterAttributeAction=g;g=function(){function e(a){this._attributeQuery=a}e.prototype.chain=function(a){this._next=a};e.prototype.execute=function(c){if(null==c.inputObjects()||0==c.inputObjects().length)null!=this._next?this._next.execute(c):c.finalCallback()(c.inputObjects());else{for(var b=[],d=0,f=0;f<
c.inputObjects().length;f++)try{var h=c.inputObjects()[f];if(null==this._attributeQuery)b[f]=!0,d++;else{var l=h.metaClass().metaElements(),e=[!0];this.buildParams(this._attributeQuery).each(function(b,d){for(var f=0;f<l.length;f++)if(l[f]instanceof a.kevoree.modeling.meta.impl.MetaAttribute){var c=l[f];a.kevoree.modeling.util.PrimitiveHelper.matches(c.metaName(),"^"+d.name()+"$")&&(c=h.get(c),null!=c?a.kevoree.modeling.util.PrimitiveHelper.equals(d.value(),"null")?d.isNegative()||(e[0]=!1):a.kevoree.modeling.util.PrimitiveHelper.matches(c.toString(),
"^"+d.value()+"$")?d.isNegative()&&(e[0]=!1):d.isNegative()||(e[0]=!1):(a.kevoree.modeling.util.PrimitiveHelper.equals(d.value(),"null")||a.kevoree.modeling.util.PrimitiveHelper.equals(d.value(),"*"))&&d.isNegative()&&(e[0]=!1))}});e[0]&&(b[f]=!0,d++)}}catch(g){if(g instanceof Error)console.error(g.stack);else throw g;}for(var d=[],C=0,f=0;f<c.inputObjects().length;f++)b[f]&&(d[C]=c.inputObjects()[f],C++);null==this._next?c.finalCallback()(d):(c.setInputObjects(d),this._next.execute(c))}};e.prototype.buildParams=
function(c){for(var b=new a.kevoree.modeling.memory.chunk.impl.ArrayStringMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR),d=0,f=d;d<c.length;){if(","==c.charAt(d)){f=c.substring(f,d).trim();if(!a.kevoree.modeling.util.PrimitiveHelper.equals(f,"")&&!a.kevoree.modeling.util.PrimitiveHelper.equals(f,"*")&&(a.kevoree.modeling.util.PrimitiveHelper.endsWith(f,"\x3d")&&(f+="*"),f=f.split("\x3d"),1<f.length)){var h=f[0].trim(),l=a.kevoree.modeling.util.PrimitiveHelper.endsWith(h,
"!"),f=new a.kevoree.modeling.traversal.impl.actions.FilterAttributeQueryAction.QueryParam(h.replace("!","").replace("*",".*"),f[1].trim().replace("*",".*"),l);b.put(f.name(),f)}f=d+1}d+=1}c=c.substring(f,d).trim();a.kevoree.modeling.util.PrimitiveHelper.equals(c,"")||a.kevoree.modeling.util.PrimitiveHelper.equals(c,"*")||(a.kevoree.modeling.util.PrimitiveHelper.endsWith(c,"\x3d")&&(c+="*"),f=c.split("\x3d"),1<f.length&&(h=f[0].trim(),l=a.kevoree.modeling.util.PrimitiveHelper.endsWith(h,"!"),f=new a.kevoree.modeling.traversal.impl.actions.FilterAttributeQueryAction.QueryParam(h.replace("!",
"").replace("*",".*"),f[1].trim().replace("*",".*"),l),b.put(f.name(),f)));return b};return e}();k.FilterAttributeQueryAction=g;(function(a){var c=function(){function a(b,f,h){this._name=b;this._value=f;this._negative=h}a.prototype.name=function(){return this._name};a.prototype.value=function(){return this._value};a.prototype.isNegative=function(){return this._negative};return a}();a.QueryParam=c})(g=k.FilterAttributeQueryAction||(k.FilterAttributeQueryAction={}));g=function(){function e(a,b){this._attribute=
a;this._expectedValue=b}e.prototype.chain=function(a){this._next=a};e.prototype.execute=function(c){if(null==c.inputObjects()||0==c.inputObjects().length)null!=this._next?this._next.execute(c):c.finalCallback()(c.inputObjects());else{for(var b=[],d=0,f=0;f<c.inputObjects().length;f++)try{var h=c.inputObjects()[f],l=h._manager.closestChunk(h.universe(),h.now(),h.uuid(),h.metaClass(),h.previousResolved());if(null!=l)if(null==this._attribute)if(null==this._expectedValue)b[f]=!0,d++;else{for(var e=!0,
g=h.metaClass().metaElements(),C=0;C<g.length;C++)if(g[C]instanceof a.kevoree.modeling.meta.impl.MetaAttribute){var A=l.getPrimitiveType(g[C].index(),h.metaClass());null==A?a.kevoree.modeling.util.PrimitiveHelper.equals(this._expectedValue.toString(),"*")&&(e=!1):a.kevoree.modeling.util.PrimitiveHelper.equals(A.toString(),this._expectedValue.toString())?e=!1:a.kevoree.modeling.util.PrimitiveHelper.matches(A.toString(),this._expectedValue.toString().replace("*",".*"))&&(e=!1)}e&&(b[f]=!0,d++)}else{var k=
h.internal_transpose_att(this._attribute);null!=k&&(A=l.getPrimitiveType(k.index(),h.metaClass()),null==this._expectedValue?null!=A&&(b[f]=!0,d++):null==A?a.kevoree.modeling.util.PrimitiveHelper.equals(this._expectedValue.toString(),"*")||(b[f]=!0,d++):a.kevoree.modeling.util.PrimitiveHelper.equals(A.toString(),this._expectedValue.toString())||a.kevoree.modeling.util.PrimitiveHelper.matches(A.toString(),this._expectedValue.toString().replace("*",".*"))||(b[f]=!0,d++))}else console.error("WARN: Empty KObject "+
h.uuid())}catch(m){if(m instanceof Error)console.error(m.stack);else throw m;}d=[];for(f=h=0;f<c.inputObjects().length;f++)b[f]&&(d[h]=c.inputObjects()[f],h++);null==this._next?c.finalCallback()(d):(c.setInputObjects(d),this._next.execute(c))}};return e}();k.FilterNotAttributeAction=g;g=function(){function a(c){this._attribute=c}a.prototype.chain=function(a){};a.prototype.execute=function(a){for(var b=[],d=0,f=0;f<a.inputObjects().length;f++)if(null!=a.inputObjects()[f]){var h=a.inputObjects()[f].get(this._attribute);
null!=h&&(b[f]=h,d++)}d=[];for(f=h=0;f<a.inputObjects().length;f++)null!=b[f]&&(d[h]=b[f],h++);null!=a.finalCallback()&&a.finalCallback()(d)};return a}();k.MapAction=g;g=function(){function e(c){this._expression=c;this._engine=new a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine;this._engine.parse(c)}e.prototype.chain=function(a){};e.prototype.execute=function(a){for(var b=[],d=0;d<a.inputObjects().length;d++)null!=a.inputObjects()[d]&&(b[d]=this._engine.eval(a.inputObjects()[d]));
null!=a.finalCallback()&&a.finalCallback()(b)};return e}();k.MathExpressionAction=g;g=function(){function e(){}e.prototype.chain=function(a){this._next=a};e.prototype.execute=function(c){for(var b=new a.kevoree.modeling.memory.chunk.impl.ArrayLongMap(c.inputObjects().length,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR),d=0;d<c.inputObjects().length;d++)b.put(c.inputObjects()[d].uuid(),c.inputObjects()[d]);var f=[],h=new Int32Array([0]);b.each(function(a,b){f[h[0]]=b;h[0]++});null==this._next?c.finalCallback()(f):
(c.setInputObjects(f),this._next.execute(c))};return e}();k.RemoveDuplicateAction=g;g=function(){function e(a){this._reference=a}e.prototype.chain=function(a){this._next=a};e.prototype.execute=function(c){var b=this;if(null==c.inputObjects()||0==c.inputObjects().length)null!=this._next?this._next.execute(c):c.finalCallback()(c.inputObjects());else{for(var d=c.inputObjects()[0],f=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap(-1,-1,-1,null),h=0;h<c.inputObjects().length;h++)try{var l=c.inputObjects()[h],
e=d._manager.closestChunk(l.universe(),l.now(),l.uuid(),l.metaClass(),l.previousResolved());if(null!=e)if(null==this._reference)for(var g=l.metaClass().metaElements(),C=0;C<g.length;C++){if(null!=g[C]&&g[C].metaType()==a.kevoree.modeling.meta.MetaType.RELATION){var A=e.getLongArray(g[C].index(),d.metaClass());if(null!=A)for(var k=0;k<A.length;k++)f.put(A[k],A[k])}}else{var m=l.internal_transpose_ref(this._reference);if(null!=m&&(A=e.getLongArray(m.index(),d.metaClass()),null!=A))for(C=0;C<A.length;C++)f.put(A[C],
A[C])}}catch(p){if(p instanceof Error)console.error(p.stack);else throw p;}var B=new Float64Array(f.size()),t=new Int32Array([0]);f.each(function(a,l){B[t[0]]=a;t[0]++});d._manager.lookupAllObjects(d.universe(),d.now(),B,function(a){null==b._next?c.finalCallback()(a):(c.setInputObjects(a),b._next.execute(c))})}};return e}();k.TraverseAction=g;g=function(){function e(a){this._indexName=a}e.prototype.chain=function(a){this._next=a};e.prototype.execute=function(c){var b=this;if(a.kevoree.modeling.util.PrimitiveHelper.equals(this._indexName,
"root"))0<c.inputObjects().length&&c.inputObjects()[0].manager().getRoot(c.inputObjects()[0].universe(),c.inputObjects()[0].now(),function(a){var d=[];d[0]=a;null==b._next?c.finalCallback()(d):(c.setInputObjects(d),b._next.execute(c))});else{var d=c.indexResolver();null!=d?(d=d(this._indexName),null!=d?null==this._next?c.finalCallback()(d):(c.setInputObjects(d),this._next.execute(c)):(c.setInputObjects([]),this._next.execute(c))):null==this._next?c.finalCallback()(c.inputObjects()):this._next.execute(c)}};
return e}();k.TraverseIndexAction=g;g=function(){function e(a){this.SEP=",";this._referenceQuery=a}e.prototype.chain=function(a){this._next=a};e.prototype.execute=function(c){var b=this;if(null==c.inputObjects()||0==c.inputObjects().length)null!=this._next?this._next.execute(c):c.finalCallback()(c.inputObjects());else{for(var d=c.inputObjects()[0],f=new a.kevoree.modeling.memory.chunk.impl.ArrayLongLongMap(-1,-1,-1,null),h=0;h<c.inputObjects().length;h++)try{var l=c.inputObjects()[h],e=l._manager.closestChunk(l.universe(),
l.now(),l.uuid(),l.metaClass(),l.previousResolved()),g=l.metaClass().metaElements();if(null!=e)if(null==this._referenceQuery)for(var C=0;C<g.length;C++){if(null!=g[C]&&g[C].metaType()==a.kevoree.modeling.meta.MetaType.RELATION){var A=e.getLongArray(g[C].index(),l.metaClass());if(null!=A)for(var k=0;k<A.length;k++){var m=A[k];f.put(m,m)}}}else{for(var p=this._referenceQuery.split(this.SEP),k=0;k<p.length;k++)p[k]=p[k].replace("*",".*");for(var B=0;B<g.length;B++)if(null!=g[B]&&g[B].metaType()==a.kevoree.modeling.meta.MetaType.RELATION){for(var t=
g[B],u=!1,k=0;k<p.length;k++)if(null!=p[k]&&a.kevoree.modeling.util.PrimitiveHelper.startsWith(p[k].trim(),"\x3c\x3c")){if(a.kevoree.modeling.util.PrimitiveHelper.matches(t.oppositeName(),p[k].trim().substring(2))){u=!0;break}}else if(a.kevoree.modeling.util.PrimitiveHelper.matches(t.metaName(),"^"+p[k]+"$")){u=!0;break}if(u&&(A=e.getLongArray(g[B].index(),l.metaClass()),null!=A))for(C=0;C<A.length;C++)f.put(A[C],A[C])}}}catch(r){if(r instanceof Error)console.error(r.stack);else throw r;}var v=new Float64Array(f.size()),
q=new Int32Array([0]);f.each(function(a,l){v[q[0]]=a;q[0]++});d._manager.lookupAllObjects(d.universe(),d.now(),v,function(a){null==b._next?c.finalCallback()(a):(c.setInputObjects(a),b._next.execute(c))})}};return e}();k.TraverseQueryAction=g;g=function(){function a(c,b,d){this._timeOffset=c;this._steps=b;this._continueContition=d}a.prototype.chain=function(a){this._next=a};a.prototype.execute=function(a){throw Error("Not implemented Yet!");};return a}();k.TraverseTimeAction=g})(n.actions||(n.actions=
{}))})(z.impl||(z.impl={}));(function(n){(function(m){var k=function(){function g(){}g.getINSTANCE=function(){null==g.INSTANCE&&(g.INSTANCE=new a.kevoree.modeling.traversal.query.impl.QueryEngine);return g.INSTANCE};g.prototype.eval=function(a,c,b){null!=b&&this.buildTraversal(a).exec(c,null,b)};g.prototype.buildTraversal=function(e){if(null==e||0==e.length)return null;for(var c=new a.kevoree.modeling.traversal.impl.Traversal(null),b=0,d=!1,f=0,h=-1,l=-1,w=0,F=!1;b<e.length&&!F;){var C=b+1!=e.length;
if(d&&C)d=!1;else{var A=e.charAt(b);if(A==g.CLOSE_BRACKET&&C)l=b;else if("\\"==A&&C)d=!0;else if(A==g.OPEN_BRACKET&&C)h=b,w=b+1;else if(A==g.PIPE_SEP||!C){var k=null;-1==h?h=C?b:b+1:-1!=w&&(-1==l&&(l=C||A==g.PIPE_SEP||A==g.CLOSE_BRACKET?b:b+1),k=e.substring(w,l),0==k.length&&(k=null));f=e.substring(f,h).trim();a.kevoree.modeling.util.PrimitiveHelper.startsWith(f,"@")?c=c.traverseIndex(f.substring(1)):a.kevoree.modeling.util.PrimitiveHelper.startsWith(f,"\x3d")?(c.eval(f.substring(1),null),F=!0):(a.kevoree.modeling.util.PrimitiveHelper.startsWith(f,
"\x3e\x3e")?c=c.traverseQuery(f.substring(2)):(a.kevoree.modeling.util.PrimitiveHelper.startsWith(f,"\x3c\x3c"),c=c.traverseQuery(f)),null!=k&&(c=c.attributeQuery(k)));f=b+1;w=l=h=-1}}b+=1}return c};g.INSTANCE=null;g.OPEN_BRACKET="[";g.CLOSE_BRACKET="]";g.PIPE_SEP="|";return g}();m.QueryEngine=k})(n.impl||(n.impl={}))})(z.query||(z.query={}));(function(a){var m=function(){function a(){}a.prototype.equals=function(a){return this==a};a.values=function(){return a._KVisitResultVALUES};a.CONTINUE=new a;
a.SKIP=new a;a.STOP=new a;a._KVisitResultVALUES=[a.CONTINUE,a.SKIP,a.STOP];return a}();a.KVisitResult=m})(z.visitor||(z.visitor={}))})(D.traversal||(D.traversal={}));(function(z){var n=function(){function a(){}a.encodeLong=function(k){var g="",e=k;0>k&&(e=-e);for(var c=47;5<=c;c-=6)if(""!==g||0!=(e/a.powTwo[c]&63))g+=a.encodeArray[e/a.powTwo[c]&63];return g+=a.encodeArray[2*(e&31)+(0>k?1:0)]};a.encodeLongToBuffer=function(k,g){var e=!0,c=k;0>k&&(c=-c);for(var b=47;5<=b;b-=6)e&&0==(c/a.powTwo[b]&63)||
(e=!1,g.append(a.encodeArray[c/a.powTwo[b]&63]));g.append(a.encodeArray[2*(c&31)+(0>k?1:0)])};a.encodeInt=function(k){var g="",e=k;0>k&&(e=-e);for(var c=29;5<=c;c-=6)if(""!==g||0!=(e/a.powTwo[c]&63))g+=a.encodeArray[e/a.powTwo[c]&63];return g+=a.encodeArray[2*(e&31)+(0>k?1:0)]};a.encodeIntToBuffer=function(k,g){var e=!0,c=k;0>k&&(c=-c);for(var b=29;5<=b;b-=6)e&&0==(c/a.powTwo[b]&63)||(e=!1,g.append(a.encodeArray[c/a.powTwo[b]&63]));g.append(a.encodeArray[2*(c&31)+(0>k?1:0)])};a.decodeToLong=function(k){return a.decodeToLongWithBounds(k,
0,k.length)};a.decodeToLongWithBounds=function(k,g,e){var c;c=0+(a.decodeArray[k.charAt(e-1)]&255)/2;for(var b=1;b<e-g;b++)c+=(a.decodeArray[k.charAt(e-1-b)]&255)*a.powTwo[6*b-1];0!=(a.decodeArray[k.charAt(e-1)]&1)&&(c=-c);return c};a.decodeToInt=function(k){return a.decodeToIntWithBounds(k,0,k.length)};a.decodeToIntWithBounds=function(k,g,e){var c;c=0+(a.decodeArray[k.charAt(e-1)]&255)/2;for(var b=1;b<e-g;b++)c+=(a.decodeArray[k.charAt(e-1-b)]&255)*a.powTwo[6*b-1];0!=(a.decodeArray[k.charAt(e-1)]&
1)&&(c=-c);return c};a.encodeDouble=function(k){var g="",e=new Float64Array(1),c=new Uint8Array(e.buffer);e[0]=k;k=2048*(c[7]/128&1)+((16*(c[7]&127)|c[6]/16)-1023+1023);g+=a.encodeArray[k/64&63];g+=a.encodeArray[k&63];g+=a.encodeArray[c[6]&15];g+=a.encodeArray[c[5]/4&63];g+=a.encodeArray[16*(c[5]&3)|c[4]/16];g+=a.encodeArray[4*(c[4]&15)|c[3]/64];g+=a.encodeArray[c[3]&63];g+=a.encodeArray[c[2]/4&63];g+=a.encodeArray[16*(c[2]&3)|c[1]/16];g+=a.encodeArray[4*(c[1]&15)|c[0]/64];g+=a.encodeArray[c[0]&63];
for(c=g.length-1;3<=c&&"A"==g.charAt(c);)c--;return g.substr(0,c+1)};a.encodeDoubleToBuffer=function(k,g){var e="",c=new Float64Array(1),b=new Uint8Array(c.buffer);c[0]=k;c=2048*(b[7]/128&1)+((16*(b[7]&127)|b[6]/16)-1023+1023);e+=a.encodeArray[c/64&63];e+=a.encodeArray[c&63];e+=a.encodeArray[b[6]&15];e+=a.encodeArray[b[5]/4&63];e+=a.encodeArray[16*(b[5]&3)|b[4]/16];e+=a.encodeArray[4*(b[4]&15)|b[3]/64];e+=a.encodeArray[b[3]&63];e+=a.encodeArray[b[2]/4&63];e+=a.encodeArray[16*(b[2]&3)|b[1]/16];e+=
a.encodeArray[4*(b[1]&15)|b[0]/64];e+=a.encodeArray[b[0]&63];for(b=e.length-1;3<=b&&"A"==e.charAt(b);)b--;g.append(e.substr(0,b+1))};a.decodeToDouble=function(k){return a.decodeToDoubleWithBounds(k,0,k.length)};a.decodeToDoubleWithBounds=function(k,g,e){for(var c=64*(a.decodeArray[k.charAt(g)]&255)+(a.decodeArray[k.charAt(g+1)]&255),b=0!=(c&2048)?-1:1,c=c&2047,d=0,f=2;f<e-g;f++)d+=(a.decodeArray[k.charAt(g+f)]&255)*a.powTwo[48-6*(f-2)];return 0!=c?b*Math.pow(2,c-1023)*(1+d/Math.pow(2,52)):b*Math.pow(2,
-1022)*(0+d/Math.pow(2,52))};a.encodeBoolArray=function(k){for(var g="",e=0,c=0;c<k.length;c++)if(e|=(k[c]?1:0)*a.powTwo[c%6],5==c%6||c==k.length-1)g+=a.encodeArray[e],e=0;return g};a.encodeBoolArrayToBuffer=function(k,g){for(var e=0,c=0;c<k.length;c++)if(e|=(k[c]?1:0)*a.powTwo[c%6],5==c%6||c==k.length-1)g.append(a.encodeArray[e]),e=0};a.decodeBoolArray=function(k,g){return a.decodeToBoolArrayWithBounds(k,0,k.length,g)};a.decodeToBoolArrayWithBounds=function(k,g,e,c){for(var b=[],d=0;d<e-g;d++)for(var f=
a.decodeArray[k.charAt(g+d)]&255,h=0;6>h;h++)if(6*d+h<c)b[6*d+h]=0!=(f&1*a.powTwo[h]);else break;return b};a.encodeString=function(k){for(var g="",e=k.length,c,b=0,d=6,f=0;f<e;f++)c=k.charCodeAt(f),6==d?(g+=a.encodeArray[c/4&63],b=16*(c&3),d=4):4==d?(g+=a.encodeArray[(b|c/16&15)&63],b=4*(c&15),d=2):2==d&&(g+=a.encodeArray[(b|c/64&3)&63],g+=a.encodeArray[c&63],d=6);6!=d&&(g+=a.encodeArray[b]);return g};a.encodeStringToBuffer=function(k,g){for(var e=k.length,c,b=0,d=6,f=0;f<e;f++)c=k.charCodeAt(f),
6==d?(g.append(a.encodeArray[c/4&63]),b=16*(c&3),d=4):4==d?(g.append(a.encodeArray[(b|c/16&15)&63]),b=4*(c&15),d=2):2==d&&(g.append(a.encodeArray[(b|c/64&3)&63]),g.append(a.encodeArray[c&63]),d=6);6!=d&&g.append(a.encodeArray[b])};a.decodeString=function(k){return a.decodeToStringWithBounds(k,0,k.length)};a.decodeToStringWithBounds=function(k,g,e){for(var c="",b=0,d=8,f=g;f<e;f++)g=a.decodeArray[k.charAt(f)],8==d?(b=4*g,d=2):2==d?(c+=String.fromCharCode(b|g/16),b=16*(g&15),d=4):4==d?(c+=String.fromCharCode(b|
g/4),b=64*(g&3),d=6):6==d&&(c+=String.fromCharCode(b|g),d=8);return c};a.encodeArray="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");a.decodeArray={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63};a.powTwo=
{0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128,8:256,9:512,10:1024,11:2048,12:4096,13:8192,14:16384,15:32768,16:65536,17:131072,18:262144,19:524288,20:1048576,21:2097152,22:4194304,23:8388608,24:16777216,25:33554432,26:67108864,27:134217728,28:268435456,29:536870912,30:1073741824,31:2147483648,32:4294967296,33:8589934592,34:17179869184,35:34359738368,36:68719476736,37:137438953472,38:274877906944,39:549755813888,40:1099511627776,41:2199023255552,42:4398046511104,43:8796093022208,44:17592186044416,45:35184372088832,
46:70368744177664,47:0x800000000000,48:281474976710656,49:562949953421312,50:0x4000000000000,51:0x8000000000000,52:4503599627370496,53:9007199254740992};return a}();z.Base64=n;n=function(){function a(){}a.isDefined=function(a){return void 0!=a&&null!=a};return a}();z.Checker=n;n=function(){function a(){}a.startsWith=function(a,g){return a.slice(0,g.length)==g};a.endsWith=function(a,g){return a.slice(-g.length)==g};a.matches=function(a,g){if(null==g)return!1;var e=a.match(g);return null!=e&&0<e.length};
a.equals=function(a,g){return a===g};a.parseInt=function(a){return parseInt(a)};a.parseLong=function(a){return+a};a.parseDouble=function(a){return parseFloat(a)};a.parseShort=function(a){return+a};a.parseBoolean=function(a){return"true"===a};a.SHORT_MIN_VALUE=function(){return-32768};a.SHORT_MAX_VALUE=function(){return 32767};a.isNaN=function(a){return isNaN(a)};a.DOUBLE_MIN_VALUE=function(){return Number.MIN_VALUE};a.DOUBLE_MAX_VALUE=function(){return Number.MAX_VALUE};return a}();z.PrimitiveHelper=
n;(function(m){var k=function(){function a(){}a.pearson=function(a,c){for(var b=0,d=0,f=0;f<a.length;f++)b+=a[f],d+=c[f];for(var b=b/a.length,d=d/a.length,h=0,l=0,w=0,f=0;f<a.length;f++)h+=(a[f]-b)*(c[f]-d),l+=(a[f]-b)*(a[f]-b),w+=(c[f]-d)*(c[f]-d);return h/(Math.sqrt(l)*Math.sqrt(w))};return a}();m.Correlations=k;k=function(){function a(){}a.inverseNormalCDF=function(a){var c=new Float64Array([1.570796288,.03706987906,-8.364353589E-4,-2.250947176E-4,6.841218299E-6,5.824238515E-6,-1.04527497E-6,8.360937017E-8,
-3.231081277E-9,3.657763036E-11,6.936233982E-13]);if(0>a||1<a||.5==a)return 0;var b=a;.5<a&&(b=1-a);for(var d=-Math.log(4*b*(1-b)),b=c[0],f=1;11>f;f++)b+=c[f]*Math.pow(d,f);return.5<a?Math.sqrt(b*d):-Math.sqrt(b*d)};a.gaussian=function(a,c,b){for(var d=a.length,f=1,h=0;h<d;h++)f=f*(1/Math.sqrt(2*Math.PI*b[h]))*Math.exp(-((a[h]-c[h])*(a[h]-c[h]))/(2*b[h]));return f};a.gaussianArray=function(a,c,b,d){for(var f=a.columns(),h=1,l=0;l<f;l++)h=h*(1/Math.sqrt(2*Math.PI*d[l]))*Math.exp(-((a.get(c,l)-b[l])*
(a.get(c,l)-b[l]))/(2*d[l]));return h};a.parallelGaussian=function(a,c,b){for(var d=a.length,f=new Float64Array(d),h=0;h<d;h++)f[h]=1/Math.sqrt(2*Math.PI*b[h])*Math.exp(-((a[h]-c[h])*(a[h]-c[h]))/(2*b[h]));return f};a.gaussianOneFeature=function(a,c,b){return 1/Math.sqrt(2*Math.PI*b)*Math.exp(-((a-c)*(a-c))/(2*b))};return a}();m.Distribution=k;k=function(){function g(e){this.coef=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(e+1,1);this.A=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(1,
e+1);this.y=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(1,1);this.solver=new a.kevoree.modeling.util.maths.matrix.solvers.AdjLinearSolverQr}g.prototype.getCoef=function(){return this.coef.data};g.prototype.fit=function(a,c){this.y.reshapeBoolean(c.length,1,!1);java.lang.System.arraycopy(c,0,this.y.data,0,c.length);this.A.reshapeBoolean(this.y.numRows,this.coef.numRows,!1);for(var b=0;b<c.length;b++)for(var d=1,f=0;f<this.coef.numRows;f++)this.A.cset(b,f,d),d*=a[b];this.solver.setA(this.A);
this.solver.solve(this.y,this.coef)};g.extrapolate=function(a,c){for(var b=0,d=1,f=0;f<c.length;f++)b+=c[f]*d,d*=a;return b};return g}();m.PolynomialFit=k;k=function(){function g(){}g.wilsonRank=function(e,c,b){c=e+c;if(0==c)return 0;b=a.kevoree.modeling.util.maths.Distribution.inverseNormalCDF(1-b/2);e=1*e/c;return(e+b*b/(2*c)-b*Math.sqrt((e*(1-e)+b*b/(4*c))/c))/(1+b*b/c)};return g}();m.Ranking=k;k=function(){function a(){}a.calcHistogram=function(a,c,b){c=new Int32Array(b);var d,f;f=a[0];d=a[0];
for(var h=0;h<a.length;h++)a[h]<f&&(f=a[h]),a[h]>d&&(d=a[h]);b=(d-f)/b;for(h=0;h<a.length;h++)c[(a[h]-f)/b]++};return a}();m.Statistic=k;k=function(){function a(){}a.levenshtein=function(a,c){for(var b=a.length+1,d=c.length+1,f=new Int32Array(b),h=new Int32Array(b),l=0;l<b;l++)f[l]=l;for(var w=1;w<d;w++){h[0]=w;for(l=1;l<b;l++){var g=a.charAt(l-1)==c.charAt(w-1)?0:1,g=f[l-1]+g;h[l]=Math.min(Math.min(f[l]+1,h[l-1]+1),g)}l=f;f=h;h=l}return f[b-1]};return a}();m.StringDistance=k;(function(g){(function(e){var c=
function(){function a(b){this._content=b}a.prototype.type=function(){return 2};a.prototype.content=function(){return this._content};a.prototype.type2=function(){return 0};return a}();e.MathDoubleToken=c;c=function(){function b(){this.operators=new a.kevoree.modeling.memory.chunk.impl.ArrayStringMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR);this.operators.put("+",new a.kevoree.modeling.util.maths.expression.impl.MathOperation("+",20,!0));this.operators.put("-",
new a.kevoree.modeling.util.maths.expression.impl.MathOperation("-",20,!0));this.operators.put("*",new a.kevoree.modeling.util.maths.expression.impl.MathOperation("*",30,!0));this.operators.put("/",new a.kevoree.modeling.util.maths.expression.impl.MathOperation("/",30,!0));this.operators.put("%",new a.kevoree.modeling.util.maths.expression.impl.MathOperation("%",30,!0));this.operators.put("^",new a.kevoree.modeling.util.maths.expression.impl.MathOperation("^",40,!1));this.operators.put("\x26\x26",
new a.kevoree.modeling.util.maths.expression.impl.MathOperation("\x26\x26",4,!1));this.operators.put("||",new a.kevoree.modeling.util.maths.expression.impl.MathOperation("||",2,!1));this.operators.put("\x3e",new a.kevoree.modeling.util.maths.expression.impl.MathOperation("\x3e",10,!1));this.operators.put("\x3e\x3d",new a.kevoree.modeling.util.maths.expression.impl.MathOperation("\x3e\x3d",10,!1));this.operators.put("\x3c",new a.kevoree.modeling.util.maths.expression.impl.MathOperation("\x3c",10,!1));
this.operators.put("\x3c\x3d",new a.kevoree.modeling.util.maths.expression.impl.MathOperation("\x3c\x3d",10,!1));this.operators.put("\x3d\x3d",new a.kevoree.modeling.util.maths.expression.impl.MathOperation("\x3d\x3d",7,!1));this.operators.put("!\x3d",new a.kevoree.modeling.util.maths.expression.impl.MathOperation("!\x3d",7,!1));this.functions=new a.kevoree.modeling.memory.chunk.impl.ArrayStringMap(a.kevoree.modeling.KConfig.CACHE_INIT_SIZE,a.kevoree.modeling.KConfig.CACHE_LOAD_FACTOR);this.functions.put("NOT",
new a.kevoree.modeling.util.maths.expression.impl.MathFunction("NOT",1));this.functions.put("IF",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("IF",3));this.functions.put("RAND",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("RAND",0));this.functions.put("SIN",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("SIN",1));this.functions.put("COS",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("COS",1));this.functions.put("TAN",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("TAN",
1));this.functions.put("ASIN",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("ASIN",1));this.functions.put("ACOS",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("ACOS",1));this.functions.put("ATAN",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("ATAN",1));this.functions.put("MAX",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("MAX",2));this.functions.put("MIN",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("MIN",2));this.functions.put("ABS",
new a.kevoree.modeling.util.maths.expression.impl.MathFunction("ABS",1));this.functions.put("LOG",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("LOG",1));this.functions.put("ROUND",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("ROUND",2));this.functions.put("FLOOR",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("FLOOR",1));this.functions.put("CEILING",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("CEILING",1));this.functions.put("SQRT",
new a.kevoree.modeling.util.maths.expression.impl.MathFunction("SQRT",1));this.functions.put("SECONDS",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("SECONDS",1));this.functions.put("MINUTES",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("MINUTES",1));this.functions.put("HOURS",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("HOURS",1));this.functions.put("DAY",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("DAY",1));this.functions.put("MONTH",
new a.kevoree.modeling.util.maths.expression.impl.MathFunction("MONTH",1));this.functions.put("YEAR",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("YEAR",1));this.functions.put("DAYOFWEEK",new a.kevoree.modeling.util.maths.expression.impl.MathFunction("DAYOFWEEK",1))}b.getINSTANCE=function(){null==b.INSTANCE&&(b.INSTANCE=new a.kevoree.modeling.util.maths.expression.impl.MathEntities);return b.INSTANCE};b.INSTANCE=null;return b}();e.MathEntities=c;c=function(){function b(){this._cacheAST=
null;var a=new java.util.HashMap;a.put("PI",Math.PI);a.put("TRUE",1);a.put("FALSE",0);this.varResolver=function(b){return a.get(b)}}b.isNumber=function(a){return!isNaN(+a)};b.isDigit=function(a){a=a.charCodeAt(0);return 48<=a&&57>=a?!0:!1};b.isLetter=function(a){a=a.charCodeAt(0);return 65<=a&&90>=a||97<=a&&122>=a?!0:!1};b.isWhitespace=function(a){a=a.charCodeAt(0);return 9<=a&&13>=a||32==a||133==a||160==a?!0:!1};b.prototype.shuntingYard=function(b){var f=new java.util.ArrayList,h=new java.util.Stack;
b=new a.kevoree.modeling.util.maths.expression.impl.MathExpressionTokenizer(b);for(var l=null,c=null;b.hasNext();){var e=b.next();if(a.kevoree.modeling.util.maths.expression.impl.MathEntities.getINSTANCE().functions.contains(e.toUpperCase()))h.push(e),l=e;else if(a.kevoree.modeling.util.PrimitiveHelper.equals(",",e)){for(;!h.isEmpty()&&!a.kevoree.modeling.util.PrimitiveHelper.equals("(",h.peek());)f.add(h.pop());if(h.isEmpty())throw Error("Parse error for function '"+l+"'");}else if(a.kevoree.modeling.util.maths.expression.impl.MathEntities.getINSTANCE().operators.contains(e)){for(var c=
a.kevoree.modeling.util.maths.expression.impl.MathEntities.getINSTANCE().operators.get(e),g=h.isEmpty()?null:h.peek();a.kevoree.modeling.util.maths.expression.impl.MathEntities.getINSTANCE().operators.contains(g)&&(c.isLeftAssoc()&&c.getPrecedence()<=a.kevoree.modeling.util.maths.expression.impl.MathEntities.getINSTANCE().operators.get(g).getPrecedence()||c.getPrecedence()<a.kevoree.modeling.util.maths.expression.impl.MathEntities.getINSTANCE().operators.get(g).getPrecedence());)f.add(h.pop()),g=
h.isEmpty()?null:h.peek();h.push(e)}else if(a.kevoree.modeling.util.PrimitiveHelper.equals("(",e)){if(null!=c&&a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.isNumber(c))throw Error("Missing operator at character position "+b.getPos());h.push(e)}else if(a.kevoree.modeling.util.PrimitiveHelper.equals(")",e)){for(;!h.isEmpty()&&!a.kevoree.modeling.util.PrimitiveHelper.equals("(",h.peek());)f.add(h.pop());if(h.isEmpty())throw Error("Mismatched parentheses");h.pop();!h.isEmpty()&&
a.kevoree.modeling.util.maths.expression.impl.MathEntities.getINSTANCE().functions.contains(h.peek().toUpperCase())&&f.add(h.pop())}else f.add(e);c=e}for(;!h.isEmpty();){b=h.pop();if(a.kevoree.modeling.util.PrimitiveHelper.equals("(",b)||a.kevoree.modeling.util.PrimitiveHelper.equals(")",b))throw Error("Mismatched parentheses");f.add(b)}return f};b.prototype.eval=function(b){if(null==this._cacheAST)throw Error("Call parse before");for(var f=new java.util.Stack,h=0;h<this._cacheAST.length;h++){var l=
this._cacheAST[h];switch(l.type()){case 0:var c=f.pop(),e=f.pop();f.push(l.eval(e,c));break;case 1:c=new Float64Array(l.getNumParams());for(e=l.getNumParams()-1;0<=e;e--)c[e]=f.pop();f.push(l.eval(c));break;case 2:f.push(l.content());break;case 3:if(c=l,null!=this.varResolver(c.content()))f.push(this.varResolver(c.content()));else if(null!=b)if(a.kevoree.modeling.util.PrimitiveHelper.equals("TIME",c.content()))f.push(b.now());else if(l=b.getByName(c.content()),null!=l)if(l instanceof a.kevoree.modeling.meta.impl.MetaLiteral)f.push(l.index());
else if(c=l.toString(),a.kevoree.modeling.util.PrimitiveHelper.equals(c,"true"))f.push(1);else if(a.kevoree.modeling.util.PrimitiveHelper.equals(c,"false"))f.push(0);else try{f.push(a.kevoree.modeling.util.PrimitiveHelper.parseDouble(l.toString()))}catch(g){if(!(g instanceof Error))throw g;}else throw Error("Unknow variable for name "+c.content());else throw Error("Unknow variable for name "+c.content());}}b=f.pop();return null==b?0:b};b.prototype.buildAST=function(b){for(var f=[],h=0;h<b.size();h++){var l=
b.get(h);if(a.kevoree.modeling.util.maths.expression.impl.MathEntities.getINSTANCE().operators.contains(l))f[h]=a.kevoree.modeling.util.maths.expression.impl.MathEntities.getINSTANCE().operators.get(l);else if(a.kevoree.modeling.util.maths.expression.impl.MathEntities.getINSTANCE().functions.contains(l.toUpperCase()))f[h]=a.kevoree.modeling.util.maths.expression.impl.MathEntities.getINSTANCE().functions.get(l.toUpperCase());else if(0<l.length&&a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.isLetter(l.charAt(0)))f[h]=
new a.kevoree.modeling.util.maths.expression.impl.MathFreeToken(l);else try{var c=a.kevoree.modeling.util.PrimitiveHelper.parseDouble(l);f[h]=new a.kevoree.modeling.util.maths.expression.impl.MathDoubleToken(c)}catch(e){if(e instanceof Error)f[h]=new a.kevoree.modeling.util.maths.expression.impl.MathFreeToken(l);else throw e;}}return f};b.prototype.parse=function(a){a=this.shuntingYard(a);this._cacheAST=this.buildAST(a);return this};b.prototype.setVarResolver=function(a){this.varResolver=a};b.decimalSeparator=
".";b.minusSign="-";return b}();e.MathExpressionEngine=c;c=function(){function b(a){this.pos=0;this.input=a.trim()}b.prototype.hasNext=function(){return this.pos<this.input.length};b.prototype.peekNextChar=function(){return this.pos<this.input.length-1?this.input.charAt(this.pos+1):"\x00"};b.prototype.next=function(){var b=new java.lang.StringBuilder;if(this.pos>=this.input.length)return this.previousToken=null;for(var f=this.input.charAt(this.pos);a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.isWhitespace(f)&&
this.pos<this.input.length;)f=this.input.charAt(++this.pos);if(a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.isDigit(f))for(;(a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.isDigit(f)||f==a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.decimalSeparator)&&this.pos<this.input.length;)b.append(this.input.charAt(this.pos++)),f=this.pos==this.input.length?"\x00":this.input.charAt(this.pos);else if(f==a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.minusSign&&
a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.isDigit(this.peekNextChar())&&(a.kevoree.modeling.util.PrimitiveHelper.equals("(",this.previousToken)||a.kevoree.modeling.util.PrimitiveHelper.equals(",",this.previousToken)||null==this.previousToken||a.kevoree.modeling.util.maths.expression.impl.MathEntities.getINSTANCE().operators.contains(this.previousToken)))b.append(a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.minusSign),this.pos++,b.append(this.next());
else if(a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.isLetter(f)||"_"==f)for(;(a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.isLetter(f)||a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.isDigit(f)||"_"==f)&&this.pos<this.input.length;)b.append(this.input.charAt(this.pos++)),f=this.pos==this.input.length?"\x00":this.input.charAt(this.pos);else if("("==f||")"==f||","==f)b.append(f),this.pos++;else{for(;!a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.isLetter(f)&&
!a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.isDigit(f)&&"_"!=f&&!a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.isWhitespace(f)&&"("!=f&&")"!=f&&","!=f&&this.pos<this.input.length&&(b.append(this.input.charAt(this.pos)),this.pos++,f=this.pos==this.input.length?"\x00":this.input.charAt(this.pos),f!=a.kevoree.modeling.util.maths.expression.impl.MathExpressionEngine.minusSign););if(!a.kevoree.modeling.util.maths.expression.impl.MathEntities.getINSTANCE().operators.contains(b.toString()))throw Error("Unknown operator '"+
b+"' at position "+(this.pos-b.length+1));}return this.previousToken=b.toString()};b.prototype.getPos=function(){return this.pos};return b}();e.MathExpressionTokenizer=c;c=function(){function a(b){this._content=b}a.prototype.content=function(){return this._content};a.prototype.type=function(){return 3};a.prototype.type2=function(){return 0};return a}();e.MathFreeToken=c;c=function(){function b(a,b){this.name=a.toUpperCase();this.numParams=b}b.prototype.getName=function(){return this.name};b.prototype.getNumParams=
function(){return this.numParams};b.prototype.eval=function(b){if(a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"NOT"))return 0==b[0]?1:0;if(a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"IF"))return 0!=b[0]?b[1]:b[2];if(a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"RAND"))return Math.random();if(a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"SIN"))return Math.sin(b[0]);if(a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"COS"))return Math.cos(b[0]);
if(a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"TAN"))return Math.tan(b[0]);if(a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"ASIN"))return Math.asin(b[0]);if(a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"ACOS"))return Math.acos(b[0]);if(a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"ATAN"))return Math.atan(b[0]);if(a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"MAX"))return b[0]>b[1]?b[0]:b[1];if(a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,
"MIN"))return b[0]<b[1]?b[0]:b[1];if(a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"ABS"))return Math.abs(b[0]);if(a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"LOG"))return Math.log(b[0]);if(a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"ROUND")){var f=Math.pow(10,b[1]);return Math.round(b[0]*f)/f}return a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"FLOOR")?Math.floor(b[0]):a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"CEILING")?Math.ceil(b[0]):
a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"SQRT")?Math.sqrt(b[0]):a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"SECONDS")?this.date_to_seconds(b[0]):a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"MINUTES")?this.date_to_minutes(b[0]):a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"HOURS")?this.date_to_hours(b[0]):a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"DAY")?this.date_to_days(b[0]):a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,
"MONTH")?this.date_to_months(b[0]):a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"YEAR")?this.date_to_year(b[0]):a.kevoree.modeling.util.PrimitiveHelper.equals(this.name,"DAYOFWEEK")?this.date_to_dayofweek(b[0]):0};b.prototype.date_to_seconds=function(a){return(new Date(a)).getSeconds()};b.prototype.date_to_minutes=function(a){return(new Date(a)).getMinutes()};b.prototype.date_to_hours=function(a){return(new Date(a)).getHours()};b.prototype.date_to_days=function(a){return(new Date(a)).getDate()};
b.prototype.date_to_months=function(a){return(new Date(a)).getMonth()};b.prototype.date_to_year=function(a){return(new Date(a)).getFullYear()};b.prototype.date_to_dayofweek=function(a){return(new Date(a)).getDay()};b.prototype.type=function(){return 1};b.prototype.type2=function(){return 0};return b}();e.MathFunction=c;c=function(){function b(a,b,h){this.oper=a;this.precedence=b;this.leftAssoc=h}b.prototype.getOper=function(){return this.oper};b.prototype.getPrecedence=function(){return this.precedence};
b.prototype.isLeftAssoc=function(){return this.leftAssoc};b.prototype.eval=function(b,f){return a.kevoree.modeling.util.PrimitiveHelper.equals(this.oper,"+")?b+f:a.kevoree.modeling.util.PrimitiveHelper.equals(this.oper,"-")?b-f:a.kevoree.modeling.util.PrimitiveHelper.equals(this.oper,"*")?b*f:a.kevoree.modeling.util.PrimitiveHelper.equals(this.oper,"/")?b/f:a.kevoree.modeling.util.PrimitiveHelper.equals(this.oper,"%")?b%f:a.kevoree.modeling.util.PrimitiveHelper.equals(this.oper,"^")?Math.pow(b,f):
a.kevoree.modeling.util.PrimitiveHelper.equals(this.oper,"\x26\x26")?0!=b&&0!=f?1:0:a.kevoree.modeling.util.PrimitiveHelper.equals(this.oper,"||")?0!=b||0!=f?1:0:a.kevoree.modeling.util.PrimitiveHelper.equals(this.oper,"\x3e")?b>f?1:0:a.kevoree.modeling.util.PrimitiveHelper.equals(this.oper,"\x3e\x3d")?b>=f?1:0:a.kevoree.modeling.util.PrimitiveHelper.equals(this.oper,"\x3c")?b<f?1:0:a.kevoree.modeling.util.PrimitiveHelper.equals(this.oper,"\x3c\x3d")?b<=f?1:0:a.kevoree.modeling.util.PrimitiveHelper.equals(this.oper,
"\x3d\x3d")?b==f?1:0:a.kevoree.modeling.util.PrimitiveHelper.equals(this.oper,"!\x3d")?b!=f?1:0:0};b.prototype.type=function(){return 0};b.prototype.type2=function(){return 0};return b}();e.MathOperation=c})(g.impl||(g.impl={}))})(m.expression||(m.expression={}));(function(g){var e=function(){function c(){}c.mult=function(b,d,f){1==d.numCols?a.kevoree.modeling.util.maths.matrix.MatrixVectorMult.mult(b,d,f):d.numCols>=c.MULT_COLUMN_SWITCH?a.kevoree.modeling.util.maths.matrix.MatrixMatrixMult.mult_reorder(b,
d,f):a.kevoree.modeling.util.maths.matrix.MatrixMatrixMult.mult_small(b,d,f)};c.memset=function(a,d){for(var f=0;f<a.length;f++)a[f]=d};c.multAddalpha=function(b,d,f,h){f.numCols>=c.MULT_COLUMN_SWITCH?a.kevoree.modeling.util.maths.matrix.MatrixMatrixMult.multAdd_reorderalpha(b,d,f,h):a.kevoree.modeling.util.maths.matrix.MatrixMatrixMult.multAdd_smallalpha(b,d,f,h)};c.multAlphaBetaTransA=function(b,d,f,h,l){h.scale(l);d.numCols>=c.MULT_COLUMN_SWITCH||f.numCols>=c.MULT_COLUMN_SWITCH?a.kevoree.modeling.util.maths.matrix.MatrixMatrixMult.multAlphaTransA_reorder(b,
d,f,h):a.kevoree.modeling.util.maths.matrix.MatrixMatrixMult.multAlphaTransA_small(b,d,f,h)};c.multTransA=function(b,d,f){1==d.numCols?b.numCols>=c.MULT_COLUMN_SWITCH?a.kevoree.modeling.util.maths.matrix.MatrixVectorMult.multTransA_reorder(b,d,f):a.kevoree.modeling.util.maths.matrix.MatrixVectorMult.multTransA_small(b,d,f):b.numCols>=c.MULT_COLUMN_SWITCH||d.numCols>=c.MULT_COLUMN_SWITCH?a.kevoree.modeling.util.maths.matrix.MatrixMatrixMult.multTransA_reorder(b,d,f):a.kevoree.modeling.util.maths.matrix.MatrixMatrixMult.multTransA_small(b,
d,f)};c.multTransB=function(b,d,f){1==d.numRows?a.kevoree.modeling.util.maths.matrix.MatrixVectorMult.mult(b,d,f):a.kevoree.modeling.util.maths.matrix.MatrixMatrixMult.multTransB(b,d,f)};c.subvector=function(a,d,f,h,l,c,e){if(l)for(l=0;l<h;l++)e.setValueAtIndex(c+l,a.get(d,f+l));else for(l=0;l<h;l++)e.setValueAtIndex(c+l,a.get(d+l,f))};c.abs=function(a){for(var d=0;d<a.numRows();d++)for(var f=0;f<a.numCols();f++)a.setValue2D(d,f,Math.abs(a.getValue2D(d,f)));return a};c.trace=function(a){for(var d=
Math.min(a.numRows,a.numCols),f=0,h=0,l=0;l<d;l++)f+=a.getValueAtIndex(h),h+=1+a.numCols;return f};c.transposeMatrix=function(b,d){if(null==d)d=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b.numCols,b.numRows);else if(b.numRows!=d.numCols||b.numCols!=d.numRows)throw Error("Incompatible matrix dimensions");b.numRows>c.TRANSPOSE_SWITCH&&b.numCols>c.TRANSPOSE_SWITCH?a.kevoree.modeling.util.maths.matrix.TransposeAlgs.block(b,d,c.BLOCK_WIDTH):a.kevoree.modeling.util.maths.matrix.TransposeAlgs.standard(b,
d);return d};c.transpose=function(b){if(b.numCols==b.numRows)a.kevoree.modeling.util.maths.matrix.TransposeAlgs.square(b);else{var d=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b.numCols,b.numRows);a.kevoree.modeling.util.maths.matrix.CommonOps.transposeMatrix(b,d);b.setMatrix(d)}};c.det=function(b){var d=b.getNumCols(),f=b.getNumRows();if(d!=f)throw Error("Must be a square matrix.");if(1>=d)return b.getValueAtIndex(0);d=new a.kevoree.modeling.util.maths.matrix.solvers.LUDecompositionAlt_D64;
return d.decompose(b)?d.computeDeterminant():0};c.invert=function(b,d){var f=new a.kevoree.modeling.util.maths.matrix.solvers.LUDecompositionAlt_D64,f=new a.kevoree.modeling.util.maths.matrix.solvers.LinearSolverLu_D64(f);f.modifiesA()&&(b=b.copy());if(!f.setA(b))return!1;f.invert(d);return!0};c.copyMatrix=function(a,d){for(var f=0;f<a.rows();f++)for(var h=0;h<a.columns();h++)d.setValue2D(f,h,a.get(f,h))};c.copyMatrixDense=function(a,d){for(var f=0;f<a.rows();f++)for(var h=0;h<a.columns();h++)d.set(f,
h,a.get(f,h))};c.extractImpl=function(a,d,f,h,l,c,e,g){for(var A=0;A<e;A++){var k=a.getIndex(A+d,f),H=h.getIndex(A+l,c);java.lang.System.arraycopy(a.data,k,h.data,H,g)}};c.extractInsert=function(b,d,f,h,l,c,e,g){a.kevoree.modeling.util.maths.matrix.CommonOps.extractImpl(b,d,h,c,e,g,f-d,l-h)};c.insert=function(b,d,f,h){a.kevoree.modeling.util.maths.matrix.CommonOps.extractInsert(b,0,b.getNumRows(),0,b.getNumCols(),d,f,h)};c.extract4Int=function(b,d,f,h,l){if(f<=d||0>d||f>b.numRows)throw Error("srcY1 \x3c\x3d srcY0 || srcY0 \x3c 0 || srcY1 \x3e src.getNumRows");
if(l<=h||0>h||l>b.numCols)throw Error("srcX1 \x3c\x3d srcX0 || srcX0 \x3c 0 || srcX1 \x3e src.getNumCols");l-=h;f-=d;var c=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(f,l);a.kevoree.modeling.util.maths.matrix.CommonOps.extractImpl(b,d,h,c,0,0,f,l);return c};c.columnsToVector=function(b,d){var f;f=null==d||d.length<b.numCols?[]:d;for(var h=0;h<f.length;h++){null==f[h]?f[h]=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b.numRows,1):f[h].reshapeBoolean(b.numRows,1,!1);for(var l=
f[h],c=0;c<b.numRows;c++)l.set(c,0,b.get(c,h))}return f};c.rowsToVector=function(b,d){var f;f=null==d||d.length<b.numRows?[]:d;for(var h=0;h<f.length;h++){null==f[h]?f[h]=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b.numCols,1):f[h].reshapeBoolean(b.numCols,1,!1);for(var l=f[h],c=0;c<b.numCols;c++)l.set(c,0,b.get(h,c))}return f};c.setIdentity=function(a){var d=a.numRows<a.numCols?a.numRows:a.numCols;java.util.Arrays.fill(a.data,0,a.getNumElements(),0);for(var f=0,h=0;h<d;h++)a.data[f]=
1,f+=a.numCols+1};c.identity1D=function(b){for(var d=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b,b),f=0;f<b;f++)d.set(f,f,1);return d};c.identity=function(b,d){for(var f=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b,d),h=b<d?b:d,l=0;l<h;l++)f.set(l,l,1);return f};c.diag=function(b){return a.kevoree.modeling.util.maths.matrix.CommonOps.diagMatrix(null,b.length,b)};c.diagMatrix=function(b,d,f){null==b?b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(d,d):a.kevoree.modeling.util.maths.matrix.CommonOps.fill(b,
0);for(var h=0;h<d;h++)b.set(h,h,f[h]);return b};c.kron=function(a,d,f){for(var h=0;h<a.numRows;h++)for(var l=0;l<a.numCols;l++)for(var c=a.get(h,l),e=0;e<d.numRows;e++)for(var g=0;g<d.numCols;g++){var A=c*d.get(e,g);f.set(h*d.numRows+e,l*d.numCols+g,A)}};c.extractDiag=function(b,d){var f=Math.min(b.numRows,b.numCols);if(!a.kevoree.modeling.util.maths.matrix.MatrixFeatures.isVector(d))throw Error("Expected a vector for dst.");for(var h=0;h<f;h++)d.setValueAtIndex(h,b.get(h,h))};c.extractRow=function(b,
d,f){null==f&&(f=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(1,b.numCols));java.lang.System.arraycopy(b.data,b.getIndex(d,0),f.data,0,b.numCols);return f};c.extractColumn=function(b,d,f){null==f&&(f=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b.numRows,1));for(var h=0;h<b.numRows;h++)f.data[h]=b.data[d],d+=b.numCols;return f};c.elementMax=function(a){for(var d=a.getNumElements(),f=a.getValueAtIndex(0),h=1;h<d;h++){var l=a.getValueAtIndex(h);l>=f&&(f=l)}return f};c.elementMaxAbs=
function(a){for(var d=a.getNumElements(),f=0,h=0;h<d;h++){var l=Math.abs(a.getValueAtIndex(h));l>f&&(f=l)}return f};c.elementMult=function(a,d,f){for(var h=a.getNumElements(),l=0;l<h;l++)f.setValueAtIndex(l,a.getValueAtIndex(l)*d.getValueAtIndex(l))};c.elementSum=function(a){for(var d=0,f=a.getNumElements(),h=0;h<f;h++)d+=a.getValueAtIndex(h);return d};c.addEquals=function(a,d){for(var f=a.getNumElements(),h=0;h<f;h++)a.plus(h,d.getValueAtIndex(h))};c.addEqualsbeta=function(a,d,f){for(var h=a.getNumElements(),
l=0;l<h;l++)a.plus(l,d*f.getValueAtIndex(l))};c.add=function(a,d,f){for(var h=a.getNumElements(),l=0;l<h;l++)f.setValueAtIndex(l,a.getValueAtIndex(l)+d.getValueAtIndex(l))};c.subtract3mat=function(a,d,f){for(var h=a.getNumElements(),l=0;l<h;l++)f.data[l]=a.data[l]-d.data[l]};c.scale=function(a,d){for(var f=d.getNumElements(),h=0;h<f;h++)d.data[h]*=a};c.changeSign=function(a){for(var d=a.getNumElements(),f=0;f<d;f++)a.data[f]=-a.data[f]};c.fill=function(a,d){java.util.Arrays.fill(a.data,0,a.getNumElements(),
d)};c.normalizeF=function(b){var d=a.kevoree.modeling.util.maths.matrix.CommonOps.normF(b);if(0!=d)for(var f=b.getNumElements(),h=0;h<f;h++)b.div(h,d)};c.normF=function(b){var d=0,f=a.kevoree.modeling.util.maths.matrix.CommonOps.elementMaxAbs(b);if(0==f)return 0;for(var h=b.getNumElements(),l=0;l<h;l++)var c=b.getValueAtIndex(l)/f,d=d+c*c;return f*Math.sqrt(d)};c.extract6M=function(b,d,f,h,l,c,e,g){a.kevoree.modeling.util.maths.matrix.CommonOps.extractImpl(b,d,h,c,e,g,f-d,l-h)};c.multAlphaBeta=function(b,
d,f,h,l){h.scale(l);a.kevoree.modeling.util.maths.matrix.CommonOps.multAddalpha(b,d,f,h)};c.BLOCK_WIDTH=60;c.TRANSPOSE_SWITCH=375;c.MULT_COLUMN_SWITCH=15;c.EPS=Math.pow(2,-52);return c}();g.CommonOps=e;e=function(){function c(){}c.prototype.getReal=function(){return this.real};c.prototype.getMagnitude=function(){return Math.sqrt(this.real*this.real+this.imaginary*this.imaginary)};c.prototype.getMagnitude2=function(){return this.real*this.real+this.imaginary*this.imaginary};c.prototype.setReal=function(a){this.real=
a};c.prototype.setValues=function(a,d){this.real=a;this.imaginary=d};c.prototype.isReal=function(){return 0==this.imaginary};c.prototype.toString=function(){return 0==this.imaginary?""+this.real:this.real+" "+this.imaginary+"i"};c.prototype.times=function(b){var d=new a.kevoree.modeling.util.maths.matrix.Complex64F;a.kevoree.modeling.util.maths.matrix.ComplexMath64F.multiply(this,b,d);return d};return c}();g.Complex64F=e;e=function(){function a(){}a.conj=function(a,d){d.real=a.real;d.imaginary=-a.imaginary};
a.plus=function(a,d,f){f.real=a.real+d.real;f.imaginary=a.imaginary+d.imaginary};a.minus=function(a,d,f){f.real=a.real-d.real;f.imaginary=a.imaginary-d.imaginary};a.multiply=function(a,d,f){f.real=a.real*d.real-a.imaginary*d.imaginary;f.imaginary=a.real*d.imaginary+a.imaginary*d.real};a.divide=function(a,d,f){var h=d.getMagnitude2();f.real=(a.real*d.real+a.imaginary*d.imaginary)/h;f.imaginary=(a.imaginary*d.real-a.real*d.imaginary)/h};a.root=function(a,d,f,h){var l=a.getMagnitude();a=Math.atan2(a.imaginary,
a.real);l=Math.pow(l,1/d);a=(a+2*f*Math.PI)/d;h.real=l*Math.cos(a);h.imaginary=l*Math.sin(a)};a.sqrt=function(a,d){var f=a.getMagnitude(),h=a.real;d.real=Math.sqrt((f+h)/2);d.imaginary=Math.sqrt((f-h)/2);0>a.imaginary&&(d.imaginary=-d.imaginary)};return a}();g.ComplexMath64F=e;e=function(){function c(a,d){this.data=new Float64Array(a*d);this.numRows=a;this.numCols=d;for(var f=0;f<d*a;f++)this.data[f]=0}c.prototype.constructorDenseMatrix=function(b){var d=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b.numRows,
b.numCols);java.lang.System.arraycopy(b.data,0,d.data,0,b.getNumElements());return d};c.setIdentity=function(a){var d=a.numRows<a.numCols?a.numRows:a.numCols;java.util.Arrays.fill(a.data,0,a.getNumElements(),0);for(var f=0,h=0;h<d;h++)a.data[f]=1,f+=a.numCols+1};c.widentity=function(b){for(var d=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b,b),f=0;f<b;f++)d.cset(f,f,1);return d};c.identity=function(b,d){for(var f=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b,d),h=b<d?b:d,l=
0;l<h;l++)f.cset(l,l,1);return f};c.prototype.zero=function(){java.util.Arrays.fill(this.data,0,this.getNumElements(),0)};c.prototype.copy=function(){return this.constructorDenseMatrix(this)};c.fill=function(a,d){java.util.Arrays.fill(a.data,0,a.getNumElements(),d)};c.prototype.reshapeBoolean=function(a,d,f){if(this.data.length<a*d){var h=new Float64Array(a*d);f&&java.lang.System.arraycopy(this.data,0,h,0,this.getNumElements());this.data=h}this.numRows=a;this.numCols=d};c.prototype.cset=function(a,
d,f){this.data[a*this.numCols+d]=f};c.prototype.add=function(a,d,f){this.data[a*this.numCols+d]+=f};c.prototype.plus=function(a,d){return this.data[a]+=d};c.prototype.scale=function(a){for(var d=0;d<this.data.length;d++)this.data[d]*=a;return this};c.prototype.minus=function(a,d){return this.data[a]-=d};c.prototype.times=function(a,d){return this.data[a]*=d};c.prototype.div=function(a,d){return this.data[a]/=d};c.prototype.reshape=function(a,d){this.reshapeBoolean(a,d,!1)};c.prototype.getNumRows=
function(){return this.numRows};c.prototype.getNumCols=function(){return this.numCols};c.prototype.getData=function(){return this.data};c.prototype.get=function(a,d){return this.data[a*this.numCols+d]};c.prototype.getNumElements=function(){return this.numRows*this.numCols};c.prototype.getIndex=function(a,d){return a*this.numCols+d};c.prototype.getValueAtIndex=function(a){return this.data[a]};c.prototype.setValueAtIndex=function(a,d){return this.data[a]=d};c.prototype.setNumRows=function(a){this.numRows=
a};c.prototype.setNumCols=function(a){this.numCols=a};c.prototype.setData=function(a){this.data=a};c.prototype.setMatrix=function(a){this.reshape(a.numRows,a.numCols);var d=a.getNumElements();java.lang.System.arraycopy(a.data,0,this.data,0,d)};c.prototype.set=function(a,d,f){this.data[a*this.numCols+d]=f};c.MULT_COLUMN_SWITCH=15;return c}();g.DenseMatrix64F=e;e=function(){function c(){}c.isVector=function(a){return 1==a.getNumCols()||1==a.getNumRows()};c.isSymmetricDouble=function(b,d){if(b.numCols!=
b.numRows)return!1;for(var f=a.kevoree.modeling.util.maths.matrix.CommonOps.elementMaxAbs(b),h=0;h<b.numRows;h++)for(var l=0;l<h;l++){var c=b.get(h,l)/f,e=b.get(l,h)/f;if(!(Math.abs(c-e)<=d))return!1}return!0};c.isIdentical=function(a,d,f){if(a.numRows!=d.numRows||a.numCols!=d.numCols)return!1;if(0>f)throw Error("Tolerance must be greater than or equal to zero.");for(var h=a.getNumElements(),l=0;l<h;l++){var c=a.getValueAtIndex(l),e=d.getValueAtIndex(l),c=Math.abs(c-e);if(!(f>=c))return!1}return!0};
return c}();g.MatrixFeatures=e;e=function(){function c(){}c.multTransA_smallMV=function(a,d,f){for(var h=0,l=0;l<a.numCols;l++){for(var c=0,e=l,g=0;g<a.numRows;g++)c+=a.getValueAtIndex(e)*d.getValueAtIndex(g),e+=a.numCols;f.setValueAtIndex(h++,c)}};c.multTransA_reorderMV=function(b,d,f){if(0==b.numRows)a.kevoree.modeling.util.maths.matrix.DenseMatrix64F.fill(f,0);else{for(var h=d.getValueAtIndex(0),l=0;l<b.numCols;l++)f.setValueAtIndex(l,b.getValueAtIndex(l)*h);for(var c=b.numCols,l=1;l<b.numRows;l++)for(var h=
d.getValueAtIndex(l),e=0;e<b.numCols;e++)f.plus(e,b.getValueAtIndex(c++)*h)}};c.multTransA_reorderMM=function(b,d,f){if(0==b.numCols||0==b.numRows)a.kevoree.modeling.util.maths.matrix.DenseMatrix64F.fill(f,0);else for(var h,l=0;l<b.numCols;l++){var c=l*f.numCols;h=b.getValueAtIndex(l);for(var e=0,g=e+d.numCols,A=c;e<g;)f.setValueAtIndex(A++,h*d.getValueAtIndex(e++));for(var k=1;k<b.numRows;k++)for(h=b.get(k,l),g=e+d.numCols,A=c;e<g;)f.plus(A++,h*d.getValueAtIndex(e++))}};c.multTransA_smallMM=function(a,
d,f){for(var h=0,l=0;l<a.numCols;l++)for(var c=0;c<d.numCols;c++){for(var e=l,g=c,A=g+d.numRows*d.numCols,k=0;g<A;g+=d.numCols)k+=a.getValueAtIndex(e)*d.getValueAtIndex(g),e+=a.numCols;f.setValueAtIndex(h++,k)}};c.multTransA=function(b,d,f){1==d.numCols?b.numCols>=a.kevoree.modeling.util.maths.matrix.DenseMatrix64F.MULT_COLUMN_SWITCH?a.kevoree.modeling.util.maths.matrix.MatrixMatrixMult.multTransA_reorderMV(b,d,f):a.kevoree.modeling.util.maths.matrix.MatrixMatrixMult.multTransA_smallMV(b,d,f):b.numCols>=
a.kevoree.modeling.util.maths.matrix.DenseMatrix64F.MULT_COLUMN_SWITCH||d.numCols>=a.kevoree.modeling.util.maths.matrix.DenseMatrix64F.MULT_COLUMN_SWITCH?a.kevoree.modeling.util.maths.matrix.MatrixMatrixMult.multTransA_reorderMM(b,d,f):a.kevoree.modeling.util.maths.matrix.MatrixMatrixMult.multTransA_smallMM(b,d,f)};c.mult_reorder=function(b,d,f){if(0==b.numCols||0==b.numRows)a.kevoree.modeling.util.maths.matrix.CommonOps.fill(f,0);else for(var h,l=0,c=d.numRows*d.numCols,e=0;e<b.numRows;e++){var g=
e*b.numCols,A=0,k=l,H=A+d.numCols;for(h=b.getValueAtIndex(g++);A<H;)f.setValueAtIndex(k++,h*d.getValueAtIndex(A++));for(;A!=c;)for(k=l,H=A+d.numCols,h=b.getValueAtIndex(g++);A<H;)f.plus(k++,h*d.getValueAtIndex(A++));l+=f.numCols}};c.mult_small=function(a,d,f){for(var h=0,l=0,c=0;c<a.numRows;c++){for(var e=0;e<d.numCols;e++){for(var g=0,A=h,k=e,H=A+d.numRows;A<H;)g+=a.getValueAtIndex(A++)*d.getValueAtIndex(k),k+=d.numCols;f.setValueAtIndex(l++,g)}h+=a.numCols}};c.multTransA_reorder=function(b,d,f){if(0==
b.numCols||0==b.numRows)a.kevoree.modeling.util.maths.matrix.CommonOps.fill(f,0);else for(var h,l=0;l<b.numCols;l++){var c=l*f.numCols;h=b.getValueAtIndex(l);for(var e=0,g=e+d.numCols,A=c;e<g;)f.setValueAtIndex(A++,h*d.getValueAtIndex(e++));for(var k=1;k<b.numRows;k++)for(h=b.get(k,l),g=e+d.numCols,A=c;e<g;)f.plus(A++,h*d.getValueAtIndex(e++))}};c.multTransA_small=function(a,d,f){for(var h=0,l=0;l<a.numCols;l++)for(var c=0;c<d.numCols;c++){for(var e=l,g=c,A=g+d.numRows*d.numCols,k=0;g<A;g+=d.numCols)k+=
a.getValueAtIndex(e)*d.getValueAtIndex(g),e+=a.numCols;f.setValueAtIndex(h++,k)}};c.multTransB=function(a,d,f){for(var h=0,l=0,c=0;c<a.numRows;c++){for(var e=l+d.numCols,g=0,A=0;A<d.numRows;A++){for(var k=l,H=0;k<e;)H+=a.getValueAtIndex(k++)*d.getValueAtIndex(g++);f.setValueAtIndex(h++,H)}l+=a.numCols}};c.multAlphaTransA_reorder=function(b,d,f,h){if(0==d.numCols||0==d.numRows)a.kevoree.modeling.util.maths.matrix.CommonOps.fill(h,0);else for(var l,c=0;c<d.numCols;c++){var e=c*h.numCols;l=b*d.getValueAtIndex(c);
for(var g=0,A=g+f.numCols,k=e;g<A;)h.plus(k++,l*f.getValueAtIndex(g++));for(var H=1;H<d.numRows;H++)for(l=b*d.get(H,c),A=g+f.numCols,k=e;g<A;)h.plus(k++,l*f.getValueAtIndex(g++))}};c.multAlphaTransA_small=function(a,d,f,h){for(var l=0,c=0;c<d.numCols;c++)for(var e=0;e<f.numCols;e++){for(var g=c,A=e,k=A+f.numRows*f.numCols,H=0;A<k;A+=f.numCols)H+=d.getValueAtIndex(g)*f.getValueAtIndex(A),g+=d.numCols;h.plus(l++,a*H)}};c.multAdd_reorderalpha=function(a,d,f,h){if(0!=d.numCols&&0!=d.numRows)for(var l,
c=0,e=f.numRows*f.numCols,g=0;g<d.numRows;g++){var A=g*d.numCols,k=0,H=c,p=k+f.numCols;for(l=a*d.getValueAtIndex(A++);k<p;)h.plus(H++,l*f.getValueAtIndex(k++));for(;k!=e;)for(H=c,p=k+f.numCols,l=a*d.getValueAtIndex(A++);k<p;)h.plus(H++,l*f.getValueAtIndex(k++));c+=h.numCols}};c.multAdd_smallalpha=function(a,d,f,h){for(var l=0,c=0,e=0;e<d.numRows;e++){for(var g=0;g<f.numCols;g++){for(var A=0,k=l,H=g,p=k+f.numRows;k<p;)A+=d.getValueAtIndex(k++)*f.getValueAtIndex(H),H+=f.numCols;h.plus(c++,a*A)}l+=d.numCols}};
return c}();g.MatrixMatrixMult=e;e=function(){function c(){}c.mult=function(b,d,f){if(0==b.numCols)a.kevoree.modeling.util.maths.matrix.CommonOps.fill(f,0);else for(var h=0,l=0,c=d.getValueAtIndex(0),e=0;e<b.numRows;e++){for(var g=b.getValueAtIndex(h++)*c,A=1;A<b.numCols;A++)g+=b.getValueAtIndex(h++)*d.getValueAtIndex(A);f.setValueAtIndex(l++,g)}};c.multTransA_small=function(a,d,f){for(var h=0,l=0;l<a.numCols;l++){for(var c=0,e=l,g=0;g<a.numRows;g++)c+=a.getValueAtIndex(e)*d.getValueAtIndex(g),e+=
a.numCols;f.setValueAtIndex(h++,c)}};c.multTransA_reorder=function(b,d,f){if(0==b.numRows)a.kevoree.modeling.util.maths.matrix.CommonOps.fill(f,0);else{for(var h=d.getValueAtIndex(0),l=0;l<b.numCols;l++)f.setValueAtIndex(l,b.getValueAtIndex(l)*h);for(var c=b.numCols,l=1;l<b.numRows;l++)for(var h=d.getValueAtIndex(l),e=0;e<b.numCols;e++)f.plus(e,b.getValueAtIndex(c++)*h)}};return c}();g.MatrixVectorMult=e;e=function(){function c(b,d){this.mat=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b,
d)}c.prototype.getMatrix=function(){return this.mat};c.prototype.setValue2D=function(a,d,f){this.mat.set(a,d,f)};c.prototype.setValue1D=function(a,d){this.mat.setValueAtIndex(a,d)};c.prototype.getValue2D=function(a,d){return this.mat.get(a,d)};c.prototype.getValue1D=function(a){return this.mat.data[a]};c.prototype.getIndex=function(a,d){return a*this.mat.numCols+d};c.prototype.mult=function(b){var d=this.createMatrix(this.mat.numRows,b.getMatrix().numCols);a.kevoree.modeling.util.maths.matrix.CommonOps.mult(this.mat,
b.getMatrix(),d.getMatrix());return d};c.prototype.scale=function(b){var d=this.copy();a.kevoree.modeling.util.maths.matrix.CommonOps.scale(b,d.getMatrix());return d};c.prototype.plus=function(b){var d=this.copy();a.kevoree.modeling.util.maths.matrix.CommonOps.addEquals(d.getMatrix(),b.getMatrix());return d};c.prototype.copy=function(){var a=this.createMatrix(this.mat.numRows,this.mat.numCols);a.getMatrix().setMatrix(this.getMatrix());return a};c.prototype.numRows=function(){return this.mat.numRows};
c.prototype.numCols=function(){return this.mat.numCols};c.prototype.getNumElements=function(){return this.mat.getNumElements()};c.prototype.extractDiag=function(){var b=Math.min(this.mat.numCols,this.mat.numRows),b=this.createMatrix(b,1);a.kevoree.modeling.util.maths.matrix.CommonOps.extractDiag(this.mat,b.getMatrix());return b};c.prototype.isIdentical=function(b,d){return a.kevoree.modeling.util.maths.matrix.MatrixFeatures.isIdentical(this.mat,b.getMatrix(),d)};c.prototype.trace=function(){return a.kevoree.modeling.util.maths.matrix.CommonOps.trace(this.mat)};
c.prototype.elementMaxAbs=function(){return a.kevoree.modeling.util.maths.matrix.CommonOps.elementMaxAbs(this.mat)};c.prototype.elementSum=function(){return a.kevoree.modeling.util.maths.matrix.CommonOps.elementSum(this.mat)};c.prototype.elementMult=function(b){var d=this.createMatrix(this.mat.numRows,this.mat.numCols);a.kevoree.modeling.util.maths.matrix.CommonOps.elementMult(this.mat,b.getMatrix(),d.getMatrix());return d};c.prototype.isInBounds=function(a,d){return 0<=a&&0<=d&&a<this.mat.numRows&&
d<this.mat.numCols};c.prototype.printDimensions=function(){console.log("[rows \x3d "+this.numRows()+" , cols \x3d "+this.numCols()+" ]")};c.prototype.transpose=function(){var b=this.createMatrix(this.mat.numCols,this.mat.numRows);a.kevoree.modeling.util.maths.matrix.CommonOps.transposeMatrix(this.mat,b.getMatrix());return b};c.wrap=function(b){var d=new a.kevoree.modeling.util.maths.matrix.SimpleMatrix(b.numRows,b.numCols);d.mat=b;return d};c.identity=function(b){b=new a.kevoree.modeling.util.maths.matrix.SimpleMatrix(b,
b);a.kevoree.modeling.util.maths.matrix.CommonOps.setIdentity(b.mat);return b};c.prototype.minus=function(b){var d=this.copy();a.kevoree.modeling.util.maths.matrix.CommonOps.subtract3mat(this.getMatrix(),b.getMatrix(),d.getMatrix());return d};c.prototype.invert=function(){var b=this.createMatrix(this.mat.numRows,this.mat.numCols);a.kevoree.modeling.util.maths.matrix.CommonOps.invert(this.mat,b.getMatrix());return b};c.prototype.determinant=function(){return a.kevoree.modeling.util.maths.matrix.CommonOps.det(this.mat)};
c.prototype.createMatrix=function(b,d){return new a.kevoree.modeling.util.maths.matrix.SimpleMatrix(b,d)};c.prototype.extractVector=function(b,d){var f=b?this.mat.numCols:this.mat.numRows,h=b?this.createMatrix(1,f):this.createMatrix(f,1);b?a.kevoree.modeling.util.maths.matrix.CommonOps.subvector(this.mat,d,0,f,!0,0,h.getMatrix()):a.kevoree.modeling.util.maths.matrix.CommonOps.subvector(this.mat,0,d,f,!1,0,h.getMatrix());return h};c.prototype.eig=function(){return new a.kevoree.modeling.util.maths.matrix.solvers.SimpleEVD(this.mat)};
c.prototype.svd=function(b){return new a.kevoree.modeling.util.maths.matrix.solvers.SimpleSVD(this.mat,b)};c.prototype.combine=function(a,d,f){var h=a+f.numRows(),l=d+f.numCols();h>this.mat.numRows||l>this.mat.numCols?(h=Math.max(h,this.mat.numRows),l=Math.max(l,this.mat.numCols),l=this.createMatrix(h,l),l.insertIntoThis(0,0,this)):l=this.copy();l.insertIntoThis(a,d,f);return l};c.prototype.insertIntoThis=function(b,d,f){a.kevoree.modeling.util.maths.matrix.CommonOps.insert(f.getMatrix(),this.mat,
b,d)};return c}();g.SimpleMatrix=e;e=function(){function a(){}a.square=function(a){for(var d=1,f=a.numCols,h=0;h<a.numRows;h++){for(var l=(h+1)*a.numCols+h;d<f;d++){var c=a.data[d];a.data[d]=a.data[l];a.data[l]=c;l+=a.numCols}d+=h+2;f+=a.numCols}};a.block=function(a,d,f){for(var h=0;h<a.numRows;h+=f)for(var l=Math.min(f,a.numRows-h),c=h*a.numCols,e=h,g=0;g<a.numCols;g+=f)for(var A=Math.min(f,a.numCols-g),A=c+A;c<A;c++){for(var k=c,H=e,p=H+l;H<p;k+=a.numCols)d.data[H++]=a.data[k];e+=d.numCols}};a.standard=
function(a,d){for(var f=0,h=0;h<d.numRows;h++)for(var l=h,c=f+d.numCols;f<c;)d.data[f++]=a.data[l],l+=a.numCols};return a}();g.TransposeAlgs=e;(function(c){var b=function(){function b(){this.maxCols=this.maxRows=-1;this.decomposer=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QRDecompositionHouseholderColumn_D64}b.prototype.setA=function(a){(a.numRows>this.maxRows||a.numCols>this.maxCols)&&this.setMaxSize(a.numRows,a.numCols);this.numRows=a.numRows;this.numCols=a.numCols;if(!this.decomposer.decompose(a))return!1;
this.Q.reshapeBoolean(this.numRows,this.numRows,!1);this.R.reshapeBoolean(this.numRows,this.numCols,!1);this.decomposer.getQ(this.Q,!1);this.decomposer.getR(this.R,!1);return!0};b.prototype.solveU=function(a,b,l){for(var d=l-1;0<=d;d--){for(var c=b[d],e=d*l+d+1,g=d+1;g<l;g++)c-=a[e++]*b[g];b[d]=c/a[d*l+d]}};b.prototype.solve=function(b,d){var l=b.numCols;this.Y.reshapeBoolean(this.numRows,1,!1);this.Z.reshapeBoolean(this.numRows,1,!1);for(var c=0;c<l;c++){for(var e=0;e<this.numRows;e++)this.Y.data[e]=
b.get(e,c);a.kevoree.modeling.util.maths.matrix.MatrixMatrixMult.multTransA(this.Q,this.Y,this.Z);this.solveU(this.R.data,this.Z.data,this.numCols);for(e=0;e<this.numCols;e++)d.cset(e,c,this.Z.data[e])}};b.prototype.setMaxSize=function(b,d){this.maxRows=b+=5;this.maxCols=d;this.Q=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b,b);this.R=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b,d);this.Y=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b,1);this.Z=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b,
1)};return b}();c.AdjLinearSolverQr=b;b=function(){function b(){this.maxWidth=-1}b.prototype.setExpectedMaxSize=function(b,d){this.LU=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b,d);this.dataLU=this.LU.data;this.maxWidth=Math.max(b,d);this.vv=new Float64Array(this.maxWidth);this.indx=new Int32Array(this.maxWidth);this.pivot=new Int32Array(this.maxWidth);for(var l=0;l<this.maxWidth;l++)this.vv[l]=0,this.indx[l]=0,this.pivot[l]=0};b.prototype.getLU=function(){return this.LU};b.prototype.getIndx=
function(){return this.indx};b.prototype.getPivot=function(){return this.pivot};b.prototype.getLower=function(b){var d=this.LU.numRows,l=this.LU.numRows<this.LU.numCols?this.LU.numRows:this.LU.numCols;null==b?b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(d,l):a.kevoree.modeling.util.maths.matrix.CommonOps.fill(b,0);for(var c=0;c<l;c++){b.set(c,c,1);for(var e=0;e<c;e++)b.set(c,e,this.LU.get(c,e))}if(d>l)for(c=l;c<d;c++)for(e=0;e<l;e++)b.set(c,e,this.LU.get(c,e));return b};b.prototype.getUpper=
function(b){var d=this.LU.numRows<this.LU.numCols?this.LU.numRows:this.LU.numCols,l=this.LU.numCols;null==b?b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(d,l):a.kevoree.modeling.util.maths.matrix.CommonOps.fill(b,0);for(var c=0;c<d;c++)for(var e=c;e<l;e++)b.set(c,e,this.LU.get(c,e));return b};b.prototype.decomposeCommonInit=function(a){(a.numRows>this.maxWidth||a.numCols>this.maxWidth)&&this.setExpectedMaxSize(a.numRows,a.numCols);this.m=a.numRows;this.n=a.numCols;this.LU.setMatrix(a);
for(a=0;a<this.m;a++)this.pivot[a]=a;this.pivsign=1};b.prototype._solveVectorInternal=function(b){for(var d=0,l=0;l<this.n;l++){var c=this.indx[l],e=b[c];b[c]=b[l];if(0!=d)for(var c=l*this.n+d-1,g=d-1;g<l;g++)e-=this.dataLU[c++]*b[g];else 0!=e&&(d=l+1);b[l]=e}a.kevoree.modeling.util.maths.matrix.solvers.TriangularSolver.solveU2arr(this.dataLU,b,this.n)};b.prototype._getVV=function(){return this.vv};b.prototype.computeDeterminant=function(){for(var a=this.pivsign,b=this.m*this.n,l=0;l<b;l+=this.n+
1)a*=this.dataLU[l];return a};b.prototype.decompose=function(a){this.decomposeCommonInit(a);a=this.vv;for(var b=0;b<this.n;b++){for(var l=0;l<this.m;l++)a[l]=this.dataLU[l*this.n+b];for(l=0;l<this.m;l++){for(var d=l*this.n,c=l<b?l:b,e=0,g=0;g<c;g++)e+=this.dataLU[d+g]*a[g];this.dataLU[d+b]=a[l]-=e}d=b;g=Math.abs(a[d]);for(l=b+1;l<this.m;l++)c=Math.abs(a[l]),c>g&&(d=l,g=c);if(d!=b){l=d*this.n;g=b*this.n;c=l+this.n;for(l=d*this.n;l<c;l++)e=this.dataLU[l],this.dataLU[l]=this.dataLU[g],this.dataLU[g]=
e,g++;g=this.pivot[d];this.pivot[d]=this.pivot[b];this.pivot[b]=g;this.pivsign=-this.pivsign}this.indx[b]=d;if(b<this.m&&(d=this.dataLU[b*this.n+b],0!=d))for(l=b+1;l<this.m;l++)this.dataLU[l*this.n+b]/=d}return!0};return b}();c.LUDecompositionAlt_D64=b;b=function(){function a(b){this.doImprove=!1;this.decomp=b}a.prototype.getA=function(){return this.A};a.prototype._setA=function(a){this.A=a;this.numRows=a.numRows;this.numCols=a.numCols};a.prototype.setA=function(a){this._setA(a);return this.decomp.decompose(a)};
a.prototype.invert=function(a){var b=this.decomp._getVV();this.decomp.getLU();var l=this.A.numCols;a=a.data;for(var d=0;d<l;d++){for(var c=0;c<l;c++)b[c]=c==d?1:0;this.decomp._solveVectorInternal(b);for(var e=d,c=0;c<l;c++)a[e]=b[c],e+=l}};a.prototype.improveSol=function(a,b){for(var l=this.A.data,d=a.data,c=b.data,e=a.numCols,g=a.numCols,k=this.decomp._getVV(),H=0;H<e;H++){for(var p=0;p<g;p++){for(var m=-d[p*e+H],t=0;t<g;t++)m+=l[p*g+t]*c[t*e+H];k[p]=m}this.decomp._solveVectorInternal(k);for(p=0;p<
g;p++)c[p*e+H]-=k[p]}};a.prototype.modifiesA=function(){return!1};a.prototype.modifiesB=function(){return!1};a.prototype.solve=function(a,b){for(var l=a.numCols,d=a.data,c=b.data,e=this.decomp._getVV(),g=0;g<l;g++){for(var k=g,H=0;H<this.numCols;H++)e[H]=d[k],k+=l;this.decomp._solveVectorInternal(e);k=g;for(H=0;H<this.numCols;H++)c[k]=e[H],k+=l}this.doImprove&&this.improveSol(a,b)};return a}();c.LinearSolverLu_D64=b;b=function(){function b(d){this.mat=d;this.eig=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.SwitchingEigenDecomposition(d.numCols,
!0,1E-8);if(!this.eig.decompose(d))throw Error("Eigenvalue Decomposition failed");}b.prototype.getNumberOfEigenvalues=function(){return this.eig.getNumberOfEigenvalues()};b.prototype.getEigenvalue=function(a){return this.eig.getEigenvalue(a)};b.prototype.getEigenVector=function(b){return a.kevoree.modeling.util.maths.matrix.SimpleMatrix.wrap(this.eig.getEigenVector(b))};b.prototype.getEVD=function(){return this.eig};b.prototype.getIndexMax=function(){for(var a=0,b=this.getEigenvalue(0).getMagnitude2(),
l=this.getNumberOfEigenvalues(),d=1;d<l;d++){var c=this.getEigenvalue(d).getMagnitude2();c>b&&(b=c,a=d)}return a};b.prototype.getIndexMin=function(){for(var a=0,b=this.getEigenvalue(0).getMagnitude2(),l=this.getNumberOfEigenvalues(),d=1;d<l;d++){var c=this.getEigenvalue(d).getMagnitude2();c<b&&(b=c,a=d)}return a};return b}();c.SimpleEVD=b;b=function(){function b(d,c){this.mat=d;this.svd=new a.kevoree.modeling.util.maths.matrix.solvers.SvdImplicitQrDecompose_D64(c,!0,!0,!1);if(!this.svd.decompose(d))throw Error("Decomposition failed");
this.U=a.kevoree.modeling.util.maths.matrix.SimpleMatrix.wrap(this.svd.getU(null,!1));this.W=a.kevoree.modeling.util.maths.matrix.SimpleMatrix.wrap(this.svd.getW(null));this.V=a.kevoree.modeling.util.maths.matrix.SimpleMatrix.wrap(this.svd.getV(null,!1));a.kevoree.modeling.util.maths.matrix.solvers.SimpleSVD.descendingOrder(this.U.getMatrix(),!1,this.W.getMatrix(),this.V.getMatrix(),!1);this.tol=a.kevoree.modeling.util.maths.matrix.solvers.SimpleSVD.singularThreshold(this.svd)}b.swapRowOrCol=function(a,
b,l,d){if(b)for(var c=0;c<a.numCols;c++)b=a.get(l,c),a.set(l,c,a.get(d,c)),a.set(d,c,b);else for(c=0;c<a.numRows;c++)b=a.get(c,l),a.set(c,l,a.get(c,d)),a.set(c,d,b)};b.singularThreshold=function(b){for(var d=0,l=b.getSingularValues(),c=b.numberOfSingularValues(),e=0;e<c;e++)l[e]>d&&(d=l[e]);return Math.max(b.getNumCols(),b.getNumRows())*d*a.kevoree.modeling.util.maths.matrix.CommonOps.EPS};b.descendingOrder=function(b,d,l,c,e){for(var g=Math.min(l.numRows,l.numCols),A=0;A<g;A++){for(var k=-1,H=-1,
p=A;p<g;p++){var m=l.get(p,p);m>k&&(k=m,H=p)}if(H!=A){if(-1==H)break;p=l.get(A,A);l.set(A,A,k);l.set(H,H,p);null!=c&&a.kevoree.modeling.util.maths.matrix.solvers.SimpleSVD.swapRowOrCol(c,e,A,H);null!=b&&a.kevoree.modeling.util.maths.matrix.solvers.SimpleSVD.swapRowOrCol(b,d,A,H)}}};b.prototype.getU=function(){return this.U};b.prototype.getW=function(){return this.W};b.prototype.getV=function(){return this.V};return b}();c.SimpleSVD=b;b=function(){function b(){this.rand=new java.util.Random;this.eigenSmall=
new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.EigenvalueSmall;this.exceptionalThresh=15;this.maxIterations=100*this.exceptionalThresh;this.fastValues=!1}b.prototype.getUt=function(){return this.Ut};b.prototype.setUt=function(a){this.Ut=a};b.prototype.getVt=function(){return this.Vt};b.prototype.setVt=function(a){this.Vt=a};b.prototype.setMatrix=function(a,b,l,d){this.initParam(a,b);this.diag=l;this.off=d;this.maxValue=Math.abs(l[0]);for(a=1;a<this.N;a++){b=Math.abs(l[a]);var c=Math.abs(d[a-
1]);b>this.maxValue&&(this.maxValue=Math.abs(b));c>this.maxValue&&(this.maxValue=Math.abs(c))}};b.prototype.swapDiag=function(a){var b=this.diag;this.diag=a;return b};b.prototype.swapOff=function(a){var b=this.off;this.off=a;return b};b.prototype.setMaxValue=function(a){this.maxValue=a};b.prototype.initParam=function(a,b){if(b>a)throw Error("Must be a square or tall matrix");this.N=b;if(null==this.splits||this.splits.length<b)this.splits=new Int32Array(b);this.x1=0;this.x2=this.N-1;this.numExceptional=
this.numSplits=this.totalSteps=this.steps=0;this.nextExceptional=this.exceptionalThresh};b.prototype.process=function(){this.followScript=!1;this.findingZeros=!0;return this._process()};b.prototype.processValues=function(a){this.followScript=!0;this.values=a;this.findingZeros=!1;return this._process()};b.prototype._process=function(){if(0==this.maxValue)return!0;for(;0<=this.x2;){if(this.steps>this.maxIterations)return!1;if(this.x1==this.x2){if(this.resetSteps(),!this.nextSplit())break}else this.fastValues&&
1==this.x2-this.x1?(this.resetSteps(),this.eigenBB_2x2(this.x1),this.setSubmatrix(this.x2,this.x2)):this.steps>=this.nextExceptional?this.exceptionShift():this.checkForAndHandleZeros()||(this.followScript?this.performScriptedStep():this.performDynamicStep())}return!0};b.prototype.performDynamicStep=function(){if(this.findingZeros)if(6<this.steps)this.findingZeros=!1;else{var a=this.computeBulgeScale();this.performImplicitSingleStep(a,0,!1)}else{var a=this.computeBulgeScale(),b=this.selectWilkinsonShift(a);
this.performImplicitSingleStep(a,b,!1)}};b.prototype.performScriptedStep=function(){var a=this.computeBulgeScale();if(this.steps>b.giveUpOnKnown)this.followScript=!1;else{var c=this.values[this.x2]/a;this.performImplicitSingleStep(a,c*c,!1)}};b.prototype.incrementSteps=function(){this.steps++;this.totalSteps++};b.prototype.isOffZero=function(b){var d=Math.abs(this.diag[b])+Math.abs(this.diag[b+1]);return Math.abs(this.off[b])<=d*a.kevoree.modeling.util.maths.matrix.CommonOps.EPS};b.prototype.isDiagonalZero=
function(b){var d=Math.abs(this.diag[b+1])+Math.abs(this.off[b]);return Math.abs(this.diag[b])<=d*a.kevoree.modeling.util.maths.matrix.CommonOps.EPS};b.prototype.resetSteps=function(){this.steps=0;this.nextExceptional=this.exceptionalThresh;this.numExceptional=0};b.prototype.nextSplit=function(){if(0==this.numSplits)return!1;this.x2=this.splits[--this.numSplits];this.x1=0<this.numSplits?this.splits[this.numSplits-1]+1:0;return!0};b.prototype.performImplicitSingleStep=function(a,b,l){this.createBulge(this.x1,
b,a,l);for(a=this.x1;a<this.x2-1&&0!=this.bulge;a++){this.removeBulgeLeft(a,!0);if(0==this.bulge)break;this.removeBulgeRight(a)}0!=this.bulge&&this.removeBulgeLeft(this.x2-1,!1);this.incrementSteps()};b.prototype.updateRotator=function(a,b,l,d,c){b*=a.numCols;l*=a.numCols;for(var e=b+a.numCols;b!=e;b++){var g=a.getValueAtIndex(b),k=a.getValueAtIndex(l);a.setValueAtIndex(b,d*g+c*k);a.setValueAtIndex(l,-c*g+d*k);l++}};b.prototype.computeBulgeScale=function(){var a=this.off[this.x1];return Math.max(Math.abs(this.diag[this.x1]),
Math.abs(a))};b.prototype.createBulge=function(a,b,l,d){var c=this.diag[a],e=this.off[a],g=this.diag[a+1];d?(this.c=Math.cos(b),this.s=Math.sin(b)):(b=c/l*(c/l)-b,l=e/l*(c/l),d=Math.sqrt(b*b+l*l),this.c=b/d,this.s=l/d);this.diag[a]=c*this.c+e*this.s;this.off[a]=e*this.c-c*this.s;this.diag[a+1]=g*this.c;this.bulge=g*this.s;null!=this.Vt&&this.updateRotator(this.Vt,a,a+1,this.c,this.s)};b.prototype.computeRotator=function(a,b){if(Math.abs(a)<Math.abs(b)){var l=a/b,d=Math.sqrt(1+l*l);this.s=1/d;this.c=
l/d}else l=b/a,d=Math.sqrt(1+l*l),this.c=1/d,this.s=l/d};b.prototype.removeBulgeLeft=function(a,b){var l=this.diag[a],d=this.off[a],c=this.diag[a+1];this.computeRotator(l,this.bulge);this.diag[a]=this.c*l+this.s*this.bulge;this.off[a]=this.c*d+this.s*c;this.diag[a+1]=this.c*c-this.s*d;b&&(l=this.off[a+1],this.bulge=this.s*l,this.off[a+1]=this.c*l);null!=this.Ut&&this.updateRotator(this.Ut,a,a+1,this.c,this.s)};b.prototype.removeBulgeRight=function(a){var b=this.off[a],l=this.diag[a+1],d=this.off[a+
1];this.computeRotator(b,this.bulge);this.off[a]=b*this.c+this.bulge*this.s;this.diag[a+1]=l*this.c+d*this.s;this.off[a+1]=-l*this.s+d*this.c;b=this.diag[a+2];this.diag[a+2]=b*this.c;this.bulge=b*this.s;null!=this.Vt&&this.updateRotator(this.Vt,a+1,a+2,this.c,this.s)};b.prototype.setSubmatrix=function(a,b){this.x1=a;this.x2=b};b.prototype.selectWilkinsonShift=function(a){if(1<this.x2-this.x1){var b=this.diag[this.x2-1]/a,l=this.off[this.x2-2]/a,d=this.diag[this.x2]/a,c=this.off[this.x2-1]/a;a=c*c+
d*d;this.eigenSmall.symm2x2_fast(l*l+b*b,c*b,a)}else b=this.diag[this.x2-1]/a,l=this.off[this.x2-1]/a,a=this.diag[this.x2]/a,a=l*l+a*a,this.eigenSmall.symm2x2_fast(b*b,b*l,a);b=Math.abs(this.eigenSmall.value0.real-a);a=Math.abs(this.eigenSmall.value1.real-a);return b<a?this.eigenSmall.value0.real:this.eigenSmall.value1.real};b.signum=function(a){return 0>a?-1:0<a?1:0};b.prototype.eigenBB_2x2=function(b){var d=this.diag[b],l=this.off[b],c=this.diag[b+1],e=Math.abs(d),g=Math.abs(l),A=Math.abs(c),e=
e>g?e:g;A>e&&(e=A);0!=e&&(d/=e,l/=e,c/=e,this.eigenSmall.symm2x2_fast(d*d,d*l,l*l+c*c),this.off[b]=0,this.diag[b]=e*Math.sqrt(this.eigenSmall.value0.real),d=a.kevoree.modeling.util.maths.matrix.solvers.SvdImplicitQrAlgorithm.signum(this.eigenSmall.value1.real),this.diag[b+1]=d*e*Math.sqrt(Math.abs(this.eigenSmall.value1.real)))};b.prototype.checkForAndHandleZeros=function(){for(var a=this.x2-1;a>=this.x1;a--)if(this.isOffZero(a))return this.resetSteps(),this.splits[this.numSplits++]=a,this.x1=a+1,
!0;for(a=this.x2-1;a>=this.x1;a--)if(this.isDiagonalZero(a))return this.pushRight(a),this.resetSteps(),this.splits[this.numSplits++]=a,this.x1=a+1,!0;return!1};b.prototype.pushRight=function(a){if(!this.isOffZero(a)){this.rotatorPushRight(a);for(var b=this.N-2-a,l=0;l<b&&0!=this.bulge;l++)this.rotatorPushRight2(a,l+2)}};b.prototype.rotatorPushRight=function(a){var b=this.off[a],l=this.diag[a+1];this.computeRotator(l,-b);this.off[a]=0;this.diag[a+1]=l*this.c-b*this.s;a+2<this.N?(b=this.off[a+1],this.off[a+
1]=b*this.c,this.bulge=b*this.s):this.bulge=0;null!=this.Ut&&this.updateRotator(this.Ut,a,a+1,this.c,this.s)};b.prototype.rotatorPushRight2=function(a,b){var l=this.bulge,d=this.diag[a+b];this.computeRotator(d,-l);this.diag[a+b]=d*this.c-l*this.s;a+b<this.N-1&&(l=this.off[a+b],this.off[a+b]=l*this.c,this.bulge=l*this.s);null!=this.Ut&&this.updateRotator(this.Ut,a,a+b,this.c,this.s)};b.prototype.exceptionShift=function(){this.numExceptional++;var a=.05*this.numExceptional;1<a&&(a=1);a*=2*Math.PI*(this.rand.nextDouble()-
.5);this.performImplicitSingleStep(0,a,!0);this.nextExceptional=this.steps+this.exceptionalThresh};b.prototype.getNumberOfSingularValues=function(){return this.N};b.prototype.getSingularValue=function(a){return this.diag[a]};b.prototype.setFastValues=function(a){this.fastValues=a};b.prototype.getSingularValues=function(){return this.diag};b.prototype.getDiag=function(){return this.diag};b.prototype.getOff=function(){return this.off};b.prototype.getMaxValue=function(){return this.maxValue};b.giveUpOnKnown=
10;return b}();c.SvdImplicitQrAlgorithm=b;b=function(){function b(d,c,l,e){this.qralg=new a.kevoree.modeling.util.maths.matrix.solvers.SvdImplicitQrAlgorithm;this.A_mod=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(1,1);this.compact=d;this.prefComputeU=c;this.prefComputeV=l;this.canUseTallBidiagonal=e}b.prototype.getSingularValues=function(){return this.singularValues};b.prototype.numberOfSingularValues=function(){return this.numSingular};b.prototype.isCompact=function(){return this.compact};
b.prototype.getU=function(b,d){if(!this.prefComputeU)throw Error("As requested U was not computed.");if(d){if(null==b)return this.Ut;if(b.numRows!=this.Ut.numRows||b.numCols!=this.Ut.numCols)throw Error("Unexpected shape of U");b.setMatrix(this.Ut)}else{if(null==b)b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(this.Ut.numCols,this.Ut.numRows);else if(b.numRows!=this.Ut.numCols||b.numCols!=this.Ut.numRows)throw Error("Unexpected shape of U");a.kevoree.modeling.util.maths.matrix.CommonOps.transposeMatrix(this.Ut,
b)}return b};b.prototype.getV=function(b,d){if(!this.prefComputeV)throw Error("As requested V was not computed.");if(d){if(null==b)return this.Vt;if(b.numRows!=this.Vt.numRows||b.numCols!=this.Vt.numCols)throw Error("Unexpected shape of V");b.setMatrix(this.Vt)}else{if(null==b)b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(this.Vt.numCols,this.Vt.numRows);else if(b.numRows!=this.Vt.numCols||b.numCols!=this.Vt.numRows)throw Error("Unexpected shape of V");a.kevoree.modeling.util.maths.matrix.CommonOps.transposeMatrix(this.Vt,
b)}return b};b.prototype.getW=function(b){var d=this.compact?this.numSingular:this.numRows,l=this.compact?this.numSingular:this.numCols;null==b?b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(d,l):(b.reshapeBoolean(d,l,!1),b.zero());for(d=0;d<this.numSingular;d++)b.set(d,d,this.singularValues[d]);return b};b.prototype.decompose=function(a){if(!this.setup(a)||this.bidiagonalization(a)||this.computeUWV())return!1;this.makeSingularPositive();this.undoTranspose();return!0};b.prototype.inputModified=
function(){return!1};b.prototype.bidiagonalization=function(b){this.transposed?(this.A_mod.reshapeBoolean(b.numCols,b.numRows,!1),a.kevoree.modeling.util.maths.matrix.CommonOps.transposeMatrix(b,this.A_mod)):(this.A_mod.reshapeBoolean(b.numRows,b.numCols,!1),this.A_mod.setMatrix(b));return!this.bidiag.decompose(this.A_mod)};b.prototype.undoTranspose=function(){if(this.transposed){var a=this.Vt;this.Vt=this.Ut;this.Ut=a}};b.prototype.computeUWV=function(){this.bidiag.getDiagonal(this.diag,this.off);
this.qralg.setMatrix(this.numRowsT,this.numColsT,this.diag,this.off);this.computeU&&(this.Ut=this.bidiag.getU(this.Ut,!0,this.compact));this.computeV&&(this.Vt=this.bidiag.getV(this.Vt,!0,this.compact));this.qralg.setFastValues(!1);this.computeU?this.qralg.setUt(this.Ut):this.qralg.setUt(null);this.computeV?this.qralg.setVt(this.Vt):this.qralg.setVt(null);return!this.qralg.process()};b.prototype.setup=function(b){(this.transposed=b.numCols>b.numRows)?(this.computeU=this.prefComputeV,this.computeV=
this.prefComputeU,this.numRowsT=b.numCols,this.numColsT=b.numRows):(this.computeU=this.prefComputeU,this.computeV=this.prefComputeV,this.numRowsT=b.numRows,this.numColsT=b.numCols);this.numRows=b.numRows;this.numCols=b.numCols;if(0==this.numRows||0==this.numCols)return!1;if(null==this.diag||this.diag.length<this.numColsT)this.diag=new Float64Array(this.numColsT),this.off=new Float64Array(this.numColsT-1);this.canUseTallBidiagonal&&this.numRows>2*this.numCols&&!this.computeU?null!=this.bidiag&&this.bidiag instanceof
a.kevoree.modeling.util.maths.matrix.solvers.decomposition.BidiagonalDecompositionTall_D64||(this.bidiag=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.BidiagonalDecompositionTall_D64):null!=this.bidiag&&this.bidiag instanceof a.kevoree.modeling.util.maths.matrix.solvers.decomposition.BidiagonalDecompositionRow_D64||(this.bidiag=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.BidiagonalDecompositionRow_D64(1));return!0};b.prototype.makeSingularPositive=function(){this.numSingular=
this.qralg.getNumberOfSingularValues();this.singularValues=this.qralg.getSingularValues();for(var a=0;a<this.numSingular;a++){var b=this.qralg.getSingularValue(a);if(0>b){if(this.singularValues[a]=0-b,this.computeU)for(var l=a*this.Ut.numCols,b=l+this.Ut.numCols;l<b;l++)this.Ut.setValueAtIndex(l,0-this.Ut.getValueAtIndex(l))}else this.singularValues[a]=b}};b.prototype.getNumRows=function(){return this.numRows};b.prototype.getNumCols=function(){return this.numCols};return b}();c.SvdImplicitQrDecompose_D64=
b;b=function(){function a(){}a.solveU2arr=function(a,b,l){for(var d=l-1;0<=d;d--){for(var c=b[d],e=d*l+d+1,g=d+1;g<l;g++)c-=a[e++]*b[g];b[d]=c/a[d*l+d]}};a.solveU=function(a,b,l,d,c){for(var e=c-1;e>=d;e--){for(var g=b[e],k=e*l+e+1,H=e+1;H<c;H++)g-=a[k++]*b[H];b[e]=g/a[e*l+e]}};return a}();c.TriangularSolver=b;(function(b){var c=function(){function b(l){this.UBV=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(l,1);this.gammasU=new Float64Array(l);this.gammasV=new Float64Array(l);this.b=new Float64Array(l);
this.u=new Float64Array(l)}b.prototype.decompose=function(a){this.init(a);return this._decompose()};b.prototype.init=function(a){this.UBV=a;this.m=this.UBV.numRows;this.n=this.UBV.numCols;this.min=Math.min(this.m,this.n);a=Math.max(this.m,this.n);this.b.length<a+1&&(this.b=new Float64Array(a+1),this.u=new Float64Array(a+1));this.gammasU.length<this.m&&(this.gammasU=new Float64Array(this.m));this.gammasV.length<this.n&&(this.gammasV=new Float64Array(this.n))};b.prototype.getUBV=function(){return this.UBV};
b.prototype.getDiagonal=function(a,b){a[0]=this.UBV.getValueAtIndex(0);for(var d=1;d<this.n;d++)a[d]=this.UBV.get(d,d),b[d-1]=this.UBV.get(d-1,d)};b.prototype.getB=function(b,d){b=a.kevoree.modeling.util.maths.matrix.solvers.decomposition.BidiagonalDecompositionRow_D64.handleB(b,d,this.m,this.n,this.min);b.set(0,0,this.UBV.get(0,0));for(var c=1;c<this.min;c++)b.set(c,c,this.UBV.get(c,c)),b.set(c-1,c,this.UBV.get(c-1,c));this.n>this.m&&b.set(this.min-1,this.min,this.UBV.get(this.min-1,this.min));return b};
b.handleB=function(b,d,c,h,f){var e=h>c?f+1:f;d?null==b?b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(f,e):(b.reshapeBoolean(f,e,!1),b.zero()):null==b?b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(c,h):(b.reshapeBoolean(c,h,!1),b.zero());return b};b.prototype.getU=function(b,d,c){b=a.kevoree.modeling.util.maths.matrix.solvers.decomposition.BidiagonalDecompositionRow_D64.handleU(b,d,c,this.m,this.n,this.min);a.kevoree.modeling.util.maths.matrix.CommonOps.setIdentity(b);for(c=
0;c<this.m;c++)this.u[c]=0;for(var h=this.min-1;0<=h;h--){this.u[h]=1;for(c=h+1;c<this.m;c++)this.u[c]=this.UBV.get(c,h);d?a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultL(b,this.u,this.gammasU[h],h,h,this.m):a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultR(b,this.u,this.gammasU[h],h,h,this.m,this.b)}return b};b.handleU=function(b,d,c,h,f,e){c?d?null==b?b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(e,
h):b.reshapeBoolean(e,h,!1):null==b?b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(h,e):b.reshapeBoolean(h,e,!1):null==b?b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(h,h):b.reshapeBoolean(h,h,!1);return b};b.prototype.getV=function(b,d,c){b=a.kevoree.modeling.util.maths.matrix.solvers.decomposition.BidiagonalDecompositionRow_D64.handleV(b,d,c,this.m,this.n,this.min);a.kevoree.modeling.util.maths.matrix.CommonOps.setIdentity(b);for(c=this.min-1;0<=c;c--){this.u[c+1]=1;for(var h=
c+2;h<this.n;h++)this.u[h]=this.UBV.get(c,h);d?a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultL(b,this.u,this.gammasV[c],c+1,c+1,this.n):a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultR(b,this.u,this.gammasV[c],c+1,c+1,this.n,this.b)}return b};b.handleV=function(b,d,c,h,f,e){h=f>h?e+1:e;c?d?null==b?b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(h,f):b.reshapeBoolean(h,f,!1):null==b?b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(f,
h):b.reshapeBoolean(f,h,!1):null==b?b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(f,f):b.reshapeBoolean(f,f,!1);return b};b.prototype._decompose=function(){for(var a=0;a<this.min;a++)this.computeU(a),this.computeV(a);return!0};b.prototype.computeU=function(b){for(var d=this.UBV.data,c=0,h=b;h<this.m;h++){var f=this.u[h]=d[h*this.n+b],f=Math.abs(f);f>c&&(c=f)}0<c?(h=a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.computeTauAndDivide4arg(b,this.m,this.u,
c),f=this.u[b]+h,a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.divideElements_Bcol(b+1,this.m,this.n,this.u,d,b,f),this.u[b]=1,f/=h,this.gammasU[b]=f,a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultR(this.UBV,this.u,f,b+1,b,this.m,this.b),d[b*this.n+b]=-h*c):this.gammasU[b]=0};b.prototype.computeV=function(b){var d=this.UBV.data,c=b*this.n,h=a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.findMax(d,
c+b+1,this.n-b-1);if(0<h){var f=a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.computeTauAndDivide(b+1,this.n,d,c,h),e=d[c+b+1]+f;a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.divideElements_Brow(b+2,this.n,this.u,d,c,e);this.u[b+1]=1;e/=f;this.gammasV[b]=e;a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultL(this.UBV,this.u,e,b+1,b+1,this.n);d[c+b+1]=-f*h}else this.gammasV[b]=0};b.prototype.getGammasU=
function(){return this.gammasU};b.prototype.getGammasV=function(){return this.gammasV};b.prototype.inputModified=function(){return!0};return b}();b.BidiagonalDecompositionRow_D64=c;c=function(){function b(){this.decompQRP=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QRxColPivDecompositionHouseholderColumn_D64;this.decompBi=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.BidiagonalDecompositionRow_D64(1);this.B=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(1,
1)}b.prototype.getDiagonal=function(a,b){a[0]=this.B.getValueAtIndex(0);for(var d=1;d<this.n;d++)a[d]=this.B.get(d,d),b[d-1]=this.B.get(d-1,d)};b.prototype.getB=function(b,d){b=a.kevoree.modeling.util.maths.matrix.solvers.decomposition.BidiagonalDecompositionRow_D64.handleB(b,d,this.m,this.n,this.min);b.set(0,0,this.B.get(0,0));for(var c=1;c<this.min;c++)b.set(c,c,this.B.get(c,c)),b.set(c-1,c,this.B.get(c-1,c));this.n>this.m&&b.set(this.min-1,this.min,this.B.get(this.min-1,this.min));return b};b.prototype.getU=
function(b,d,c){b=a.kevoree.modeling.util.maths.matrix.solvers.decomposition.BidiagonalDecompositionRow_D64.handleU(b,!1,c,this.m,this.n,this.min);if(c){c=this.decompQRP.getQ(null,!0);var h=this.decompBi.getU(null,!1,!0);a.kevoree.modeling.util.maths.matrix.CommonOps.mult(c,h,b)}else{var f=this.decompQRP.getQ(b,!1),h=this.decompBi.getU(null,!1,!0);c=a.kevoree.modeling.util.maths.matrix.CommonOps.extract4Int(f,0,f.numRows,0,this.min);var e=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(c.numRows,
h.numCols);a.kevoree.modeling.util.maths.matrix.CommonOps.mult(c,h,e);a.kevoree.modeling.util.maths.matrix.CommonOps.insert(e,f,0,0)}d&&a.kevoree.modeling.util.maths.matrix.CommonOps.transpose(b);return b};b.prototype.getV=function(a,b,d){return this.decompBi.getV(a,b,d)};b.prototype.decompose=function(b){if(!this.decompQRP.decompose(b))return!1;this.m=b.numRows;this.n=b.numCols;this.min=Math.min(this.m,this.n);this.B.reshapeBoolean(this.min,this.n,!1);this.decompQRP.getR(this.B,!0);b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(this.min,
this.n);var d=this.decompQRP.getPivotMatrix(null);a.kevoree.modeling.util.maths.matrix.CommonOps.multTransB(this.B,d,b);this.B.setMatrix(b);return this.decompBi.decompose(this.B)};b.prototype.inputModified=function(){return this.decompQRP.inputModified()};return b}();b.BidiagonalDecompositionTall_D64=c;c=function(){function b(){this.value0=new a.kevoree.modeling.util.maths.matrix.Complex64F;this.value1=new a.kevoree.modeling.util.maths.matrix.Complex64F}b.prototype.value2x2=function(a,b,d,c){var h,
f;if(0==b+d)h=f=1/Math.sqrt(2);else{h=(a-c)/(b+d);var e=h/(1+Math.sqrt(1+h*h));h=1/Math.sqrt(1+e*e);f=h*e}var g=h*h,k=f*f;h*=f;var e=g*a+k*c-h*(b+d),m=g*b-k*d+h*(a-c);a=g*d-k*b+h*(a-c);0<=a*m?(0==m?(h=0,f=1):(f=Math.sqrt(a/(m+a)),h=Math.sqrt(m/(m+a))),h*=f,this.value0.real=e-h*(m+a),this.value1.real=e+h*(m+a),this.value0.imaginary=this.value1.imaginary=0):(this.value0.real=this.value1.real=e,this.value0.imaginary=Math.sqrt(-a*m),this.value1.imaginary=-this.value0.imaginary)};b.prototype.value2x2_fast=
function(a,b,d,c){var h=(a+c)/2;a=4*b*d+(a-c)*(a-c);0>a?(this.value0.real=this.value1.real=h,this.value0.imaginary=Math.sqrt(-a)/2,this.value1.imaginary=-this.value0.imaginary):(a=Math.sqrt(a)/2,this.value0.real=h+a,this.value1.real=h-a,this.value0.imaginary=this.value1.imaginary=0)};b.prototype.symm2x2_fast=function(a,b,d){var c=.5*(a+d);a=.5*(a-d);b=Math.sqrt(a*a+b*b);this.value0.real=c+b;this.value1.real=c-b};return b}();b.EigenvalueSmall=c;c=function(){function b(a){this.gammas=new Float64Array(a);
this.b=new Float64Array(a);this.u=new Float64Array(a)}b.prototype.decompose=function(a){if(a.numRows!=a.numCols)throw Error("A must be square.");if(0>=a.numRows)return!1;this.QH=a;this.N=a.numCols;this.b.length<this.N&&(this.b=new Float64Array(this.N),this.gammas=new Float64Array(this.N),this.u=new Float64Array(this.N));return this._decompose()};b.prototype.inputModified=function(){return!0};b.prototype.getQH=function(){return this.QH};b.prototype.getH=function(b){null==b?b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(this.N,
this.N):b.zero();java.lang.System.arraycopy(this.QH.data,0,b.data,0,this.N);for(var d=1;d<this.N;d++)for(var c=d-1;c<this.N;c++)b.set(d,c,this.QH.get(d,c));return b};b.prototype.getQ=function(b){if(null==b){b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(this.N,this.N);for(var d=0;d<this.N;d++)b.data[d*this.N+d]=1}else{if(this.N!=b.numRows||this.N!=b.numCols)throw Error("The provided H must have the same dimensions as the decomposed matrix.");a.kevoree.modeling.util.maths.matrix.CommonOps.setIdentity(b)}for(var c=
this.N-2;0<=c;c--){this.u[c+1]=1;for(d=c+2;d<this.N;d++)this.u[d]=this.QH.get(d,c);a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultR(b,this.u,this.gammas[c],c+1,c+1,this.N,this.b)}return b};b.prototype._decompose=function(){for(var b=this.QH.data,d=0;d<this.N-2;d++){for(var c=0,h=d+1;h<this.N;h++){var f=this.u[h]=b[h*this.N+d],f=Math.abs(f);f>c&&(c=f)}if(0<c){for(var e=0,h=d+1;h<this.N;h++)f=this.u[h]/=c,e+=f*f;e=Math.sqrt(e);0>this.u[d+1]&&(e=-e);f=
this.u[d+1]+e;this.u[d+1]=1;for(h=d+2;h<this.N;h++)b[h*this.N+d]=this.u[h]/=f;h=f/e;this.gammas[d]=h;a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultR(this.QH,this.u,h,d+1,d+1,this.N,this.b);a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultL(this.QH,this.u,h,0,d+1,this.N);b[(d+1)*this.N+d]=-e*c}else this.gammas[d]=0}return!0};b.prototype.getGammas=function(){return this.gammas};return b}();b.HessenbergSimilarDecomposition_D64=
c;c=function(){function b(){}b.prototype.setExpectedMaxSize=function(b,d){this.numCols=d;this.numRows=b;this.minLength=Math.min(d,b);var c=Math.max(d,b);if(null==this.dataQR||this.dataQR.rows()<b||this.dataQR.columns()<d)this.dataQR=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(b,d),this.v=new Float64Array(c),this.gammas=new Float64Array(this.minLength);this.v.length<c&&(this.v=new Float64Array(c));this.gammas.length<this.minLength&&(this.gammas=new Float64Array(this.minLength))};
b.prototype.getQ=function(b,d){d?null==b?b=a.kevoree.modeling.util.maths.matrix.DenseMatrix64F.identity(this.numRows,this.minLength):a.kevoree.modeling.util.maths.matrix.DenseMatrix64F.setIdentity(b):null==b?b=a.kevoree.modeling.util.maths.matrix.DenseMatrix64F.widentity(this.numRows):a.kevoree.modeling.util.maths.matrix.DenseMatrix64F.setIdentity(b);for(var c=this.minLength-1;0<=c;c--){var h=this.dataQR.get(c,c);this.dataQR.set(c,c,1);a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QRDecompositionHouseholderColumn_D64.rank1UpdateMultR(b,
this.dataQR,c,this.gammas[c],c,c,this.numRows,this.v);this.dataQR.set(c,c,h)}return b};b.prototype.getR=function(b,d){if(null==b)b=d?new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(this.minLength,this.numCols):new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(this.numRows,this.numCols);else for(var c=0;c<b.numRows;c++)for(var h=Math.min(c,b.numCols),f=0;f<h;f++)b.cset(c,f,0);for(f=0;f<this.numCols;f++)for(h=Math.min(f,this.numRows-1),c=0;c<=h;c++){var e=this.dataQR.get(c,f);b.cset(c,
f,e)}return b};b.prototype.decompose=function(a){this.setExpectedMaxSize(a.numRows,a.numCols);this.convertToColumnMajor(a);this.error=!1;for(a=0;a<this.minLength;a++)this.householder(a),this.updateA(a);return!this.error};b.prototype.convertToColumnMajor=function(a){for(var b=0;b<this.numCols;b++)for(var d=0;d<this.numRows;d++)this.dataQR.set(d,b,a.data[d*this.numCols+b])};b.prototype.householder=function(b){var d=a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QRDecompositionHouseholderColumn_D64.findMax(this.dataQR,
b,b,this.numRows-b);if(0==d)this.gamma=0,this.error=!0;else{this.tau=a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QRDecompositionHouseholderColumn_D64.computeTauAndDivide(b,this.numRows,this.dataQR,b,d);var c=this.dataQR.get(b,b)+this.tau;a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QRDecompositionHouseholderColumn_D64.divideElements(b+1,this.numRows,this.dataQR,b,c);this.gamma=c/this.tau;this.tau*=d;this.dataQR.set(b,b,-this.tau)}this.gammas[b]=this.gamma};b.prototype.updateA=
function(a){for(var b=a+1;b<this.numCols;b++){for(var d=this.dataQR.get(a,b),c=a+1;c<this.numRows;c++)d+=this.dataQR.get(c,a)*this.dataQR.get(c,b);d*=this.gamma;this.dataQR.add(a,b,-d);for(c=a+1;c<this.numRows;c++)this.dataQR.add(c,b,-this.dataQR.get(c,a)*d)}};b.findMax=function(a,b,d,c){var h=-1,f=d;for(d+=c;f<d;f++)c=a.get(f,b),c=0>c?-c:c,c>h&&(h=c);return h};b.divideElements=function(a,b,c,d,h){for(;a<b;a++)c.set(a,d,c.get(a,d)/h)};b.computeTauAndDivide=function(a,b,c,d,h){for(var f=0,e=a;e<b;e++){c.set(e,
d,c.get(e,d)/h);var g=c.get(e,d),f=f+g*g}f=Math.sqrt(f);0>c.get(a,d)&&(f=-f);return f};b.prototype.inputModified=function(){return!1};b.rank1UpdateMultR=function(a,b,c,d,h,f,e,g){for(var k=h;k<a.numCols;k++)g[k]=b.get(f,c)*a.data[f*a.numCols+k];for(var m=f+1;m<e;m++)for(var u=m*a.numCols+h,r=b.get(m,c),k=h;k<a.numCols;k++)g[k]+=r*a.data[u++];for(k=h;k<a.numCols;k++)g[k]*=d;for(k=f;k<e;k++)for(r=b.get(k,c),u=k*a.numCols+h,d=h;d<a.numCols;d++)a.data[u++]-=r*g[d]};return b}();b.QRDecompositionHouseholderColumn_D64=
c;c=function(b){function d(){b.call(this);this.singularThreshold=a.kevoree.modeling.util.maths.matrix.CommonOps.EPS}__extends(d,b);d.prototype.setSingularThreshold=function(a){this.singularThreshold=a};d.prototype.setExpectedMaxSize=function(a,d){b.prototype.setExpectedMaxSize.call(this,a,d);if(null==this.pivots||this.pivots.length<d)this.pivots=new Int32Array(d),this.normsCol=new Float64Array(d)};d.prototype.getQ=function(b,d){if(d)if(null==b)b=a.kevoree.modeling.util.maths.matrix.CommonOps.identity(this.numRows,
this.minLength);else{if(b.numRows!=this.numRows||b.numCols!=this.minLength)throw Error("Unexpected matrix dimension.");a.kevoree.modeling.util.maths.matrix.CommonOps.setIdentity(b)}else if(null==b)b=a.kevoree.modeling.util.maths.matrix.CommonOps.identity1D(this.numRows);else{if(b.numRows!=this.numRows||b.numCols!=this.numRows)throw Error("Unexpected matrix dimension.");a.kevoree.modeling.util.maths.matrix.CommonOps.setIdentity(b)}for(var c=this.rank-1;0<=c;c--){var l=this.dataQR.get(c,c);this.dataQR.set(c,
c,1);a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultRArray(b,this.dataQR,c,this.gammas[c],c,c,this.numRows,this.v);this.dataQR.set(c,c,l)}return b};d.prototype.decompose=function(b){this.setExpectedMaxSize(b.numRows,b.numCols);this.convertToColumnMajor(b);this.maxAbs=a.kevoree.modeling.util.maths.matrix.CommonOps.elementMaxAbs(b);this.setupPivotInfo();for(b=0;b<this.minLength;b++){0<b&&this.updateNorms(b);this.swapColumns(b);if(!this.householderPivot(b))break;
this.updateA(b);this.rank=b+1}return!0};d.prototype.setupPivotInfo=function(){for(var a=0;a<this.numCols;a++){this.pivots[a]=a;for(var b=0,d=0;d<this.numRows;d++)var c=this.dataQR.get(d,a),b=b+c*c;this.normsCol[a]=b}};d.prototype.updateNorms=function(a){for(var b=!1,d=a;d<this.numCols;d++){var c=this.dataQR.get(a-1,d);this.normsCol[d]-=c*c;if(0>this.normsCol[d]){b=!0;break}}if(b)for(d=a;d<this.numCols;d++){b=0;for(c=a;c<this.numRows;c++)var l=this.dataQR.get(c,d),b=b+l*l;this.normsCol[d]=b}};d.prototype.swapColumns=
function(a){for(var b=a,d=this.normsCol[a],c=a+1;c<this.numCols;c++){var l=this.normsCol[c];l>d&&(d=l,b=c)}for(c=d=0;c<this.dataQR.rows();c++)d=this.dataQR.get(c,a),this.dataQR.set(c,a,this.dataQR.get(c,b)),this.dataQR.set(c,b,d);d=this.normsCol[a];this.normsCol[a]=this.normsCol[b];this.normsCol[b]=d;d=this.pivots[a];this.pivots[a]=this.pivots[b];this.pivots[b]=d};d.prototype.householderPivot=function(b){var d=a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.findMaxArray(this.dataQR,
b,b,this.numRows-b);if(0>=d)return!1;this.tau=a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.computeTauAndDivide4argArray(b,this.numRows,this.dataQR,b,d);var c=this.dataQR.get(b,b)+this.tau;a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.divideElements4argArray(b+1,this.numRows,this.dataQR,b,c);this.gamma=c/this.tau;this.tau*=d;this.dataQR.set(b,b,-this.tau);if(Math.abs(this.tau)<=this.singularThreshold)return!1;this.gammas[b]=this.gamma;
return!0};d.prototype.getRank=function(){return this.rank};d.prototype.getPivots=function(){return this.pivots};d.prototype.getPivotMatrix=function(b){if(null==b)b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(this.numCols,this.numCols);else{if(b.numRows!=this.numCols)throw Error("Number of rows must be "+this.numCols);if(b.numCols!=this.numCols)throw Error("Number of columns must be "+this.numCols);b.zero()}for(var d=0;d<this.numCols;d++)b.set(this.pivots[d],d,1);return b};return d}(a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QRDecompositionHouseholderColumn_D64);
b.QRxColPivDecompositionHouseholderColumn_D64=c;c=function(){function a(){}a.findMax=function(a,b,d){var c=-1,h=b;for(b+=d;h<b;h++)d=a[h],d=0>d?-d:d,d>c&&(c=d);return c};a.findMaxArray=function(a,b,d,c){var h=-1,f=d;for(d+=c;f<d;f++)c=a.get(f,b),c=0>c?-c:c,c>h&&(h=c);return h};a.divideElements4arg=function(a,b,d,c){for(;a<b;a++)d[a]/=c};a.divideElements4argArray=function(a,b,d,c,h){for(;a<b;a++)d.set(a,c,d.get(a,c)/h)};a.divideElements=function(a,b,d,c,h){for(;a<b;a++)d[a+c]/=h};a.divideElements_Brow=
function(a,b,d,c,h,f){for(;a<b;a++)d[a]=c[a+h]/=f};a.divideElements_Bcol=function(a,b,d,c,h,f,e){for(f=a*d+f;a<b;a++)h[f]=c[a]/=e,f+=d};a.computeTauAndDivide=function(a,b,d,c,h){for(var f=0,e=a;e<b;e++)var g=d[c+e]/=h,f=f+g*g;f=Math.sqrt(f);0>d[c+a]&&(f=-f);return f};a.computeTauAndDivide4arg=function(a,b,d,c){for(var h=0,f=a;f<b;f++)var e=d[f]/=c,h=h+e*e;h=Math.sqrt(h);0>d[a]&&(h=-h);return h};a.computeTauAndDivide4argArray=function(a,b,d,c,h){for(var f=0,e=a;e<b;e++){d.set(e,c,d.get(e,c)/h);var g=
d.get(e,c),f=f+g*g}f=Math.sqrt(f);0>d.get(a,c)&&(f=-f);return f};a.rank1UpdateMultR=function(a,b,d,c,h,f,e){for(var g=c;g<a.numCols;g++)e[g]=b[h]*a.data[h*a.numCols+g];for(var k=h+1;k<f;k++)for(var m=k*a.numCols+c,u=b[k],g=c;g<a.numCols;g++)e[g]+=u*a.data[m++];for(g=c;g<a.numCols;g++)e[g]*=d;for(g=h;g<f;g++)for(u=b[g],m=g*a.numCols+c,d=c;d<a.numCols;d++)a.data[m++]-=u*e[d]};a.rank1UpdateMultRArray=function(a,b,d,c,h,f,e,g){for(var k=h;k<a.numCols;k++)g[k]=b.get(f,d)*a.data[f*a.numCols+k];for(var m=
f+1;m<e;m++)for(var u=m*a.numCols+h,r=b.get(m,d),k=h;k<a.numCols;k++)g[k]+=r*a.data[u++];for(k=h;k<a.numCols;k++)g[k]*=c;for(k=f;k<e;k++)for(r=b.get(k,d),u=k*a.numCols+h,c=h;c<a.numCols;c++)a.data[u++]-=r*g[c]};a.rank1UpdateMultR8param=function(a,b,d,c,h,f,e,g){for(var k=h;k<a.numCols;k++)g[k]=b[f+d]*a.data[f*a.numCols+k];for(var m=f+1;m<e;m++)for(var u=m*a.numCols+h,r=b[m+d],k=h;k<a.numCols;k++)g[k]+=r*a.data[u++];for(k=h;k<a.numCols;k++)g[k]*=c;for(k=f;k<e;k++)for(r=b[k+d],u=k*a.numCols+h,c=h;c<
a.numCols;c++)a.data[u++]-=r*g[c]};a.rank1UpdateMultL=function(a,b,d,c,h,f){for(;c<a.numRows;c++){for(var e=c*a.numCols+h,g=0,k=e,m=h;m<f;m++)g+=a.data[k++]*b[m];g*=-d;k=e;for(m=h;m<f;m++)a.data[k++]+=g*b[m]}};return a}();b.QrHelperFunctions_D64=c;c=function(){function b(d,c,h){this.A=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(1,1);d=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.TridiagonalDecompositionHouseholder_D64;this.symmetricAlg=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.SymmetricQRAlgorithmDecomposition_D64(d,
c);this.generalAlg=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.WatchedDoubleStepQRDecomposition_D64(c);this.computeVectors=c;this.tol=h}b.prototype.getNumberOfEigenvalues=function(){return this.symmetric?this.symmetricAlg.getNumberOfEigenvalues():this.generalAlg.getNumberOfEigenvalues()};b.prototype.getEigenvalue=function(a){return this.symmetric?this.symmetricAlg.getEigenvalue(a):this.generalAlg.getEigenvalue(a)};b.prototype.getEigenVector=function(a){if(!this.computeVectors)throw Error("Configured to not compute eignevectors");
return this.symmetric?this.symmetricAlg.getEigenVector(a):this.generalAlg.getEigenVector(a)};b.prototype.decompose=function(b){this.A.setMatrix(b);return(this.symmetric=a.kevoree.modeling.util.maths.matrix.MatrixFeatures.isSymmetricDouble(this.A,this.tol))?this.symmetricAlg.decompose(this.A):this.generalAlg.decompose(this.A)};b.prototype.inputModified=function(){return!1};return b}();b.SwitchingEigenDecomposition=c;c=function(){function b(d,c){this.computeVectorsWithValues=!1;this.decomp=d;this.computeVectors=
c;this.helper=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.SymmetricQREigenHelper;this.vector=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.SymmetricQrAlgorithm(this.helper)}b.prototype.setComputeVectorsWithValues=function(a){if(!this.computeVectors)throw Error("Compute eigenvalues has been set to false");this.computeVectorsWithValues=a};b.prototype.setMaxIterations=function(a){this.vector.setMaxIterations(a)};b.prototype.getNumberOfEigenvalues=function(){return this.helper.getMatrixSize()};
b.prototype.getEigenvalue=function(b){var d=new a.kevoree.modeling.util.maths.matrix.Complex64F;d.setValues(this.values[b],0);return d};b.prototype.getEigenVector=function(a){return this.eigenvectors[a]};b.prototype.decompose=function(a){if(a.numCols!=a.numRows)throw Error("Matrix must be square.");if(0>=a.numCols)return!1;var b=a.numRows;if(!this.decomp.decompose(a))return!1;if(null==this.diag||this.diag.length<b)this.diag=new Float64Array(b),this.off=new Float64Array(b-1);this.decomp.getDiagonal(this.diag,
this.off);this.helper.init(this.diag,this.off,b);return this.computeVectors?this.computeVectorsWithValues?this.extractTogether():this.extractSeparate(b):this.computeEigenValues()};b.prototype.inputModified=function(){return this.decomp.inputModified()};b.prototype.extractTogether=function(){this.V=this.decomp.getQ(this.V,!0);this.helper.setQ(this.V);this.vector.setFastEigenvalues(!1);if(!this.vector.process3arg(-1,null,null))return!1;this.eigenvectors=a.kevoree.modeling.util.maths.matrix.CommonOps.rowsToVector(this.V,
this.eigenvectors);this.values=this.helper.copyEigenvalues(this.values);return!0};b.prototype.extractSeparate=function(b){if(!this.computeEigenValues())return!1;this.helper.reset(b);this.diagSaved=this.helper.swapDiag(this.diagSaved);this.offSaved=this.helper.swapOff(this.offSaved);this.V=this.decomp.getQ(this.V,!0);this.vector.setQ(this.V);if(!this.vector.process(-1,null,null,this.values))return!1;this.values=this.helper.copyEigenvalues(this.values);this.eigenvectors=a.kevoree.modeling.util.maths.matrix.CommonOps.rowsToVector(this.V,
this.eigenvectors);return!0};b.prototype.computeEigenValues=function(){this.diagSaved=this.helper.copyDiag(this.diagSaved);this.offSaved=this.helper.copyOff(this.offSaved);this.vector.setQ(null);this.vector.setFastEigenvalues(!0);if(!this.vector.process3arg(-1,null,null))return!1;this.values=this.helper.copyEigenvalues(this.values);return!0};return b}();b.SymmetricQRAlgorithmDecomposition_D64=c;c=function(){function b(){this.rand=new java.util.Random;this.eigenSmall=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.EigenvalueSmall;
this.splits=new Int32Array(1)}b.prototype.setQ=function(a){this.Q=a};b.prototype.incrementSteps=function(){this.steps++};b.prototype.init=function(a,b,d){this.reset(d);this.diag=a;this.off=b};b.prototype.swapDiag=function(a){var b=this.diag;this.diag=a;return b};b.prototype.swapOff=function(a){var b=this.off;this.off=a;return b};b.prototype.reset=function(a){this.N=a;this.off=this.diag=null;this.splits.length<a&&(this.splits=new Int32Array(a));this.x1=this.numSplits=0;this.x2=a-1;this.steps=this.numExceptional=
this.lastExceptional=0;this.Q=null};b.prototype.copyDiag=function(a){if(null==a||a.length<this.N)a=new Float64Array(this.N);java.lang.System.arraycopy(this.diag,0,a,0,this.N);return a};b.prototype.copyOff=function(a){if(null==a||a.length<this.N-1)a=new Float64Array(this.N-1);java.lang.System.arraycopy(this.off,0,a,0,this.N-1);return a};b.prototype.copyEigenvalues=function(a){if(null==a||a.length<this.N)a=new Float64Array(this.N);java.lang.System.arraycopy(this.diag,0,a,0,this.N);return a};b.prototype.setSubmatrix=
function(a,b){this.x1=a;this.x2=b};b.prototype.isZero=function(b){var d=Math.abs(this.diag[b])+Math.abs(this.diag[b+1]);return Math.abs(this.off[b])<=d*a.kevoree.modeling.util.maths.matrix.CommonOps.EPS};b.prototype.performImplicitSingleStep=function(a,b){if(1==this.x2-this.x1)this.createBulge2by2(this.x1,a,b);else{this.createBulge(this.x1,a,b);for(var d=this.x1;d<this.x2-2&&0!=this.bulge;d++)this.removeBulge(d);0!=this.bulge&&this.removeBulgeEnd(this.x2-2)}};b.prototype.updateQ=function(a,b,d,c){a*=
this.N;b*=this.N;for(var h=a+this.N;a<h;){var f=this.Q.data[a],e=this.Q.data[b];this.Q.data[a++]=d*f+c*e;this.Q.data[b++]=-c*f+d*e}};b.prototype.createBulge=function(a,b,d){var c=this.diag[a],h=this.diag[a+1],f=this.off[a],e=this.off[a+1];d?(this.c=Math.cos(b),this.s=Math.sin(b),this.c2=this.c*this.c,this.s2=this.s*this.s,this.cs=this.c*this.s):this.computeRotation(c-b,f);this.diag[a]=this.c2*c+2*this.cs*f+this.s2*h;this.diag[a+1]=this.c2*h-2*this.cs*f+this.s2*c;this.off[a]=f*(this.c2-this.s2)+this.cs*
(h-c);this.off[a+1]=this.c*e;this.bulge=this.s*e;null!=this.Q&&this.updateQ(a,a+1,this.c,this.s)};b.prototype.createBulge2by2=function(a,b,d){var c=this.diag[a],h=this.diag[a+1],f=this.off[a];d?(this.c=Math.cos(b),this.s=Math.sin(b),this.c2=this.c*this.c,this.s2=this.s*this.s,this.cs=this.c*this.s):this.computeRotation(c-b,f);this.diag[a]=this.c2*c+2*this.cs*f+this.s2*h;this.diag[a+1]=this.c2*h-2*this.cs*f+this.s2*c;this.off[a]=f*(this.c2-this.s2)+this.cs*(h-c);null!=this.Q&&this.updateQ(a,a+1,this.c,
this.s)};b.prototype.computeRotation=function(a,b){if(Math.abs(b)>Math.abs(a)){var d=a/b,c=1+d*d,h=Math.sqrt(c);this.s2=1/c;this.c2=d*d/c;this.cs=d/c;this.s=1/h;this.c=d/h}else d=b/a,c=1+d*d,h=Math.sqrt(c),this.c2=1/c,this.s2=d*d/c,this.cs=d/c,this.c=1/h,this.s=d/h};b.prototype.removeBulge=function(a){var b=this.diag[a+1],d=this.diag[a+2],c=this.off[a],h=this.off[a+1],f=this.off[a+2];this.computeRotation(c,this.bulge);this.diag[a+1]=this.c2*b+2*this.cs*h+this.s2*d;this.diag[a+2]=this.c2*d-2*this.cs*
h+this.s2*b;this.off[a]=this.c*c+this.s*this.bulge;this.off[a+1]=h*(this.c2-this.s2)+this.cs*(d-b);this.off[a+2]=this.c*f;this.bulge=this.s*f;null!=this.Q&&this.updateQ(a+1,a+2,this.c,this.s)};b.prototype.removeBulgeEnd=function(a){var b=this.diag[a+1],d=this.off[a],c=this.off[a+1],h=this.diag[a+2];this.computeRotation(d,this.bulge);this.diag[a+1]=this.c2*b+2*this.cs*c+this.s2*h;this.diag[a+2]=this.c2*h-2*this.cs*c+this.s2*b;this.off[a]=this.c*d+this.s*this.bulge;this.off[a+1]=c*(this.c2-this.s2)+
this.cs*(h-b);null!=this.Q&&this.updateQ(a+1,a+2,this.c,this.s)};b.prototype.eigenvalue2by2=function(a){var b=this.diag[a],d=this.off[a],c=this.diag[a+1],h=Math.abs(b),f=Math.abs(d),e=Math.abs(c),h=h>f?h:f;e>h&&(h=e);0==h?(this.off[a]=0,this.diag[a]=0,this.diag[a+1]=0):(this.eigenSmall.symm2x2_fast(b/h,d/h,c/h),this.off[a]=0,this.diag[a]=h*this.eigenSmall.value0.real,this.diag[a+1]=h*this.eigenSmall.value1.real)};b.prototype.exceptionalShift=function(){this.numExceptional++;var a=.05*this.numExceptional;
1<a&&(a=1);a*=2*(this.rand.nextDouble()-.5);this.performImplicitSingleStep(a,!0);this.lastExceptional=this.steps};b.prototype.nextSplit=function(){if(0==this.numSplits)return!1;this.x2=this.splits[--this.numSplits];this.x1=0<this.numSplits?this.splits[this.numSplits-1]+1:0;return!0};b.prototype.computeShift=function(){return 1<=this.x2-this.x1?this.computeWilkinsonShift():this.diag[this.x2]};b.prototype.computeWilkinsonShift=function(){var a=this.diag[this.x2-1],b=this.off[this.x2-1],d=this.diag[this.x2],
c=Math.abs(a),h=Math.abs(b),f=Math.abs(d),c=c>h?c:h;f>c&&(c=f);if(0==c)throw Error("this should never happen");d/=c;this.eigenSmall.symm2x2_fast(a/c,b/c,d);a=Math.abs(this.eigenSmall.value0.real-d);d=Math.abs(this.eigenSmall.value1.real-d);return a<d?c*this.eigenSmall.value0.real:c*this.eigenSmall.value1.real};b.prototype.getMatrixSize=function(){return this.N};b.prototype.resetSteps=function(){this.lastExceptional=this.steps=0};return b}();b.SymmetricQREigenHelper=c;c=function(){function b(a){this.exceptionalThresh=
15;this.maxIterations=15*this.exceptionalThresh;this.helper=a}b.prototype.setMaxIterations=function(a){this.maxIterations=a};b.prototype.getQ=function(){return this.Q};b.prototype.setQ=function(a){this.Q=a};b.prototype.setFastEigenvalues=function(a){this.fastEigenvalues=a};b.prototype.getEigenvalue=function(a){return this.helper.diag[a]};b.prototype.getNumberOfEigenvalues=function(){return this.helper.N};b.prototype.process=function(b,d,c,h){null!=d&&this.helper.init(d,c,b);null==this.Q&&(this.Q=
a.kevoree.modeling.util.maths.matrix.CommonOps.identity1D(this.helper.N));this.helper.setQ(this.Q);this.followingScript=!0;this.eigenvalues=h;this.fastEigenvalues=!1;return this._process()};b.prototype.process3arg=function(a,b,d){null!=b&&this.helper.init(b,d,a);this.followingScript=!1;this.eigenvalues=null;return this._process()};b.prototype._process=function(){for(;0<=this.helper.x2;){if(this.helper.steps>this.maxIterations)return!1;if(this.helper.x1==this.helper.x2){if(this.helper.resetSteps(),
!this.helper.nextSplit())break}else this.fastEigenvalues&&1==this.helper.x2-this.helper.x1?(this.helper.resetSteps(),this.helper.eigenvalue2by2(this.helper.x1),this.helper.setSubmatrix(this.helper.x2,this.helper.x2)):this.helper.steps-this.helper.lastExceptional>this.exceptionalThresh?this.helper.exceptionalShift():this.performStep();this.helper.incrementSteps()}return!0};b.prototype.performStep=function(){for(var a=this.helper.x2-1;a>=this.helper.x1;a--)if(this.helper.isZero(a)){this.helper.splits[this.helper.numSplits++]=
a;this.helper.x1=a+1;return}if(this.followingScript){if(10<this.helper.steps){this.followingScript=!1;return}a=this.eigenvalues[this.helper.x2]}else a=this.helper.computeShift();this.helper.performImplicitSingleStep(a,!1)};return b}();b.SymmetricQrAlgorithm=c;c=function(){function b(){this.N=1;this.w=new Float64Array(this.N);this.b=new Float64Array(this.N);this.gammas=new Float64Array(this.N)}b.prototype.getQT=function(){return this.QT};b.prototype.getDiagonal=function(a,b){for(var d=0;d<this.N;d++)a[d]=
this.QT.data[d*this.N+d],d+1<this.N&&(b[d]=this.QT.data[d*this.N+d+1])};b.prototype.getT=function(b){if(null==b)b=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(this.N,this.N);else{if(this.N!=b.numRows||this.N!=b.numCols)throw Error("The provided H must have the same dimensions as the decomposed matrix.");b.zero()}b.data[0]=this.QT.data[0];for(var d=1;d<this.N;d++){b.set(d,d,this.QT.get(d,d));var c=this.QT.get(d-1,d);b.set(d-1,d,c);b.set(d,d-1,c)}1<this.N&&(b.data[(this.N-1)*this.N+this.N-
1]=this.QT.data[(this.N-1)*this.N+this.N-1],b.data[(this.N-1)*this.N+this.N-2]=this.QT.data[(this.N-2)*this.N+this.N-1]);return b};b.prototype.getQ=function(b,d){if(null==b)b=a.kevoree.modeling.util.maths.matrix.CommonOps.identity1D(this.N);else{if(this.N!=b.numRows||this.N!=b.numCols)throw Error("The provided H must have the same dimensions as the decomposed matrix.");a.kevoree.modeling.util.maths.matrix.CommonOps.setIdentity(b)}for(var c=0;c<this.N;c++)this.w[c]=0;if(d)for(var h=this.N-2;0<=h;h--){this.w[h+
1]=1;for(c=h+2;c<this.N;c++)this.w[c]=this.QT.data[h*this.N+c];a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultL(b,this.w,this.gammas[h+1],h+1,h+1,this.N)}else for(h=this.N-2;0<=h;h--){this.w[h+1]=1;for(c=h+2;c<this.N;c++)this.w[c]=this.QT.get(h,c);a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultR(b,this.w,this.gammas[h+1],h+1,h+1,this.N,this.b)}return b};b.prototype.decompose=function(a){this.init(a);
for(a=1;a<this.N;a++)this.similarTransform(a);return!0};b.prototype.similarTransform=function(b){for(var d=this.QT.data,c=0,h=(b-1)*this.N,f=b;f<this.N;f++){var e=Math.abs(d[h+f]);e>c&&(c=e)}0<c?(f=a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.computeTauAndDivide(b,this.N,d,h,c),e=d[h+b]+f,a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.divideElements(b+1,this.N,d,h,e),d[h+b]=1,e/=f,this.gammas[b]=e,this.householderSymmetric(b,e),
d[h+b]=-f*c):this.gammas[b]=0};b.prototype.householderSymmetric=function(a,b){for(var d=(a-1)*this.N,c=a;c<this.N;c++){for(var h=0,f=a;f<c;f++)h+=this.QT.data[f*this.N+c]*this.QT.data[d+f];for(f=c;f<this.N;f++)h+=this.QT.data[c*this.N+f]*this.QT.data[d+f];this.w[c]=-b*h}f=0;for(c=a;c<this.N;c++)f+=this.QT.data[d+c]*this.w[c];f=-.5*f*b;for(c=a;c<this.N;c++)this.w[c]+=f*this.QT.data[d+c];for(c=a;c<this.N;c++)for(var h=this.w[c],e=this.QT.data[d+c],g=c*this.N,f=c;f<this.N;f++)this.QT.data[g+f]+=h*this.QT.data[d+
f]+this.w[f]*e};b.prototype.init=function(a){if(a.numRows!=a.numCols)throw Error("Must be square");a.numCols!=this.N&&(this.N=a.numCols,this.w.length<this.N&&(this.w=new Float64Array(this.N),this.gammas=new Float64Array(this.N),this.b=new Float64Array(this.N)));this.QT=a};b.prototype.inputModified=function(){return!0};return b}();b.TridiagonalDecompositionHouseholder_D64=c;c=function(){function b(d){this.hessenberg=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.HessenbergSimilarDecomposition_D64(10);
this.algValue=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.WatchedDoubleStepQREigenvalue;this.algVector=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.WatchedDoubleStepQREigenvector;this.computeVectors=d}b.prototype.decompose=function(a){if(!this.hessenberg.decompose(a))return!1;this.H=this.hessenberg.getH(null);this.algValue.getImplicitQR().createR=!1;if(!this.algValue.process(this.H))return!1;this.algValue.getImplicitQR().createR=!0;return this.computeVectors?this.algVector.process(this.algValue.getImplicitQR(),
this.H,this.hessenberg.getQ(null)):!0};b.prototype.inputModified=function(){return this.hessenberg.inputModified()};b.prototype.getNumberOfEigenvalues=function(){return this.algValue.getEigenvalues().length};b.prototype.getEigenvalue=function(a){return this.algValue.getEigenvalues()[a]};b.prototype.getEigenVector=function(a){return this.algVector.getEigenvectors()[a]};return b}();b.WatchedDoubleStepQRDecomposition_D64=c;c=function(){function b(){this.rand=new java.util.Random;this.valueSmall=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.EigenvalueSmall;
this.temp=new Float64Array(9);this.useStandardEq=this.checkUncountable=this.checkOrthogonal=this.checkHessenberg=this.printHumps=!1;this.normalize=this.useCareful2x2=!0;this.exceptionalThreshold=20;this.maxIterations=20*this.exceptionalThreshold;this.createR=!0}b.prototype.incrementSteps=function(){this.steps++};b.prototype.setQ=function(a){this.Q=a};b.prototype.addEigenvalue=function(a){this.numStepsFind[this.numEigen]=this.steps;this.eigenvalues[this.numEigen].setValues(a,0);this.numEigen++;this.lastExceptional=
this.steps=0};b.prototype.addEigenvalue2arg=function(a,b){this.numStepsFind[this.numEigen]=this.steps;this.eigenvalues[this.numEigen].setValues(a,b);this.numEigen++;this.lastExceptional=this.steps=0};b.prototype.setChecks=function(a,b,d){this.checkHessenberg=a;this.checkOrthogonal=b;this.checkUncountable=d};b.prototype.isZero=function(b,d){var c=Math.abs(this.A.get(b,d)),h=Math.abs(this.A.get(b-1,d)),f=Math.abs(this.A.get(b,d+1));return c<=.5*a.kevoree.modeling.util.maths.matrix.CommonOps.EPS*(h+
f)};b.prototype.setup=function(b){if(b.numRows!=b.numCols)throw Error("Must be square");this.N!=b.numRows?(this.N=b.numRows,this.A=b.copy(),this.u=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b.numRows,1),this._temp=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(b.numRows,1),this.numStepsFind=new Int32Array(b.numRows)):this.A.setMatrix(b);for(b=2;b<this.N;b++)for(var d=0;d<b-1;d++)this.A.set(b,d,0);this.eigenvalues=[];for(b=0;b<this.eigenvalues.length;b++)this.eigenvalues[b]=new a.kevoree.modeling.util.maths.matrix.Complex64F;
this.steps=this.numExceptional=this.lastExceptional=this.numEigen=0};b.prototype.exceptionalShift=function(a,b){this.printHumps&&console.log("Performing exceptional implicit double step");var d=Math.abs(this.A.get(b,b));0==d&&(d=1);this.numExceptional++;var c=1-Math.pow(.1,this.numExceptional),d=d*(c+2*(1-c)*(this.rand.nextDouble()-.5));this.rand.nextBoolean()&&(d=-d);this.performImplicitSingleStep(a,b,d);this.lastExceptional=this.steps};b.prototype.implicitDoubleStep=function(a,b){this.printHumps&&
console.log("Performing implicit double step");var d=this.A.get(b-1,b-1),c=this.A.get(b-1,b),h=this.A.get(b,b-1),f=this.A.get(b,b),e=this.A.get(a,a),g=this.A.get(a+1,a),k=this.A.get(a,a+1),m=this.A.get(a+1,a+1),u=this.A.get(a+2,a+1);if(this.normalize){this.temp[0]=e;this.temp[1]=g;this.temp[2]=k;this.temp[3]=m;this.temp[4]=u;this.temp[5]=d;this.temp[6]=f;this.temp[7]=c;this.temp[8]=h;for(var r=Math.abs(this.temp[0]),v=1;v<this.temp.length;v++)Math.abs(this.temp[v])>r&&(r=Math.abs(this.temp[v]));e/=
r;g/=r;k/=r;m/=r;u/=r;d/=r;f/=r;c/=r;h/=r}this.useStandardEq?(c=((e-d)*(e-f)-h*c)/g+k,d=e+m-d-f,g=u):(c=(e-d)*(e-f)-h*c+k*g,d=(e+m-d-f)*g,g*=u);this.performImplicitDoubleStep5arg(a,b,c,d,g)};b.prototype.performImplicitDoubleStep=function(a,b,d,c){var h=this.A.get(a,a),f=this.A.get(a+1,a),e=this.A.get(a,a+1),g=this.A.get(a+1,a+1),k=this.A.get(a+2,a+1),m=2*d;d=d*d+c*c;this.useStandardEq?(e=(h*h-m*h+d)/f+e,h=h+g-m,f=k):(e=h*h-m*h+d+e*f,h=(h+g-m)*f,f*=k);this.performImplicitDoubleStep5arg(a,b,e,h,f)};
b.prototype.performImplicitDoubleStep5arg=function(b,d,c,h,f){if(this.bulgeDoubleStepQn6arg(b,c,h,f,0,!1)){for(null!=this.Q&&a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultR(this.Q,this.u.data,this.gamma,0,b,b+3,this._temp.data);b<d-2;b++)this.bulgeDoubleStepQn(b)&&null!=this.Q&&a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultR(this.Q,this.u.data,this.gamma,0,b+1,b+4,this._temp.data);0<=d-2&&this.bulgeSingleStepQn(d-
2)&&null!=this.Q&&a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultR(this.Q,this.u.data,this.gamma,0,d-1,d+1,this._temp.data)}};b.prototype.performImplicitSingleStep=function(b,d,c){if(this.createBulgeSingleStep(b,c))for(null!=this.Q&&a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultR(this.Q,this.u.data,this.gamma,0,b,b+2,this._temp.data);b<d-1;b++)this.bulgeSingleStepQn(b)&&null!=this.Q&&a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultR(this.Q,
this.u.data,this.gamma,0,b+1,b+3,this._temp.data)};b.prototype.createBulgeSingleStep=function(b,d){var c=this.A.get(b,b)-d,h=this.A.get(b+1,b),f=Math.abs(this.A.get(b,b))*a.kevoree.modeling.util.maths.matrix.CommonOps.EPS;return this.bulgeSingleStepQn5arg(b,c,h,f,!1)};b.prototype.bulgeDoubleStepQn=function(b){var d=this.A.get(b+1,b),c=this.A.get(b+2,b),h=this.A.get(b+3,b),f=Math.abs(this.A.get(b,b))*a.kevoree.modeling.util.maths.matrix.CommonOps.EPS;return this.bulgeDoubleStepQn6arg(b+1,d,c,h,f,!0)};
b.prototype.bulgeDoubleStepQn6arg=function(b,d,c,h,f,e){var g;if(this.normalize){g=Math.abs(d);var k=Math.abs(c),m=Math.abs(h);g=g>k?g:k;m>g&&(g=m);if(g<=f)return e&&(this.A.set(b,b-1,0),this.A.set(b+1,b-1,0),this.A.set(b+2,b-1,0)),!1;d/=g;c/=g;h/=g}else g=1;f=Math.sqrt(d*d+c*c+h*h);0>d&&(f=-f);d+=f;this.u.set(b,0,1);this.u.set(b+1,0,c/d);this.u.set(b+2,0,h/d);this.gamma=d/f;a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultR(this.A,this.u.data,this.gamma,
0,b,b+3,this._temp.data);e&&(this.A.set(b,b-1,-g*f),this.A.set(b+1,b-1,0),this.A.set(b+2,b-1,0));a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultL(this.A,this.u.data,this.gamma,0,b,b+3);return!0};b.prototype.bulgeSingleStepQn=function(b){var d=this.A.get(b+1,b),c=this.A.get(b+2,b),h=Math.abs(this.A.get(b,b))*a.kevoree.modeling.util.maths.matrix.CommonOps.EPS;return this.bulgeSingleStepQn5arg(b+1,d,c,h,!0)};b.prototype.bulgeSingleStepQn5arg=function(b,
d,c,h,f){var e;if(this.normalize){e=Math.abs(d);e<Math.abs(c)&&(e=Math.abs(c));if(e<=h)return f&&(this.A.set(b,b-1,0),this.A.set(b+1,b-1,0)),!1;d/=e;c/=e}else e=1;h=Math.sqrt(d*d+c*c);0>d&&(h=-h);d+=h;this.u.set(b,0,1);this.u.set(b+1,0,c/d);this.gamma=d/h;a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultR(this.A,this.u.data,this.gamma,0,b,b+2,this._temp.data);f&&(this.A.set(b,b-1,-e*h),this.A.set(b+1,b-1,0));a.kevoree.modeling.util.maths.matrix.solvers.decomposition.QrHelperFunctions_D64.rank1UpdateMultL(this.A,
this.u.data,this.gamma,0,b,b+2);return!0};b.prototype.eigen2by2_scale=function(a,b,d,c){var h=Math.abs(a),f=Math.abs(c),e=Math.abs(b),g=Math.abs(d),h=h>f?h:f;h<e&&(h=e);h<g&&(h=g);0==h?(this.valueSmall.value0.real=0,this.valueSmall.value0.imaginary=0,this.valueSmall.value1.real=0,this.valueSmall.value1.imaginary=0):(b/=h,d/=h,a/=h,c/=h,this.useCareful2x2?this.valueSmall.value2x2(a,b,d,c):this.valueSmall.value2x2_fast(a,b,d,c),this.valueSmall.value0.real*=h,this.valueSmall.value0.imaginary*=h,this.valueSmall.value1.real*=
h,this.valueSmall.value1.imaginary*=h)};b.prototype.getNumberOfEigenvalues=function(){return this.numEigen};b.prototype.getEigenvalues=function(){return this.eigenvalues};b.prototype.addComputedEigen2x2=function(b,d){this.eigen2by2_scale(this.A.get(b,b),this.A.get(b,d),this.A.get(d,b),this.A.get(d,d));if(this.checkUncountable&&(a.kevoree.modeling.util.PrimitiveHelper.isNaN(this.valueSmall.value0.real)||a.kevoree.modeling.util.PrimitiveHelper.isNaN(this.valueSmall.value1.real)))throw Error("Uncountable");
this.addEigenvalue2arg(this.valueSmall.value0.real,this.valueSmall.value0.imaginary);this.addEigenvalue2arg(this.valueSmall.value1.real,this.valueSmall.value1.imaginary)};b.prototype.isReal2x2=function(a,b){this.eigen2by2_scale(this.A.get(a,a),this.A.get(a,b),this.A.get(b,a),this.A.get(b,b));return this.valueSmall.value0.isReal()};b.prototype.addEigenAt=function(a){this.addEigenvalue(this.A.get(a,a))};b.prototype.printSteps=function(){for(var a=0;a<this.N;a++)console.log("Step["+a+"] \x3d "+this.numStepsFind[a])};
return b}();b.WatchedDoubleStepQREigen=c;c=function(){function b(){this.implicitQR=new a.kevoree.modeling.util.maths.matrix.solvers.decomposition.WatchedDoubleStepQREigen}b.prototype.setup=function(a){this.implicitQR.setup(a);this.implicitQR.setQ(null);this.splits=new Int32Array(a.numRows);this.numSplits=0};b.prototype.process=function(b){this.setup(b);this.x1=0;for(this.x2=b.numRows-1;this.implicitQR.numEigen<b.numRows;){if(this.implicitQR.steps>this.implicitQR.maxIterations)return!1;this.implicitQR.incrementSteps();
if(this.x2<this.x1)this.moveToNextSplit();else if(0==this.x2-this.x1)this.implicitQR.addEigenAt(this.x1),this.x2--;else if(1==this.x2-this.x1)this.implicitQR.addComputedEigen2x2(this.x1,this.x2),this.x2-=2;else if(this.implicitQR.steps-this.implicitQR.lastExceptional>this.implicitQR.exceptionalThreshold){if(a.kevoree.modeling.util.PrimitiveHelper.isNaN(this.implicitQR.A.get(this.x2,this.x2)))return!1;this.implicitQR.exceptionalShift(this.x1,this.x2)}else this.implicitQR.isZero(this.x2,this.x2-1)?
(this.implicitQR.addEigenAt(this.x2),this.x2--):this.performIteration()}return!0};b.prototype.moveToNextSplit=function(){if(0>=this.numSplits)throw Error("bad");this.x2=this.splits[--this.numSplits];this.x1=0<this.numSplits?this.splits[this.numSplits-1]+1:0};b.prototype.performIteration=function(){for(var a=!1,b=this.x2;b>this.x1;b--)if(this.implicitQR.isZero(b,b-1)){this.x1=b;this.splits[this.numSplits++]=b-1;a=!0;break}a||this.implicitQR.implicitDoubleStep(this.x1,this.x2)};b.prototype.getNumberOfEigenvalues=
function(){return this.implicitQR.getNumberOfEigenvalues()};b.prototype.getEigenvalues=function(){return this.implicitQR.getEigenvalues()};b.prototype.getImplicitQR=function(){return this.implicitQR};return b}();b.WatchedDoubleStepQREigenvalue=c;c=function(){function b(){}b.prototype.process=function(b,d,c){this.implicit=b;this.N!=d.numRows?(this.N=d.numRows,this.Q=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(this.N,this.N),this.splits=new Int32Array(this.N),this.origEigenvalues=[],this.eigenvectors=
[],this.eigenvectorTemp=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(this.N,1),this.solver=new a.kevoree.modeling.util.maths.matrix.solvers.LinearSolverLu_D64(new a.kevoree.modeling.util.maths.matrix.solvers.LUDecompositionAlt_D64)):this.eigenvectors=[];java.lang.System.arraycopy(b.eigenvalues,0,this.origEigenvalues,0,this.N);b.setup(d);b.setQ(this.Q);this.numSplits=0;this.onscript=!0;return this.findQandR()?this.extractVectors(c):!1};b.prototype.extractVectors=function(b){a.kevoree.modeling.util.maths.matrix.CommonOps.memset(this.eigenvectorTemp.data,
0);for(var d=!0,c=0;c<this.N;c++){var h=this.implicit.eigenvalues[this.N-c-1];d&&!h.isReal()&&(d=!1);h.isReal()&&null==this.eigenvectors[this.N-c-1]&&this.solveEigenvectorDuplicateEigenvalue(h.real,c,d)}if(null!=b)for(d=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(this.N,1),c=0;c<this.N;c++)h=this.eigenvectors[c],null!=h&&(a.kevoree.modeling.util.maths.matrix.CommonOps.mult(b,h,d),this.eigenvectors[c]=d,d=h);return!0};b.prototype.solveEigenvectorDuplicateEigenvalue=function(b,d,c){var h=
Math.abs(b);0==h&&(h=1);this.eigenvectorTemp.reshapeBoolean(this.N,1,!1);this.eigenvectorTemp.zero();0<d&&(c?this.solveUsingTriangle(b,d,this.eigenvectorTemp):this.solveWithLU(b,d,this.eigenvectorTemp));for(this.eigenvectorTemp.reshapeBoolean(this.N,1,!1);d<this.N;d++)c=this.implicit.eigenvalues[this.N-d-1],c.isReal()&&Math.abs(c.real-b)/h<100*a.kevoree.modeling.util.maths.matrix.CommonOps.EPS&&(this.eigenvectorTemp.data[d]=1,c=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(this.N,1),a.kevoree.modeling.util.maths.matrix.CommonOps.multTransA(this.Q,
this.eigenvectorTemp,c),this.eigenvectors[this.N-d-1]=c,a.kevoree.modeling.util.maths.matrix.CommonOps.normalizeF(c),this.eigenvectorTemp.data[d]=0)};b.prototype.solveUsingTriangle=function(b,d,c){for(var h=0;h<d;h++)this.implicit.A.add(h,h,-b);a.kevoree.modeling.util.maths.matrix.CommonOps.subvector(this.implicit.A,0,d,d,!1,0,c);a.kevoree.modeling.util.maths.matrix.CommonOps.changeSign(c);a.kevoree.modeling.util.maths.matrix.solvers.TriangularSolver.solveU(this.implicit.A.data,c.data,this.implicit.A.numRows,
0,d);for(h=0;h<d;h++)this.implicit.A.add(h,h,b)};b.prototype.solveWithLU=function(b,d,c){var h=new a.kevoree.modeling.util.maths.matrix.DenseMatrix64F(d,d);a.kevoree.modeling.util.maths.matrix.CommonOps.extract6M(this.implicit.A,0,d,0,d,h,0,0);for(var f=0;f<d;f++)h.add(f,f,-b);c.reshapeBoolean(d,1,!1);a.kevoree.modeling.util.maths.matrix.CommonOps.subvector(this.implicit.A,0,d,d,!1,0,c);a.kevoree.modeling.util.maths.matrix.CommonOps.changeSign(c);if(!this.solver.setA(h))throw Error("Solve failed");
this.solver.solve(c,c)};b.prototype.findQandR=function(){a.kevoree.modeling.util.maths.matrix.CommonOps.setIdentity(this.Q);this.x1=0;this.x2=this.N-1;for(this.indexVal=0;this.indexVal<this.N;)if(!this.findNextEigenvalue())return!1;return!0};b.prototype.findNextEigenvalue=function(){for(var a=!1;!a&&this.implicit.steps<this.implicit.maxIterations;)this.implicit.incrementSteps(),this.x2<this.x1?this.moveToNextSplit():0==this.x2-this.x1?(this.implicit.addEigenAt(this.x1),this.x2--,this.indexVal++,a=
!0):1!=this.x2-this.x1||this.implicit.isReal2x2(this.x1,this.x2)?this.implicit.steps-this.implicit.lastExceptional>this.implicit.exceptionalThreshold?(this.implicit.exceptionalShift(this.x1,this.x2),this.implicit.lastExceptional=this.implicit.steps):this.implicit.isZero(this.x2,this.x2-1)?(this.implicit.addEigenAt(this.x2),a=!0,this.x2--,this.indexVal++):this.checkSplitPerformImplicit():(this.implicit.addComputedEigen2x2(this.x1,this.x2),this.x2-=2,this.indexVal+=2,a=!0);return a};b.prototype.checkSplitPerformImplicit=
function(){for(var a=this.x2;a>this.x1;a--)if(this.implicit.isZero(a,a-1)){this.x1=a;this.splits[this.numSplits++]=a-1;return}this.onscript?this.implicit.steps>this.implicit.exceptionalThreshold/2?this.onscript=!1:(a=this.origEigenvalues[this.indexVal],a.isReal()?this.implicit.performImplicitSingleStep(this.x1,this.x2,a.getReal()):this.x2<this.N-2?this.implicit.performImplicitDoubleStep(this.x1,this.x2,a.real,a.imaginary):this.onscript=!1):1<=this.x2-this.x1&&this.x2<this.N-2?this.implicit.implicitDoubleStep(this.x1,
this.x2):this.implicit.performImplicitSingleStep(this.x1,this.x2,this.implicit.A.get(this.x2,this.x2))};b.prototype.moveToNextSplit=function(){if(0>=this.numSplits)throw Error("bad");this.x2=this.splits[--this.numSplits];this.x1=0<this.numSplits?this.splits[this.numSplits-1]+1:0};b.prototype.getQ=function(){return this.Q};b.prototype.getImplicit=function(){return this.implicit};b.prototype.getEigenvectors=function(){return this.eigenvectors};b.prototype.getEigenvalues=function(){return this.implicit.eigenvalues};
return b}();b.WatchedDoubleStepQREigenvector=c})(c.decomposition||(c.decomposition={}))})(g.solvers||(g.solvers={}))})(m.matrix||(m.matrix={}));(function(g){(function(e){var c=function(){function a(){}a.prototype.equals=function(a){return this==a};a.values=function(){return a._KBlasDirectionTypeVALUES};a.FORWARD=new a;a.BACKWARD=new a;a._KBlasDirectionTypeVALUES=[a.FORWARD,a.BACKWARD];return a}();e.KBlasDirectionType=c;c=function(){function a(){}a.prototype.equals=function(a){return this==a};a.values=
function(){return a._KBlasMajorTypeVALUES};a.COLUMNWISE=new a;a.ROWWISE=new a;a._KBlasMajorTypeVALUES=[a.COLUMNWISE,a.ROWWISE];return a}();e.KBlasMajorType=c;c=function(){function a(){}a.prototype.equals=function(a){return this==a};a.values=function(){return a._KBlasOrientationTypeVALUES};a.UPPER=new a;a.LOWER=new a;a._KBlasOrientationTypeVALUES=[a.UPPER,a.LOWER];return a}();e.KBlasOrientationType=c;c=function(){function a(){}a.prototype.equals=function(a){return this==a};a.values=function(){return a._KBlasSideTypeVALUES};
a.LEFT=new a;a.RIGHT=new a;a._KBlasSideTypeVALUES=[a.LEFT,a.RIGHT];return a}();e.KBlasSideType=c;c=function(){function a(){}a.prototype.equals=function(a){return this==a};a.values=function(){return a._KBlasTransposeTypeVALUES};a.NOTRANSPOSE=new a;a.TRANSPOSE=new a;a.CONJUGATE=new a;a._KBlasTransposeTypeVALUES=[a.NOTRANSPOSE,a.TRANSPOSE,a.CONJUGATE];return a}();e.KBlasTransposeType=c;c=function(){function a(){}a.prototype.equals=function(a){return this==a};a.values=function(){return a._KBlasUnitTypeVALUES};
a.UNIT=new a;a.NONUNIT=new a;a._KBlasUnitTypeVALUES=[a.UNIT,a.NONUNIT];return a}();e.KBlasUnitType=c;(function(b){var d=function(){function b(){}b.prototype.dgemm=function(b,d,c,f,e,g,k,m,p,B,t,u,r,v,q,x){var y=0,n=0,K=0,z=0,n=y=!1,y=b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE),n=d.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE);if(0==g)if(0==r)for(K=1,b=f;0<b;b--){n=1;for(d=c;0<d;d--)v[n-1+(K-1)*x+q]=0,n++;K++}else for(K=
1,b=f;0<b;b--){n=1;for(d=c;0<d;d--)v[n-1+(K-1)*x+q]*=r,n++;K++}else if(n)if(y)for(K=1,b=f;0<b;b--){if(0==r)for(n=1,d=c;0<d;d--)v[n-1+(K-1)*x+q]=0,n++;else for(n=1,d=c;!(v[n-1+(K-1)*x+q]*=r,n++,d--,0>=d););z=1;for(d=e;0<d;d--){if(0!=B[z-1+(K-1)*u+t])for(y=g*B[z-1+(K-1)*u+t],n=1,f=c;0<f;f--)v[n-1+(K-1)*x+q]+=y*k[n-1+(z-1)*p+m],n++;z++}K++}else for(K=1,b=f;0<b;b--){n=1;for(d=c;0<d;d--){y=0;z=1;for(f=e;0<f;f--)y+=k[z-1+(n-1)*p+m]*B[z-1+(K-1)*u+t],z++;v[n-1+(K-1)*x+q]=0==r?g*y:g*y+r*v[n-1+(K-1)*x+q];n++}K++}else if(y)for(K=
1,b=f;0<b;b--){if(0==r)for(n=1,d=c;0<d;d--)v[n-1+(K-1)*x+q]=0,n++;else if(1!=r)for(n=1,d=c;!(v[n-1+(K-1)*x+q]*=r,n++,d--,0>=d););z=1;for(d=e;0<d;d--){if(0!=B[K-1+(z-1)*u+t])for(y=g*B[K-1+(z-1)*u+t],n=1,f=c;0<f;f--)v[n-1+(K-1)*x+q]+=y*k[n-1+(z-1)*p+m],n++;z++}K++}else for(K=1,b=f;0<b;b--){n=1;for(d=c;0<d;d--){y=0;z=1;for(f=e;0<f;f--)y+=k[z-1+(n-1)*p+m]*B[K-1+(z-1)*u+t],z++;v[n-1+(K-1)*x+q]=0==r?g*y:g*y+r*v[n-1+(K-1)*x+q];n++}K++}};b.prototype.dgetri=function(b,d,c,f,e,g,k,m,p,B){var t=0,u=0,r=t=0,
v=0,q=0,x=0,y=0,u=x=0;B[0]=0;x=this.ilaenv(1,"DGETRI"," ",b,-1,-1,-1);k[m]=b*x;t=-1!=p?0:1;0>b?B[0]=-1:f<Math.max(1,b)&&(B[0]=-3);if(0==B[0]&&0==t&&0!=b&&(this.dtrtri(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT,b,d,c,f,B),!(0<B[0]))){y=b;0!=(x<b?1:0)?(t=Math.max(y*x,1),p<t&&(x=this.floorDiv(p,y),Math.max(2,this.ilaenv(2,"DGETRI"," ",b,-1,-1,-1)))):t=b;if(x>=b)for(p=r=b;0<p;p--){u=r+1;for(B=b-(r+1)+1;0<B;B--)k[u-
1+m]=d[u-1+(r-1)*f+c],d[u-1+(r-1)*f+c]=0,u++;r<b&&this.dgemv(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,b,b-r,-1,d,r*f+c,f,k,r+m,1,1,d,(r-1)*f+c,1);r+=-1}else for(r=u=this.floorDiv(b-1,x)*x+1,p=this.floorDiv(1-u+-x,-x);0<p;p--){v=Math.min(x,b-r+1);q=r;for(B=v;0<B;B--){for(var u=q+1,n=b-(q+1)+1;0<n;n--)k[u+(q-r)*y-1+m]=d[u-1+(q-1)*f+c],d[u-1+(q-1)*f+c]=0,u++;q++}r+v<=b&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,
b,v,b-r-v+1,-1,d,(r+v-1)*f+c,f,k,r+v-1+m,y,1,d,(r-1)*f+c,f);this.dtrsm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,b,v,1,k,r-1+m,y,d,(r-1)*f+c,f);r+=-x}r=b-1;for(p=-1+b;0<p;p--)x=e[r-1+g],x!=r&&this.dswap(b,d,(r-1)*f+c,1,d,(x-1)*f+c,1),r+=-1;k[m]=t}};b.prototype.dgetrf=
function(b,d,c,f,e,g,k,m){var p=0,B=m[0]=0,t=0,u=0;m[0]=0;var r=new Int32Array(1);r[0]=0;0>b?m[0]=-1:0>d?m[0]=-2:e<Math.max(1,b)&&(m[0]=-4);if(0==m[0]&&0!=d)if(u=this.ilaenv(1,"DGETRF"," ",b,d,-1,-1),u>=Math.min(b,d))this.dgetf2(b,d,c,f,e,g,k,m);else for(B=1,m=this.floorDiv(Math.min(b,d)-1+u,u);0<m;m--){t=Math.min(Math.min(b,d)-B+1,u);this.dgetf2(b-B+1,t,c,B-1+(B-1)*e+f,e,g,B-1+k,r);for(var p=B,v=Math.min(b,B+t-1)-B+1;0<v;v--)g[p-1+k]=B-1+g[p-1+k],p++;this.dlaswp(B-1,c,f,e,B,B+t-1,g,k,1);B+t<=d&&
(this.dlaswp(d-B-t+1,c,(B+t-1)*e+f,e,B,B+t-1,g,k,1),this.dtrsm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,t,d-B-t+1,1,c,B-1+(B-1)*e+f,e,c,B-1+(B+t-1)*e+f,e),B+t<=b&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,
b-B-t+1,d-B-t+1,t,-1,c,B+t-1+(B-1)*e+f,e,c,B-1+(B+t-1)*e+f,e,1,c,B+t-1+(B+t-1)*e+f,e));B+=u}};b.prototype.dgetrs=function(b,d,c,f,e,g,k,m,p,B,t,u){var r=!1;u[0]=0;(r=b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE))?(this.dlaswp(c,p,B,t,1,d,k,m,1),this.dtrsm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,
a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,d,c,1,f,e,g,p,B,t),this.dtrsm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT,d,c,1,f,e,g,p,B,t)):(this.dtrsm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,
a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT,d,c,1,f,e,g,p,B,t),this.dtrsm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,d,c,1,f,e,g,p,B,t),this.dlaswp(c,p,B,t,1,d,k,m,-1))};b.prototype.dorgqr=
function(b,d,c,f,e,g,k,m,p,B,t,u){var r=0,v=0,q=0,x=new Int32Array(1),y=r=0,n=q=0,z=n=0,G=r=0,v=0;u[0]=0;G=this.ilaenv(1,"DORGQR"," ",b,d,c,-1);r=Math.max(1,d)*G;p[B]=r;r=-1!=t?0:1;0!=(0<=b?0:1)?u[0]=-1:0!=(0==(d<=b?0:1)?0:1)?u[0]=-2:0!=(0==(c<=d?0:1)?0:1)?u[0]=-3:0!=(g>=Math.max(1,b)?0:1)&&(u[0]=-5);if(0==(0==u[0]?0:1)&&0==r)if(0!=(0<d?0:1))p[B]=1;else{v=0;r=d;0!=(0!=(G>=c?0:1)?1:0)&&(v=Math.max(0,this.ilaenv(3,"DORGQR"," ",b,d,c,-1)),0!=(v>=c?0:1)&&(z=d,r=z*G,0!=(t>=r?0:1)&&(G=t/z,Math.max(2,this.ilaenv(2,
"DORGQR"," ",b,d,c,-1)))));if(0!=(0!=(v>=c?0:1)?1:0))for(q=(c-v-1)/G*G,n=Math.min(c,q+G),y=n+1,t=d-(n+1)+1;0<t;t--){v=1;for(u=n;0<u;u--)f[v-1+(y-1)*g+e]=0,v+=1;y+=1}else n=0;0!=(n>=d?0:1)&&this.dorg2r(b-n,d-n,c-n,f,n+n*g+e,g,k,n+m,p,B,x);if(0!=(0>=n?0:1))for(v=q+1,t=(1-(q+1)+-G)/-G;0<t;t--){q=Math.min(G,c-v+1);0!=(v+q>d?0:1)&&(this.dlarft(a.kevoree.modeling.util.maths.structure.blas.KBlasDirectionType.FORWARD,a.kevoree.modeling.util.maths.structure.blas.KBlasMajorType.COLUMNWISE,b-v+1,q,f,v-1+(v-
1)*g+e,g,k,v-1+m,p,B,z),this.dlarfb(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasDirectionType.FORWARD,a.kevoree.modeling.util.maths.structure.blas.KBlasMajorType.COLUMNWISE,b-v+1,d-v-q+1,q,f,v-1+(v-1)*g+e,g,p,B,z,f,v-1+(v+q-1)*g+e,g,p,q+B,z));this.dorg2r(b-v+1,q,q,f,v-1+(v-1)*g+e,g,k,v-1+m,p,B,x);y=v;for(u=v+q-1-v+1;0<u;u--){n=1;for(q=v-1;0<q;q--)f[n-1+
(y-1)*g+e]=0,n+=1;y+=1}v+=-G}p[B]=r}};b.prototype.dgeqrf=function(b,d,c,f,e,g,k,m,p,B,t){var u=0,r=u=0,v=new Int32Array(1),q=0,x=0,y=0,n=0,r=0;t[0]=0;n=this.ilaenv(1,"DGEQRF"," ",b,d,-1,-1);m[p]=d*n;u=-1!=B?0:1;0!=(0<=b?0:1)?t[0]=-1:0!=(0<=d?0:1)?t[0]=-2:0!=(e>=Math.max(1,b)?0:1)&&(t[0]=-4);if(0==(0==t[0]?0:1)&&0==u)if(x=Math.min(b,d),0!=(0!=x?0:1))m[p]=1;else{r=0;q=d;0!=(0!=(n>=x?0:1)?1:0)&&(r=Math.max(0,this.ilaenv(3,"DGEQRF"," ",b,d,-1,-1)),0!=(r>=x?0:1)&&(y=d,q=y*n,0!=(B>=q?0:1)&&(n=B/y,Math.max(2,
this.ilaenv(2,"DGEQRF"," ",b,d,-1,-1)))));if(0!=(0!=(r>=x?0:1)?1:0))for(u=1,B=(x-r-1+n)/n;0<B;B--)r=Math.min(x-u+1,n),this.dgeqr2(b-u+1,r,c,u-1+(u-1)*e+f,e,g,u-1+k,m,p,v),0!=(u+r>d?0:1)&&(this.dlarft(a.kevoree.modeling.util.maths.structure.blas.KBlasDirectionType.FORWARD,a.kevoree.modeling.util.maths.structure.blas.KBlasMajorType.COLUMNWISE,b-u+1,r,c,u-1+(u-1)*e+f,e,g,u-1+k,m,p,y),this.dlarfb(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,
a.kevoree.modeling.util.maths.structure.blas.KBlasDirectionType.FORWARD,a.kevoree.modeling.util.maths.structure.blas.KBlasMajorType.COLUMNWISE,b-u+1,d-u-r+1,r,c,u-1+(u-1)*e+f,e,m,p,y,c,u-1+(u+r-1)*e+f,e,m,r+p,y)),u+=n;else u=1;0!=(u>x?0:1)&&this.dgeqr2(b-u+1,d-u+1,c,u-1+(u-1)*e+f,e,g,u-1+k,m,p,v);m[p]=q}};b.prototype.dorg2r=function(b,d,c,f,e,g,k,m,p,B,t){var u=0,r=u=0;t[0]=0;0!=(0<=b?0:1)?t[0]=-1:0!=(0==(d<=b?0:1)?0:1)?t[0]=-2:0!=(0==(c<=d?0:1)?0:1)?t[0]=-3:0!=(g>=Math.max(1,b)?0:1)&&(t[0]=-5);if(0==
(0==t[0]?0:1)&&0==(0<d?0:1)){for(var u=c+1,v=d-(c+1)+1;0<v;v--){r=1;for(t=b;0<t;t--)f[r-1+(u-1)*g+e]=0,r+=1;f[u-1+(u-1)*g+e]=1;u+=1}u=c;for(v=(1-c+-1)/-1;0<v;v--){0!=(u>=d?0:1)&&(f[u-1+(u-1)*g+e]=1,this.dlarf(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT,b-u+1,d-u,f,u-1+(u-1)*g+e,1,k[u-1+m],f,u-1+u*g+e,g,p,B));0!=(u>=b?0:1)&&this.dscal(b-u,-k[u-1+m],f,u+(u-1)*g+e,1);f[u-1+(u-1)*g+e]=1-k[u-1+m];r=1;for(t=u-1;0<t;t--)f[r-1+(u-1)*g+e]=0,r+=1;u+=-1}}};b.prototype.dlarfb=function(b,d,
c,f,e,g,k,m,p,B,t,u,r,v,q,x,y,n,z){var G,E=G=0;if(0==(0==(0<g?0:1)?0:1))if(G=d.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE)?a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE:a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,f.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasMajorType.COLUMNWISE))if(c.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasDirectionType.FORWARD))if(b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT)){E=
1;for(b=k;0<b;b--)this.dcopy(g,v,E-1+q,x,y,(E-1)*z+n,1),E+=1;this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,g,k,1,m,p,B,y,n,z);0!=(e<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,
g,k,e-k,1,v,k+q,x,m,k+p,B,1,y,n,z);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,G,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT,g,k,1,t,u,r,y,n,z);0!=(e<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,e-k,g,k,-1,m,k+p,B,y,n,z,1,v,k+0*x+q,x);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,
a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,g,k,1,m,p,B,y,n,z);E=1;for(b=k;0<b;b--){G=1;for(d=g;0<d;d--)v[E-1+(G-1)*x+q]-=y[G-1+(E-1)*z+n],G+=1;E+=1}}else{if(b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT)){E=1;for(b=k;0<b;b--)this.dcopy(e,v,(E-1)*x+q,1,y,(E-1)*z+n,1),E+=1;this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,
a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,e,k,1,m,p,B,y,n,z);0!=(g<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,e,k,g-k,1,v,k*x+q,x,m,k+p,B,1,y,n,z);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,
a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,d,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT,e,k,1,t,u,r,y,n,z);0!=(g<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,e,g-k,k,-1,y,n,z,m,k+p,B,1,v,k*x+q,x);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,
a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,e,k,1,m,p,B,y,n,z);E=1;for(b=k;;){G=1;for(d=e;0<d;d--)v[G-1+(E-1)*x+q]-=y[G-1+(E-1)*z+n],G+=1;E+=1;b--;if(0>=b)break}}}else if(b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT)){E=1;for(b=k;0<b;b--)this.dcopy(g,v,e-k+E-1+q,x,y,(E-1)*z+n,1),E+=1;this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,
a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,g,k,1,m,e-k+p,B,y,n,z);0!=(e<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,g,k,e-k,1,v,q,x,m,p,B,1,y,n,z);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,
G,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT,g,k,1,t,u,r,y,n,z);0!=(e<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,e-k,g,k,-1,m,p,B,y,n,z,1,v,q,x);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,
a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,g,k,1,m,e-k+p,B,y,n,z);E=1;for(b=k;0<b;b--){G=1;for(d=g;0<d;d--)v[e-k+E-1+(G-1)*x+q]-=y[G-1+(E-1)*z+n],G+=1;E+=1}}else{if(b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT)){E=1;for(b=k;0<b;b--)this.dcopy(e,v,(g-k+E-1)*x+q,1,y,(E-1)*z+n,1),E+=1;this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,
a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,e,k,1,m,g-k+p,B,y,n,z);0!=(g<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,e,k,g-k,1,v,q,x,m,p,B,1,y,n,z);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,d,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT,
e,k,1,t,u,r,y,n,z);0!=(g<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,e,g-k,k,-1,y,n,z,m,p,B,1,v,q,x);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,
e,k,1,m,g-k+p,B,y,n,z);E=1;for(b=k;;){G=1;for(d=e;0<d;d--)v[G-1+(g-k+E-1)*x+q]-=y[G-1+(E-1)*z+n],G+=1;E+=1;b--;if(0>=b)break}}}else if(f.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasMajorType.ROWWISE))if(c.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasDirectionType.FORWARD))if(b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT)){E=1;for(b=k;0<b;b--)this.dcopy(g,v,E-1+q,x,y,(E-1)*z+n,1),E+=1;this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,
a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,g,k,1,m,p,B,y,n,z);0!=(e<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,g,k,e-k,1,v,k+q,x,m,k*B+p,B,1,y,n,z);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,
a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,G,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT,g,k,1,t,u,r,y,n,z);0!=(e<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,e-k,g,k,-1,m,k*B+p,B,y,n,z,1,v,k+0*x+q,x);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,
a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,g,k,1,m,p,B,y,n,z);E=1;for(b=k;0<b;b--){G=1;for(d=g;0<d;d--)v[E-1+(G-1)*x+q]-=y[G-1+(E-1)*z+n],G+=1;E+=1}}else{if(b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT)){E=1;for(b=k;0<b;b--)this.dcopy(e,v,(E-1)*x+q,1,y,(E-1)*z+n,1),E+=1;this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,
a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,e,k,1,m,p,B,y,n,z);0!=(g<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,e,k,g-k,1,v,k*x+q,x,m,k*B+p,B,1,y,n,z);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,
d,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT,e,k,1,t,u,r,y,n,z);0!=(g<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,e,g-k,k,-1,y,n,z,m,k*B+p,B,1,v,k*x+q,x);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,
a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,e,k,1,m,p,B,y,n,z);E=1;for(b=k;;){G=1;for(d=e;0<d;d--)v[G-1+(E-1)*x+q]-=y[G-1+(E-1)*z+n],G+=1;E+=1;b--;if(0>=b)break}}}else if(b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT)){E=1;for(b=k;0<b;b--)this.dcopy(g,v,e-k+E-1+q,x,y,(E-1)*z+n,1),E+=1;this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,
a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,g,k,1,m,(e-k)*B+p,B,y,n,z);0!=(e<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,g,k,e-k,1,v,q,x,m,p,B,1,y,n,z);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,G,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT,
g,k,1,t,u,r,y,n,z);0!=(e<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,e-k,g,k,-1,m,p,B,y,n,z,1,v,q,x);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,
g,k,1,m,(e-k)*B+p,B,y,n,z);E=1;for(b=k;0<b;b--){G=1;for(d=g;0<d;d--)v[e-k+E-1+(G-1)*x+q]-=y[G-1+(E-1)*z+n],G+=1;E+=1}}else if(b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT)){E=1;for(b=k;0<b;b--)this.dcopy(e,v,(g-k+E-1)*x+q,1,y,(E-1)*z+n,1),E+=1;this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,
e,k,1,m,(g-k)*B+p,B,y,n,z);0!=(g<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,e,k,g-k,1,v,q,x,m,p,B,1,y,n,z);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,d,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT,e,k,1,t,u,r,y,n,z);0!=(g<=k?0:1)&&this.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,
a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,e,g-k,k,-1,y,n,z,m,p,B,1,v,q,x);this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT,e,k,1,m,(g-k)*B+p,B,y,n,z);E=1;for(b=k;;){G=1;for(d=e;0<d;d--)v[G-1+(g-k+E-1)*x+q]-=y[G-1+(E-1)*z+n],G+=1;
E+=1;b--;if(0>=b)break}}};b.prototype.dcopy=function(a,b,d,c,f,e,g){if(!(0>=a))for(var k=0;k<a;k++)f[e]=b[d],e+=g,d+=c};b.prototype.dlarft=function(b,d,c,f,e,g,k,m,p,n,t,u){var r=0,v=0,v=0;if(0==(0!=c?0:1)){var q;if(b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasDirectionType.FORWARD))for(r=1,b=f;0<b;b--){if(0!=(0!=m[r-1+p]?0:1))for(v=1,q=r;0<q;q--)n[v-1+(r-1)*u+t]=0,v+=1;else v=e[r-1+(r-1)*k+g],e[r-1+(r-1)*k+g]=1,d.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasMajorType.COLUMNWISE)?
this.dgemv(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,c-r+1,r-1,-m[r-1+p],e,r-1+g,k,e,r-1+(r-1)*k+g,1,0,n,(r-1)*u+t,1):this.dgemv(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,r-1,c-r+1,-m[r-1+p],e,(r-1)*k+g,k,e,r-1+(r-1)*k+g,k,0,n,(r-1)*u+t,1),e[r-1+(r-1)*k+g]=v,this.dtrmv(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT,
r-1,n,t,u,n,(r-1)*u+t,1),n[r-1+(r-1)*u+t]=m[r-1+p];r+=1}else for(r=f,b=(1-f+-1)/-1;0<b;b--){if(0!=(0!=m[r-1+p]?0:1))for(v=r,q=f-r+1;0<q;q--)n[v-1+(r-1)*u+t]=0,v+=1;else 0!=(r>=f?0:1)&&(d.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasMajorType.COLUMNWISE)?(v=e[c-f+r-1+(r-1)*k+g],e[c-f+r-1+(r-1)*k+g]=1,this.dgemv(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,c-f+r,f-r,-m[r-1+p],e,r*k+g,k,e,(r-1)*k+g,1,0,n,r+(r-1)*u+t,1),e[c-f+r-1+(r-1)*k+g]=v):(v=e[r-1+(c-f+r-
1)*k+g],e[r-1+(c-f+r-1)*k+g]=1,this.dgemv(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,f-r,c-f+r,-m[r-1+p],e,r+g,k,e,r-1+g,k,0,n,r+(r-1)*u+t,1),e[r-1+(c-f+r-1)*k+g]=v),this.dtrmv(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT,f-r,n,r+r*u+t,u,n,r+(r-1)*u+t,1)),n[r-1+(r-1)*u+t]=m[r-1+p];r+=-1}}};b.prototype.dgeqr2=
function(b,d,c,f,e,g,k,m,p,n){var t=0,u=0,u=0;n[0]=0;0!=(0<=b?0:1)?n[0]=-1:0!=(0<=d?0:1)?n[0]=-2:0!=(e>=Math.max(1,b)?0:1)&&(n[0]=-4);if(0==(0==n[0]?0:1))for(u=Math.min(b,d),t=1,n=u;0<n;n--)this.dlarfg_adapter(b-t+1,c,t-1+(t-1)*e+f,c,Math.min(t+1,b)-1+(t-1)*e+f,1,g,t-1+k),0!=(t>=d?0:1)&&(u=c[t-1+(t-1)*e+f],c[t-1+(t-1)*e+f]=1,this.dlarf(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT,b-t+1,d-t,c,t-1+(t-1)*e+f,1,g[t-1+k],c,t-1+t*e+f,e,m,p),c[t-1+(t-1)*e+f]=u),t+=1};b.prototype.dlarfg_adapter=
function(a,b,d,c,f,e,g,k){var m=new Float64Array(1);m[0]=b[d];var n=new Float64Array(1);n[0]=g[k];this.dlarfg(a,m,c,f,e,n);b[d]=m[0];g[k]=n[0]};b.prototype.dlarf=function(b,d,c,f,e,g,k,m,p,n,t,u){b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT)?0!=(0==k?0:1)&&(this.dgemv(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.TRANSPOSE,d,c,1,m,p,n,f,e,g,0,t,u,1),this.dger(d,c,-k,f,e,g,t,u,1,m,p,n)):0!=(0==k?0:1)&&(this.dgemv(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,
d,c,1,m,p,n,f,e,g,0,t,u,1),this.dger(d,c,-k,t,u,1,f,e,g,m,p,n))};b.prototype.dnrm2=function(a,b,d,c){var f=0,e=f=0,g=0,k=0;if(0!=(0==(1<=c?0:1)?0:1))f=0;else if(0!=(1!=a?0:1))f=Math.abs(b[d]);else{e=0;k=g=1;for(a=(1+(a-1)*c-1+c)/c;0<a;a--)0!=(0==b[k-1+d]?0:1)&&(f=Math.abs(b[k-1+d]),0!=(e>=f?0:1)?(g=1+g*Math.pow(e/f,2),e=f):g+=Math.pow(f/e,2)),k+=c;f=e*Math.sqrt(g)}return f};b.prototype.dlapy2=function(a,b){var d=0,c=0,f=0,d=c=0,c=Math.abs(a),f=Math.abs(b),d=Math.max(c,f),c=Math.min(c,f);return d=
0!=(0!=c?0:1)?d:d*Math.sqrt(1+Math.pow(c/d,2))};b.prototype.dsign=function(a,b){return 0<b?Math.abs(a):0>b?-Math.abs(a):0};b.prototype.dlarfg=function(b,d,c,f,e,g){var k=0,m=0,p=0,n=0,m=0;if(0!=(1<b?0:1))g[0]=0;else if(m=this.dnrm2(b-1,c,f,e),0!=(0!=m?0:1))g[0]=0;else if(m=-this.dsign(this.dlapy2(d[0],m),d[0]),n=a.kevoree.modeling.util.PrimitiveHelper.DOUBLE_MIN_VALUE(),0!=(Math.abs(m)>=n?0:1)){p=1/n;k=0;do k+=1,this.dscal(b-1,p,c,f,e),m*=p,d[0]*=p;while(0!=(Math.abs(m)>=n?0:1));m=this.dnrm2(b-1,
c,f,e);m=-this.dsign(this.dlapy2(d[0],m),d[0]);g[0]=(m-d[0])/m;this.dscal(b-1,1/(d[0]-m),c,f,e);d[0]=m;for(b=k;0<b;b--)d[0]*=n}else g[0]=(m-d[0])/m,this.dscal(b-1,1/(d[0]-m),c,f,e),d[0]=m};b.prototype.shutdown=function(){};b.prototype.dtrti2=function(b,d,c,f,e,g,k){var m=!1,p=!1,n=p=0;k[0]=0;p=b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER);m=d.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT);0!=(p||b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER)?
0:1)?k[0]=-1:0!=(m||d.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT)?0:1)?k[0]=-2:0>c?k[0]=-3:g<Math.max(1,c)&&(k[0]=-5);if(0==k[0])if(p)for(p=1,b=c;0<b;b--)m?(f[p-1+(p-1)*g+e]=1/f[p-1+(p-1)*g+e],n=-f[p-1+(p-1)*g+e]):n=-1,this.dtrmv(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,d,p-1,f,e,g,f,(p-1)*g+e,1),this.dscal(p-1,n,f,(p-1)*g+e,1),p++;else for(b=p=c;0<b;b--)m?(f[p-1+
(p-1)*g+e]=1/f[p-1+(p-1)*g+e],n=-f[p-1+(p-1)*g+e]):n=-1,p<c&&(this.dtrmv(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,d,c-p,f,p+p*g+e,g,f,p+(p-1)*g+e,1),this.dscal(c-p,n,f,p+(p-1)*g+e,1)),p+=-1};b.prototype.print=function(a,b){for(var d=b+": ",c=0;c<a.length;c++)d=d+a[c]+" ";console.log(d)};b.prototype.dtrmv=function(b,d,c,f,e,g,k,m,p,n){var t=0,u=0,r=0,v=0,q=0,x=0,y=!1,y=c.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT);
0>=n?x=1-(f-1)*n:1!=n&&(x=1);if(d.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE))if(b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER))if(1==n)for(v=1,b=f;0<b;b--){if(0!=m[v-1+p]){t=m[v-1+p];u=1;for(d=v-1;0<d;d--)m[u-1+p]+=t*e[u-1+(v-1)*k+g],u++;y&&(m[v-1+p]*=e[v-1+(v-1)*k+g])}v++}else for(q=x,v=1,b=f;0<b;b--){if(0!=m[q-1+p]){t=m[q-1+p];r=x;u=1;for(d=v-1;0<d;d--)m[r-1+p]+=t*e[u-1+(v-1)*k+g],r+=n,u++;y&&(m[q-1+p]*=e[v-1+(v-1)*k+g])}q+=
n;v++}else if(1==n)for(b=v=f;0<b;b--){if(0!=m[v-1+p]){t=m[v-1+p];u=f;for(d=-(v-f);0<d;d--)m[u-1+p]+=t*e[u-1+(v-1)*k+g],u+=-1;y&&(m[v-1+p]*=e[v-1+(v-1)*k+g])}v+=-1}else for(q=x+=(f-1)*n,b=v=f;0<b;b--){if(0!=m[q-1+p]){t=m[q-1+p];r=x;u=f;for(d=-(v-f);0<d;d--)m[r-1+p]+=t*e[u-1+(v-1)*k+g],r-=n,u+=-1;y&&(m[q-1+p]*=e[v-1+(v-1)*k+g])}q-=n;v+=-1}else if(b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER))if(1==n)for(b=v=f;0<b;b--){t=m[v-1+p];y&&(t*=e[v-1+(v-1)*k+g]);u=v-1;for(d=
v-1;0<d;d--)t+=e[u-1+(v-1)*k+g]*m[u-1+p],u+=-1;m[v-1+p]=t;v+=-1}else for(q=x+(f-1)*n,v=f,b=-f;0<b;b--){t=m[q-1+p];r=q;y&&(t*=e[v-1+(v-1)*k+g]);u=v-1;for(d=v-1;0<d;d--)r-=n,t+=e[u-1+(v-1)*k+g]*m[r-1+p],u+=-1;m[q-1+p]=t;q-=n;v+=-1}else if(1==n)for(v=1,b=f;0<b;b--){t=m[v-1+p];y&&(t*=e[v-1+(v-1)*k+g]);u=v+1;for(d=f-(v+1)+1;0<d;d--)t+=e[u-1+(v-1)*k+g]*m[u-1+p],u++;m[v-1+p]=t;v++}else for(q=x,v=1,b=f;0<b;b--){t=m[q-1+p];r=q;y&&(t*=e[v-1+(v-1)*k+g]);u=v+1;for(d=f-(v+1)+1;0<d;d--)r+=n,t+=e[u-1+(v-1)*k+g]*
m[r-1+p],u++;m[q-1+p]=t;q+=n;v++}};b.prototype.dtrmm=function(b,d,c,f,e,g,k,m,p,n,t,u,r){var v=0,q=0,x=0,y=0,z=v=!1,q=!1,v=b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT),z=f.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT),q=d.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER);if(0==k)for(x=1,b=g;0<b;b--){q=1;for(d=e;0<d;d--)t[q-1+(x-1)*r+u]=0,q++;x++}else if(v)if(c.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE))if(q)for(x=
1,b=g;0<b;b--){y=1;for(d=e;0<d;d--){if(0!=t[y-1+(x-1)*r+u]){v=k*t[y-1+(x-1)*r+u];q=1;for(c=y-1;0<c;c--)t[q-1+(x-1)*r+u]+=v*m[q-1+(y-1)*n+p],q++;z&&(v*=m[y-1+(y-1)*n+p]);t[y-1+(x-1)*r+u]=v}y++}x++}else for(x=1,b=g;0<b;b--){for(d=y=e;0<d;d--){if(0!=t[y-1+(x-1)*r+u])for(v=k*t[y-1+(x-1)*r+u],t[y-1+(x-1)*r+u]=v,z&&(t[y-1+(x-1)*r+u]*=m[y-1+(y-1)*n+p]),q=y+1,c=e-(y+1)+1;0<c;c--)t[q-1+(x-1)*r+u]+=v*m[q-1+(y-1)*n+p],q++;y+=-1}x++}else if(q)for(x=1,b=g;0<b;b--){for(d=q=e;0<d;d--){v=t[q-1+(x-1)*r+u];z&&(v*=
m[q-1+(q-1)*n+p]);y=1;for(c=q-1;0<c;c--)v+=m[y-1+(q-1)*n+p]*t[y-1+(x-1)*r+u],y++;t[q-1+(x-1)*r+u]=k*v;q+=-1}x++}else for(x=1,b=g;0<b;b--){q=1;for(d=e;0<d;d--){v=t[q-1+(x-1)*r+u];z&&(v*=m[q-1+(q-1)*n+p]);y=q+1;for(c=e-(q+1)+1;0<c;c--)v+=m[y-1+(q-1)*n+p]*t[y-1+(x-1)*r+u],y++;t[q-1+(x-1)*r+u]=k*v;q++}x++}else if(c.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE))if(q)for(b=x=g;0<b;b--){v=k;z&&(v*=m[x-1+(x-1)*n+p]);q=1;for(d=e;0<d;d--)t[q-1+(x-1)*r+u]*=v,q++;y=1;for(d=
x-1;0<d;d--){if(0!=m[y-1+(x-1)*n+p])for(v=k*m[y-1+(x-1)*n+p],q=1,c=e;0<c;c--)t[q-1+(x-1)*r+u]+=v*t[q-1+(y-1)*r+u],q++;y++}x+=-1}else for(x=1,b=g;0<b;b--){v=k;z&&(v*=m[x-1+(x-1)*n+p]);q=1;for(d=e;0<d;d--)t[q-1+(x-1)*r+u]*=v,q++;y=x+1;for(d=g-(x+1)+1;0<d;d--){if(0!=m[y-1+(x-1)*n+p])for(v=k*m[y-1+(x-1)*n+p],q=1,c=e;0<c;c--)t[q-1+(x-1)*r+u]+=v*t[q-1+(y-1)*r+u],q++;y++}x++}else if(q)for(y=1,b=g;0<b;b--){x=1;for(d=y-1;0<d;d--){if(0!=m[x-1+(y-1)*n+p])for(v=k*m[x-1+(y-1)*n+p],q=1,c=e;0<c;c--)t[q-1+(x-1)*
r+u]+=v*t[q-1+(y-1)*r+u],q++;x++}v=k;z&&(v*=m[y-1+(y-1)*n+p]);if(1!=v)for(q=1,d=e;0<d;d--)t[q-1+(y-1)*r+u]*=v,q++;y++}else for(b=y=g;0<b;b--){x=y+1;for(d=g-(y+1)+1;0<d;d--){if(0!=m[x-1+(y-1)*n+p])for(v=k*m[x-1+(y-1)*n+p],q=1,c=e;0<c;c--)t[q-1+(x-1)*r+u]+=v*t[q-1+(y-1)*r+u],q++;x++}v=k;z&&(v*=m[y-1+(y-1)*n+p]);if(1!=v)for(q=1,d=e;0<d;d--)t[q-1+(y-1)*r+u]*=v,q++;y+=-1}};b.prototype.dtrtri=function(b,d,c,f,e,g,k){var m=!1,p=!1,n=p=0,t=m=0;k[0]=0;p=b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER);
m=d.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT);0!=(p||b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER)?0:1)?k[0]=-1:0!=(m||d.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.UNIT)?0:1)?k[0]=-2:0>c?k[0]=-3:g<Math.max(1,c)&&(k[0]=-5);if(0==k[0]&&0!=c){if(m){k[0]=1;for(t=c;0<t;t--){if(0==f[k[0]-1+(k[0]-1)*g+e])return;k[0]++}k[0]=0}m=this.ilaenv(1,"DTRTRI","",c,-1,-1,-1);if(m>=c)this.dtrti2(b,d,c,f,e,g,k);else if(p)for(p=
1,t=this.floorDiv(c-1+m,m);0<t;t--)n=Math.min(m,c-p+1),this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,d,p-1,n,1,f,e,g,f,(p-1)*g+e,g),this.dtrsm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,
d,p-1,n,-1,f,p-1+(p-1)*g+e,g,f,(p-1)*g+e,g),this.dtrti2(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER,d,n,f,p-1+(p-1)*g+e,g,k),p+=m;else for(p=t=this.floorDiv(c-1,m)*m+1,t=this.floorDiv(1-t+-m,-m);0<t;t--)n=Math.min(m,c-p+1),p+n<=c&&(this.dtrmm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,d,c-p-n+1,n,1,f,p+
n-1+(p+n-1)*g+e,g,f,p+n-1+(p-1)*g+e,g),this.dtrsm(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.RIGHT,a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,d,c-p-n+1,n,-1,f,p-1+(p-1)*g+e,g,f,p+n-1+(p-1)*g+e,g)),this.dtrti2(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.LOWER,d,n,f,p-1+(p-1)*g+e,g,k),p+=-m}};b.prototype.dgemv=function(b,d,c,f,e,g,k,m,p,n,t,u,r,v){var q=0,x=
0,y=0,z=y=0,D=0,G=0,q=x=G=D=0;b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE)?(x=c,q=d):(x=d,q=c);var D=0<n?1:1-(x-1)*n,G=0<v?1:1-(q-1)*v,E;if(1!=t)if(1==v)if(0==t)for(x=1,E=q;0<E;E--)u[x-1+r]=0,x++;else for(x=1,E=q;0<E;E--)u[x-1+r]*=t,x++;else if(y=G,0==t)for(x=1,E=q;0<E;E--)u[y-1+r]=0,y+=v,x++;else for(x=1,E=q;0<E;E--)u[y-1+r]*=t,y+=v,x++;if(0!=f)if(b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE))if(1==v)for(z=1,E=c;0<E;E--){if(0!=
m[D-1+p])for(q=f*m[D-1+p],x=1,b=d;0<b;b--)u[x-1+r]+=q*e[x-1+(z-1)*k+g],x++;D+=n;z++}else for(z=1,E=c;0<E;E--){if(0!=m[D-1+p])for(q=f*m[D-1+p],y=G,x=1,b=d;0<b;b--)u[y-1+r]+=q*e[x-1+(z-1)*k+g],y+=v,x++;D+=n;z++}else if(1==n)for(z=1,E=c;0<E;E--){q=0;x=1;for(b=d;0<b;b--)q+=e[x-1+(z-1)*k+g]*m[x-1+p],x++;u[G-1+r]+=f*q;G+=v;z++}else for(z=1,E=c;0<E;E--){q=0;y=D;x=1;for(b=d;0<b;b--)q+=e[x-1+(z-1)*k+g]*m[y-1+p],y+=n,x++;u[G-1+r]+=f*q;G+=v;z++}};b.prototype.ilaenv=function(a,b,d,c,f,e,g){return 64};b.prototype.dger=
function(a,b,d,c,f,e,g,k,m,n,t,u){var r=0,v=0,q=0,x=0,y=0,z=0,y=0<m?1:1-(b-1)*m,D;if(1==e)for(x=1;0<b;b--){if(0!=g[y-1+k])for(r=d*g[y-1+k],v=1,D=a;0<D;D--)n[v-1+(x-1)*u+t]+=c[v-1+f]*r,v++;y+=m;x++}else for(z=0<e?1:1-(a-1)*e,x=1;0<b;b--){if(0!=g[y-1+k])for(r=d*g[y-1+k],q=z,v=1,D=a;0<D;D--)n[v-1+(x-1)*u+t]+=c[q-1+f]*r,q+=e,v++;y+=m;x++}};b.prototype.idamax=function(a,b,d,c){var f=0,e=0,g=0,k=0,k=0;if(0>=c)return k;k=1;if(1==a)return k;if(1==c)for(f=Math.abs(b[d]),e=2,--a;0<a;a--)Math.abs(b[e-1+d])>
f&&(k=e,f=Math.abs(b[e-1+d])),e++;else for(g=1,f=Math.abs(b[d]),g+=c,e=2,--a;0<a;a--)Math.abs(b[g-1+d])>f&&(k=e,f=Math.abs(b[g-1+d])),g+=c,e++;return k};b.prototype.dswap=function(a,b,d,c,f,e,g){var k=0,m=0,n=0,t=0,k=n=0;if(!(0>=a)){var u;if(0!=(1==g?1:0)){n=a%3;if(0!=n){m=1;for(u=n;0<u;u--)k=b[m-1+d],b[m-1+d]=f[m-1+e],f[m-1+e]=k,m++;if(3>a)return}m=k=n+1;for(u=this.floorDiv(a-k+3,3);0<u;u--)k=b[m-1+d],b[m-1+d]=f[m-1+e],f[m-1+e]=k,k=b[m+d],b[m+d]=f[m+e],f[m+e]=k,k=b[m+1+d],b[m+1+d]=f[m+1+e],f[m+1+
e]=k,m+=3}else for(t=n=1,0>c&&(n=(-a+1)*c+1),0>g&&(t=(-a+1)*g+1),m=1,u=a;0<u;u--)k=b[n-1+d],b[n-1+d]=f[t-1+e],f[t-1+e]=k,n+=c,t+=g,m++}};b.prototype.dscal=function(a,b,d,c,f){var e=0,g=0,g=0,k;if(1==f){g=a%5;if(0!=g){e=1;for(k=g;0<k;k--)d[e-1+c]*=b,e++;if(5>a)return}e=g+=1;for(k=this.floorDiv(a-g+5,5);0<k;k--)d[e-1+c]*=b,d[e+c]*=b,d[e+1+c]*=b,d[e+2+c]*=b,d[e+3+c]*=b,e+=5}else for(e=1,k=this.floorDiv(a*f-1+f,f);0<k;k--)d[e-1+c]*=b,e+=f};b.prototype.dgetf2=function(b,d,c,f,e,g,k,m){var n=0,z=0,t=0,
z=0;m[0]=0;0>b?m[0]=-1:0>d?m[0]=-2:e<Math.max(1,b)&&(m[0]=-4);if(0==m[0]&&0!=d)for(var n=a.kevoree.modeling.util.PrimitiveHelper.DOUBLE_MIN_VALUE(),t=1,u=Math.min(b,d);0<u;u--){z=t-1+this.idamax(b-t+1,c,t-1+(t-1)*e+f,1);g[t-1+k]=z;if(0!=c[z-1+(t-1)*e+f]){if(z!=t&&this.dswap(d,c,t-1+f,e,c,z-1+f,e),t<b)if(Math.abs(c[t-1+(t-1)*e+f])>=n)this.dscal(b-t,1/c[t-1+(t-1)*e+f],c,t+(t-1)*e+f,1);else for(var z=1,r=b-t;0<r;r--)c[t+z-1+(t-1)*e+f]/=c[t-1+(t-1)*e+f],z++}else 0==m[0]&&(m[0]=t);t<Math.min(b,d)&&this.dger(b-
t,d-t,-1,c,t+(t-1)*e+f,1,c,t-1+t*e+f,e,c,t+t*e+f,e);t++}};b.prototype.dlaswp=function(a,b,d,c,f,e,g,k,m){var n=0,t=0,u=0,r=0,v=0,q=0,x=0,y=0,z=0,D=0,G=0;if(0<m)t=x=f,u=e,r=1;else if(0>m)x=1+(1-e)*m,t=e,u=f,r=-1;else return;D=32*this.floorDiv(a,32);if(0!=D)for(y=1,f=this.floorDiv(D-1+32,32);0<f;f--){q=x;n=t;for(e=this.floorDiv(u-t+r,r);0<e;e--){v=g[q-1+k];if(v!=n)for(var z=y,E=y+31-y+1;0<E;E--)G=b[n-1+(z-1)*c+d],b[n-1+(z-1)*c+d]=b[v-1+(z-1)*c+d],b[v-1+(z-1)*c+d]=G,z++;q+=m;n+=r}y+=32}if(D!=a)for(D++,
q=x,n=t,f=this.floorDiv(u-t+r,r);0<f;f--){v=g[q-1+k];if(v!=n)for(z=D,e=a-D+1;0<e;e--)G=b[n-1+(z-1)*c+d],b[n-1+(z-1)*c+d]=b[v-1+(z-1)*c+d],b[v-1+(z-1)*c+d]=G,z++;q+=m;n+=r}};b.prototype.dtrsm=function(b,d,c,f,e,g,k,m,n,z,t,u,r){var v=0,q=0,x=0,y=0,D=v=!1,q=!1,v=b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasSideType.LEFT),D=f.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasUnitType.NONUNIT),q=d.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasOrientationType.UPPER);if(0==
k)for(x=1,b=g;0<b;b--){q=1;for(d=e;0<d;d--)t[q-1+(x-1)*r+u]=0,q++;x++}else if(v)if(c.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE))if(q)for(x=1,b=g;0<b;b--){if(1!=k)for(q=1,d=e;0<d;d--)t[q-1+(x-1)*r+u]*=k,q++;for(d=y=e;0<d;d--){if(0!=t[y-1+(x-1)*r+u])for(D&&(t[y-1+(x-1)*r+u]/=m[y-1+(y-1)*z+n]),q=1,c=y-1;0<c;c--)t[q-1+(x-1)*r+u]-=t[y-1+(x-1)*r+u]*m[q-1+(y-1)*z+n],q++;y+=-1}x++}else for(x=1,b=g;0<b;b--){if(1!=k)for(q=1,d=e;0<d;d--)t[q-1+(x-1)*r+u]*=k,q++;y=1;for(d=
e;0<d;d--){if(0!=t[y-1+(x-1)*r+u])for(D&&(t[y-1+(x-1)*r+u]/=m[y-1+(y-1)*z+n]),q=y+1,c=e-(y+1)+1;0<c;c--)t[q-1+(x-1)*r+u]-=t[y-1+(x-1)*r+u]*m[q-1+(y-1)*z+n],q++;y++}x++}else if(q)for(x=1,b=g;0<b;b--){q=1;for(d=e;0<d;d--){v=k*t[q-1+(x-1)*r+u];y=1;for(c=q-1;0<c;c--)v-=m[y-1+(q-1)*z+n]*t[y-1+(x-1)*r+u],y++;D&&(v/=m[q-1+(q-1)*z+n]);t[q-1+(x-1)*r+u]=v;q++}x++}else for(x=1,b=g;0<b;b--){for(d=q=e;0<d;d--){v=k*t[q-1+(x-1)*r+u];y=q+1;for(c=e-q;0<c;c--)v-=m[y-1+(q-1)*z+n]*t[y-1+(x-1)*r+u],y++;D&&(v/=m[q-1+(q-
1)*z+n]);t[q-1+(x-1)*r+u]=v;q+=-1}x++}else if(c.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE))if(q)for(x=1,b=g;0<b;b--){if(1!=k)for(q=1,d=e;0<d;d--)t[q-1+(x-1)*r+u]*=k,q++;y=1;for(d=x-1;0<d;d--){if(0!=m[y-1+(x-1)*z+n])for(q=1,c=e;0<c;c--)t[q-1+(x-1)*r+u]-=m[y-1+(x-1)*z+n]*t[q-1+(y-1)*r+u],q++;y++}if(D)for(v=1/m[x-1+(x-1)*z+n],q=1,d=e;0<d;d--)t[q-1+(x-1)*r+u]*=v,q++;x++}else for(b=x=g;0<b;b--){if(1!=k)for(q=1,d=e;0<d;d--)t[q-1+(x-1)*r+u]*=k,q++;y=x+1;for(d=g-(x+
1)+1;0<d;d--){if(0!=m[y-1+(x-1)*z+n])for(q=1,c=e;0<c;c--)t[q-1+(x-1)*r+u]-=m[y-1+(x-1)*z+n]*t[q-1+(y-1)*r+u],q++;y++}if(D)for(v=1/m[x-1+(x-1)*z+n],q=1,d=e;0<d;d--)t[q-1+(x-1)*r+u]*=v,q++;x+=-1}else if(q)for(b=y=g;0<b;b--){if(D)for(v=1/m[y-1+(y-1)*z+n],q=1,d=e;0<d;d--)t[q-1+(y-1)*r+u]*=v,q++;x=1;for(d=y-1;0<d;d--){if(0!=m[x-1+(y-1)*z+n])for(v=m[x-1+(y-1)*z+n],q=1,c=e;0<c;c--)t[q-1+(x-1)*r+u]-=v*t[q-1+(y-1)*r+u],q++;x++}if(1!=k)for(q=1,d=e;0<d;d--)t[q-1+(y-1)*r+u]*=k,q++;y+=-1}else for(y=1,b=g;0<b;b--){if(D)for(v=
1/m[y-1+(y-1)*z+n],q=1,d=e;0<d;d--)t[q-1+(y-1)*r+u]*=v,q++;x=y+1;for(d=g-(y+1)+1;0<d;d--){if(0!=m[x-1+(y-1)*z+n])for(v=m[x-1+(y-1)*z+n],q=1,c=e;0<c;c--)t[q-1+(x-1)*r+u]-=v*t[q-1+(y-1)*r+u],q++;x++}if(1!=k)for(q=1,d=e;0<d;d--)t[q-1+(y-1)*r+u]*=k,q++;y++}};b.prototype.floorDiv=function(a,b){return Math.floor(a/b)};return b}();b.JavaBlas=d})(e.impl||(e.impl={}))})(g.blas||(g.blas={}));(function(e){var c=function(){function a(b,c,e,g,k){this._size=b;this._offset=c;this._segmentIndex=e;this._segment=g;
this._metaClass=k}a.prototype.size=function(){return this._size};a.prototype.get=function(a){return this._segment.getDoubleArrayElem(this._segmentIndex,this._offset+a,this._metaClass)};a.prototype.set=function(a,b){this._segment.setDoubleArrayElem(this._segmentIndex,this._offset+a,b,this._metaClass);return b};a.prototype.add=function(a,b){return this.set(a,this.get(a)+b)};a.prototype.addAll=function(a){for(var b=0;b<this._size;b++)this.add(b,a)};a.prototype.setAll=function(a){};a.prototype.addElement=
function(a,b){};a.prototype.clone=function(){return null};a.prototype.data=function(){return this._segment.getDoubleArray(this._segmentIndex,this._metaClass)};a.prototype.setData=function(a){};return a}();e.Array1D=c;c=function(){function b(a,b,c,e,g,k){this._nbRows=a;this._nbColumns=b;this._offset=c;this._segment=g;this._segmentIndex=e;this._metaClass=k}b.prototype.rows=function(){return this._nbRows};b.prototype.columns=function(){return this._nbColumns};b.prototype.getIndex=function(a,b){return this._offset+
a+this._nbRows*b};b.prototype.get=function(a,b){return this._segment.getDoubleArrayElem(this._segmentIndex,this.getIndex(a,b),this._metaClass)};b.prototype.set=function(a,b,c){this._segment.setDoubleArrayElem(this._segmentIndex,this.getIndex(a,b),c,this._metaClass);return c};b.prototype.add=function(a,b,c){return this.set(a,b,this.get(a,b)+c)};b.prototype.setAll=function(a){for(var b=0;b<this._nbColumns*this._nbRows;b++)this._segment.setDoubleArrayElem(this._segmentIndex,this._offset+b,a,this._metaClass)};
b.prototype.addRow=function(a,b){};b.prototype.addCol=function(a,b){};b.prototype.clone=function(){var b=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(this._nbRows,this._nbColumns);b.setData(this.data());return b};b.prototype.data=function(){return this._segment.getDoubleArray(this._segmentIndex,this._metaClass)};b.prototype.setData=function(a){for(var b=0;b<a.length;b++)this.setAtIndex(b,a[b])};b.prototype.getAtIndex=function(a){return this._segment.getDoubleArrayElem(this._segmentIndex,
this._offset+a,this._metaClass)};b.prototype.setAtIndex=function(a,b){this._segment.setDoubleArrayElem(this._segmentIndex,this._offset+a,b,this._metaClass);return b};b.prototype.addAtIndex=function(a,b){return this.setAtIndex(a,this.getAtIndex(a)+b)};return b}();e.Array2D=c;c=function(){function b(a,b){this._nbRows=a;this._nbColumns=b;this._back=new Float64Array(a*b)}b.prototype.getIndex=function(a,b){return a+this._nbRows*b};b.prototype.rows=function(){return this._nbRows};b.prototype.columns=function(){return this._nbColumns};
b.prototype.get=function(a,b){return this._back[this.getIndex(a,b)]};b.prototype.set=function(a,b,c){return this._back[this.getIndex(a,b)]=c};b.prototype.add=function(a,b,c){return this.set(a,b,this.get(a,b)+c)};b.prototype.setAll=function(a){};b.prototype.addRow=function(a,b){};b.prototype.addCol=function(a,b){};b.prototype.clone=function(){var b=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(this._nbRows,this._nbColumns);java.lang.System.arraycopy(this._back,0,b._back,0,this._nbColumns*
this._nbRows);return b};b.prototype.data=function(){return this._back};b.prototype.setData=function(a){this._back=a};b.prototype.getAtIndex=function(a){return this._back[a]};b.prototype.setAtIndex=function(a,b){return this._back[a]=b};b.prototype.addAtIndex=function(a,b){this._back[a]+=b;return this._back[a]};return b}();e.NativeArray2D=c})(g.impl||(g.impl={}));(function(e){var c=function(){function b(){}b.leadingDimension=function(a){return Math.max(a.columns(),a.rows())};b.multiply=function(b,c,
e){var g=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(b.rows(),c.columns());e.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,g.rows(),g.columns(),b.columns(),1,b.data(),0,b.rows(),c.data(),0,c.rows(),0,g.data(),0,g.rows());return g};b.multiplyTransposeAlpha=function(b,c,e,g,k,m){if(a.kevoree.modeling.util.maths.structure.matrix.MatrixOperations.testDimensionsAB(b,c,e,g)){var n=
0,A=new Int32Array(2);b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE)?(n=e.columns(),c.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE)?(A[0]=e.rows(),A[1]=g.columns()):(A[0]=e.rows(),A[1]=g.rows())):(n=e.rows(),c.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE)?(A[0]=e.columns(),A[1]=g.columns()):(A[0]=e.columns(),A[1]=g.rows()));A=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(A[0],
A[1]);m.dgemm(b,c,A.rows(),A.columns(),n,k,e.data(),0,e.rows(),g.data(),0,g.rows(),0,A.data(),0,A.rows());return A}throw Error("Dimensions mismatch between A,B and C");};b.multiplyAlphaBetaResult=function(b,c,e,g,k,m){if(a.kevoree.modeling.util.maths.structure.matrix.MatrixOperations.testDimensionsABC(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,c,e,k))m.dgemm(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,
a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,k.rows(),k.columns(),c.columns(),b,c.data(),0,c.rows(),e.data(),0,e.rows(),g,k.data(),0,k.rows());else throw Error("Dimensions mismatch between A,B and C");};b.multiplyTransposeAlphaBetaResult=function(b,c,e,g,k,m,n,A){if(a.kevoree.modeling.util.maths.structure.matrix.MatrixOperations.testDimensionsABC(b,c,g,k,n)){var z;z=b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE)?g.columns():g.rows();
A.dgemm(b,c,n.rows(),n.columns(),z,e,g.data(),0,g.rows(),k.data(),0,k.rows(),m,n.data(),0,n.rows())}else throw Error("Dimensions mismatch between A,B and C");};b.testDimensionsABC=function(b,c,e,g,k){return b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE)?c.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE)?e.columns()==g.rows()&&k.rows()==e.rows()&&k.columns()==g.columns():e.columns()==g.columns()&&k.rows()==e.rows()&&k.columns()==
g.rows():c.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE)?e.rows()==g.rows()&&k.rows()==e.columns()&&k.columns()==g.columns():e.rows()==g.columns()&&k.rows()==e.columns()&&k.columns()==g.rows()};b.testDimensionsAB=function(b,c,e,g){return b.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE)?c.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE)?e.columns()==g.rows():e.columns()==g.columns():c.equals(a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE)?
e.rows()==g.rows():e.rows()==g.columns()};b.initMatrice=function(a,b){for(var c=new java.util.Random,e=0,g=0;g<a.columns();g++)for(var k=0;k<a.rows();k++)b?a.set(k,g,100*c.nextDouble()-50):a.set(k,g,e),e++};b.random=function(b,c){for(var e=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(b,c),g=new java.util.Random,k=0;k<b*c;k++)e.setAtIndex(k,100*g.nextDouble()-50);return e};b.invert=function(b,c){if(b.rows()!=b.columns())return null;new a.kevoree.modeling.util.maths.structure.matrix.solver.LU(b.rows(),
b.columns());var e=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(b.rows(),b.columns()),g=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(b.rows(),b.columns());java.lang.System.arraycopy(b.data(),0,g.data(),0,b.columns()*b.rows());return(new a.kevoree.modeling.util.maths.structure.matrix.solver.LU(g.rows(),g.columns())).invert(g,c)?(e.setData(g.data()),e):null};b.invertInPlace=function(b,c){if(b.rows()!=b.columns())return!1;new a.kevoree.modeling.util.maths.structure.matrix.solver.LU(b.rows(),
b.columns());new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(b.rows(),b.columns());return(new a.kevoree.modeling.util.maths.structure.matrix.solver.LU(b.rows(),b.columns())).invert(b,c)};b.scale=function(a,b){if(0==a)b.setAll(0);else for(var c=0;c<b.rows()*b.columns();c++)b.setAtIndex(c,a*b.getAtIndex(c))};b.transpose=function(c){var e=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(c.columns(),c.rows());c.columns()==c.rows()?a.kevoree.modeling.util.maths.structure.matrix.MatrixOperations.transposeSquare(c,
e):c.columns()>b.TRANSPOSE_SWITCH&&c.rows()>b.TRANSPOSE_SWITCH?a.kevoree.modeling.util.maths.structure.matrix.MatrixOperations.transposeBlock(c,e):a.kevoree.modeling.util.maths.structure.matrix.MatrixOperations.transposeStandard(c,e);return e};b.transposeSquare=function(a,b){for(var c=1,e=a.columns(),g=0;g<a.rows();g++){var k=(g+1)*a.columns()+g,m=g*(a.columns()+1);for(b.setAtIndex(m,a.getAtIndex(m));c<e;c++)b.setAtIndex(c,a.getAtIndex(k)),b.setAtIndex(k,a.getAtIndex(c)),k+=a.columns();c+=g+2;e+=
a.columns()}};b.transposeStandard=function(a,b){for(var c=0,e=0;e<b.columns();e++)for(var g=e,k=c+b.rows();c<k;)b.setAtIndex(c++,a.getAtIndex(g)),g+=a.rows()};b.transposeBlock=function(a,c){for(var e=0;e<a.columns();e+=b.BLOCK_WIDTH)for(var g=Math.min(b.BLOCK_WIDTH,a.columns()-e),k=e*a.rows(),m=e,n=0;n<a.rows();n+=b.BLOCK_WIDTH)for(var A=Math.min(b.BLOCK_WIDTH,a.rows()-n),A=k+A;k<A;k++){for(var z=k,D=m,p=D+g;D<p;D++)c.setAtIndex(D,a.getAtIndex(z)),z+=a.rows();m+=c.rows()}};b.createIdentity=function(b){var c=
new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(b,b);c.setAll(0);for(var e=0;e<b;e++)c.set(e,e,1);return c};b.solve=function(b,c,e,g,k){if(e){e=new a.kevoree.modeling.util.maths.structure.matrix.solver.LU(b.rows(),b.columns());e.factor(b,k);if(e.isSingular())return null;e.transSolve(c,g,k);return c}var m=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(b.rows(),b.columns());java.lang.System.arraycopy(b.data(),0,m.data(),0,b.columns()*b.rows());e=new a.kevoree.modeling.util.maths.structure.matrix.solver.LU(m.rows(),
m.columns());e.factor(m,k);if(e.isSingular())return null;b=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(c.rows(),c.columns());java.lang.System.arraycopy(c.data(),0,b.data(),0,c.columns()*c.rows());e.transSolve(b,g,k);return b};b.compareMatrix=function(a,b){for(var c=0,e=0;e<a.rows();e++)for(var g=0;g<a.columns();g++)c<Math.abs(a.get(e,g)-b.get(e,g))&&(c=Math.abs(a.get(e,g)-b.get(e,g)));return c};b.BLOCK_WIDTH=60;b.TRANSPOSE_SWITCH=375;return b}();e.MatrixOperations=c;(function(b){var c=
function(){function b(c,d){this.LU=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(c,d);this.piv=new Int32Array(Math.min(c,d))}b.prototype.getLU=function(){return this.LU};b.factorize=function(b,c){return(new a.kevoree.modeling.util.maths.structure.matrix.solver.LU(b.rows(),b.columns())).factor(b,c)};b.prototype.factor=function(a,b){this.singular=!1;var c=new Int32Array(1);c[0]=0;b.dgetrf(a.rows(),a.columns(),a.data(),0,a.rows(),this.piv,0,c);if(0<c[0])this.singular=!0;else if(0>c[0])throw Error();
this.LU.setData(a.data());return this};b.prototype.getLower=function(){for(var b=this.LU.rows(),c=this.LU.rows()<this.LU.columns()?this.LU.rows():this.LU.columns(),d=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(b,c),e=0;e<c;e++){d.set(e,e,1);for(var f=0;f<e;f++)d.set(e,f,this.LU.get(e,f))}if(b>c)for(e=c;e<b;e++)for(f=0;f<c;f++)d.set(e,f,this.LU.get(e,f));return d};b.prototype.getUpper=function(){for(var b=this.LU.rows()<this.LU.columns()?this.LU.rows():this.LU.columns(),c=this.LU.columns(),
d=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(b,c),e=0;e<b;e++)for(var f=e;f<c;f++)d.set(e,f,this.LU.get(e,f));return d};b.prototype.getPivots=function(){return this.piv};b.prototype.isSingular=function(){return this.singular};b.prototype.solve=function(b,c){return this.transSolve(b,a.kevoree.modeling.util.maths.structure.blas.KBlasTransposeType.NOTRANSPOSE,c)};b.prototype.transSolve=function(a,b,c){if(a.rows()!=this.LU.rows())throw Error("B.numRows() !\x3d LU.numRows()");var d=
new Int32Array(1);c.dgetrs(b,this.LU.rows(),a.columns(),this.LU.data(),0,this.LU.rows(),this.piv,0,a.data(),0,this.LU.rows(),d);if(0>d[0])throw Error();return a};b.prototype.invert=function(a,b){var c=new Int32Array(1);c[0]=0;b.dgetrf(a.rows(),a.columns(),a.data(),0,a.rows(),this.piv,0,c);if(0<c[0])return this.singular=!0,!1;if(0>c[0])throw Error();for(var d=a.rows()*a.rows(),e=new Float64Array(d),f=0;f<d;f++)e[f]=0;b.dgetri(a.rows(),a.data(),0,a.rows(),this.piv,0,e,0,d,c);return 0!=c[0]?!1:!0};return b}();
b.LU=c;c=function(){function b(c,d){if(d>c)throw Error("n \x3e m");this.m=c;this.n=d;this.k=Math.min(this.m,this.n);this.tau=new Float64Array(this.k);this.R=new a.kevoree.modeling.util.maths.structure.impl.NativeArray2D(this.m,this.n)}b.factorize=function(b,c,d){return(new a.kevoree.modeling.util.maths.structure.matrix.solver.QR(b.rows(),b.columns())).factor(b,c,d)};b.prototype.factor=function(a,b,c){a=b?a:a.clone();this.work=new Float64Array(1);b=new Int32Array(1);b[0]=0;c.dgeqrf(this.m,this.n,new Float64Array(0),
0,this.m,new Float64Array(0),0,this.work,0,-1,b);b=0!=b[0]?this.n:this.work[0];b=Math.max(1,b);this.work=new Float64Array(b);this.workGen=new Float64Array(1);b=new Int32Array(1);b[0]=0;c.dorgqr(this.m,this.n,this.k,new Float64Array(0),0,this.m,new Float64Array(0),0,this.workGen,0,-1,b);b=0!=b[0]?this.n:this.workGen[0];b=Math.max(1,b);this.workGen=new Float64Array(b);b=new Int32Array(1);b[0]=0;c.dgeqrf(this.m,this.n,a.data(),0,this.m,this.tau,0,this.work,0,this.work.length,b);if(0>b[0])throw Error(""+
b[0]);for(var d=0;d<a.columns();d++)for(var e=0;e<=d;e++)this.R.set(e,d,a.get(e,d));b[0]=0;c.dorgqr(this.m,this.n,this.k,a.data(),0,this.m,this.tau,0,this.workGen,0,this.workGen.length,b);if(0>b[0])throw Error();this.Q=a;return this};b.prototype.getR=function(){return this.R};b.prototype.getQ=function(){return this.Q};return b}();b.QR=c})(e.solver||(e.solver={}))})(g.matrix||(g.matrix={}))})(m.structure||(m.structure={}))})(z.maths||(z.maths={}))})(D.util||(D.util={}))})(L.modeling||(L.modeling={}))})(a.kevoree||
(a.kevoree={}))})(org||(org={}));var model;
(function(a){var L=function(D){function J(z){D.call(this,z);this._metaModel=new org.kevoree.modeling.meta.impl.MetaModel("Model");z=[];z[1]=a.meta.MetaBinarySearchTree.getInstance();z[2]=a.meta.MetaCustomer.getInstance();z[0]=a.meta.MetaNode.getInstance();this._metaModel.init(z,[])}__extends(J,D);J.prototype.internalCreateUniverse=function(z){return new a.ModelUniverse(z,this._manager)};J.prototype.metaModel=function(){return this._metaModel};J.prototype.internalCreateObject=function(z,n,m,k,g,e){if(null==
k)return null;switch(k.index()){case 1:return new a.impl.BinarySearchTreeImpl(z,n,m,k,this._manager,g,e);case 2:return new a.impl.CustomerImpl(z,n,m,k,this._manager,g,e);case 0:return new a.impl.NodeImpl(z,n,m,k,this._manager,g,e);default:return new org.kevoree.modeling.meta.impl.GenericObject(z,n,m,k,this._manager,g,e)}};J.prototype.createBinarySearchTree=function(z,n){return this.create(a.meta.MetaBinarySearchTree.getInstance(),z,n)};J.prototype.createCustomer=function(z,n){return this.create(a.meta.MetaCustomer.getInstance(),
z,n)};J.prototype.createNode=function(z,n){return this.create(a.meta.MetaNode.getInstance(),z,n)};return J}(org.kevoree.modeling.abs.AbstractKModel);a.ModelModel=L;L=function(D){function J(a,n){D.call(this,a,n)}__extends(J,D);J.prototype.internal_create=function(z){return new a.impl.ModelViewImpl(this._universe,z,this._manager)};return J}(org.kevoree.modeling.abs.AbstractKUniverse);a.ModelUniverse=L;(function(D){var J=function(z){function n(a,k,g,e,c,b,d){z.call(this,a,k,g,e,c,b,d)}__extends(n,z);
n.prototype.addRoot=function(m){this.add(a.meta.MetaBinarySearchTree.REL_ROOT,m);return this};n.prototype.removeRoot=function(m){this.remove(a.meta.MetaBinarySearchTree.REL_ROOT,m);return this};n.prototype.getRoot=function(m){null!=m&&this.getRelation(a.meta.MetaBinarySearchTree.REL_ROOT,function(a){for(var g=[],e=0;e<a.length;e++)g[e]=a[e];m(g)})};n.prototype.sizeOfRoot=function(){return this.size(a.meta.MetaBinarySearchTree.REL_ROOT)};return n}(org.kevoree.modeling.abs.AbstractKObject);D.BinarySearchTreeImpl=
J;J=function(z){function n(a,k,g,e,c,b,d){z.call(this,a,k,g,e,c,b,d)}__extends(n,z);n.prototype.getPassword=function(){return this.get(a.meta.MetaCustomer.ATT_PASSWORD)};n.prototype.setPassword=function(m){this.set(a.meta.MetaCustomer.ATT_PASSWORD,m);return this};n.prototype.getBalance=function(){return this.get(a.meta.MetaCustomer.ATT_BALANCE)};n.prototype.setBalance=function(m){this.set(a.meta.MetaCustomer.ATT_BALANCE,m);return this};n.prototype.getCardnumber=function(){return this.get(a.meta.MetaCustomer.ATT_CARDNUMBER)};
n.prototype.setCardnumber=function(m){this.set(a.meta.MetaCustomer.ATT_CARDNUMBER,m);return this};n.prototype.getEmail=function(){return this.get(a.meta.MetaCustomer.ATT_EMAIL)};n.prototype.setEmail=function(m){this.set(a.meta.MetaCustomer.ATT_EMAIL,m);return this};n.prototype.getUsername=function(){return this.get(a.meta.MetaCustomer.ATT_USERNAME)};n.prototype.setUsername=function(m){this.set(a.meta.MetaCustomer.ATT_USERNAME,m);return this};return n}(org.kevoree.modeling.abs.AbstractKObject);D.CustomerImpl=
J;J=function(z){function n(a,k,g){z.call(this,a,k,g)}__extends(n,z);n.prototype.createBinarySearchTree=function(){return this.create(a.meta.MetaBinarySearchTree.getInstance())};n.prototype.createCustomer=function(){return this.create(a.meta.MetaCustomer.getInstance())};n.prototype.createNode=function(){return this.create(a.meta.MetaNode.getInstance())};return n}(org.kevoree.modeling.abs.AbstractKView);D.ModelViewImpl=J;J=function(z){function n(a,k,g,e,c,b,d){z.call(this,a,k,g,e,c,b,d)}__extends(n,
z);n.prototype.getCypher=function(){return this.get(a.meta.MetaNode.ATT_CYPHER)};n.prototype.setCypher=function(m){this.set(a.meta.MetaNode.ATT_CYPHER,m);return this};n.prototype.getPlain=function(){return this.get(a.meta.MetaNode.ATT_PLAIN)};n.prototype.setPlain=function(m){this.set(a.meta.MetaNode.ATT_PLAIN,m);return this};n.prototype.addLeft=function(m){this.add(a.meta.MetaNode.REL_LEFT,m);return this};n.prototype.removeLeft=function(m){this.remove(a.meta.MetaNode.REL_LEFT,m);return this};n.prototype.getLeft=
function(m){null!=m&&this.getRelation(a.meta.MetaNode.REL_LEFT,function(a){for(var g=[],e=0;e<a.length;e++)g[e]=a[e];m(g)})};n.prototype.sizeOfLeft=function(){return this.size(a.meta.MetaNode.REL_LEFT)};n.prototype.addRight=function(m){this.add(a.meta.MetaNode.REL_RIGHT,m);return this};n.prototype.removeRight=function(m){this.remove(a.meta.MetaNode.REL_RIGHT,m);return this};n.prototype.getRight=function(m){null!=m&&this.getRelation(a.meta.MetaNode.REL_RIGHT,function(a){for(var g=[],e=0;e<a.length;e++)g[e]=
a[e];m(g)})};n.prototype.sizeOfRight=function(){return this.size(a.meta.MetaNode.REL_RIGHT)};return n}(org.kevoree.modeling.abs.AbstractKObject);D.NodeImpl=J})(a.impl||(a.impl={}));(function(D){var J=function(z){function n(){z.call(this,"model.BinarySearchTree",1,null,new Int32Array([]));var a=[];a[0]=n.REL_ROOT;this.init(a)}__extends(n,z);n.getInstance=function(){null==n.INSTANCE&&(n.INSTANCE=new a.meta.MetaBinarySearchTree);return n.INSTANCE};n.INSTANCE=null;n.REL_ROOT=new org.kevoree.modeling.meta.impl.MetaRelation("root",
0,!0,0,"op_BinarySearchTree_root",1,-1);return n}(org.kevoree.modeling.meta.impl.MetaClass);D.MetaBinarySearchTree=J;J=function(z){function n(){z.call(this,"model.Customer",2,null,new Int32Array([]));var a=[];a[0]=n.ATT_PASSWORD;a[1]=n.ATT_BALANCE;a[2]=n.ATT_CARDNUMBER;a[3]=n.ATT_EMAIL;a[4]=n.ATT_USERNAME;this.init(a)}__extends(n,z);n.getInstance=function(){null==n.INSTANCE&&(n.INSTANCE=new a.meta.MetaCustomer);return n.INSTANCE};n.INSTANCE=null;n.ATT_PASSWORD=new org.kevoree.modeling.meta.impl.MetaAttribute("password",
0,0,!1,-2,org.kevoree.modeling.extrapolation.impl.DiscreteExtrapolation.instance());n.ATT_BALANCE=new org.kevoree.modeling.meta.impl.MetaAttribute("balance",1,0,!1,-2,org.kevoree.modeling.extrapolation.impl.DiscreteExtrapolation.instance());n.ATT_CARDNUMBER=new org.kevoree.modeling.meta.impl.MetaAttribute("cardnumber",2,0,!1,-2,org.kevoree.modeling.extrapolation.impl.DiscreteExtrapolation.instance());n.ATT_EMAIL=new org.kevoree.modeling.meta.impl.MetaAttribute("email",3,0,!1,-2,org.kevoree.modeling.extrapolation.impl.DiscreteExtrapolation.instance());
n.ATT_USERNAME=new org.kevoree.modeling.meta.impl.MetaAttribute("username",4,0,!1,-2,org.kevoree.modeling.extrapolation.impl.DiscreteExtrapolation.instance());return n}(org.kevoree.modeling.meta.impl.MetaClass);D.MetaCustomer=J;J=function(z){function n(){z.call(this,"model.Node",0,null,new Int32Array([]));var a=[];a[0]=n.ATT_CYPHER;a[1]=n.ATT_PLAIN;a[2]=n.REL_LEFT;a[3]=n.REL_OP_BINARYSEARCHTREE_ROOT;a[4]=n.REL_RIGHT;a[5]=n.REL_OP_NODE_LEFT;a[6]=n.REL_OP_NODE_RIGHT;this.init(a)}__extends(n,z);n.getInstance=
function(){null==n.INSTANCE&&(n.INSTANCE=new a.meta.MetaNode);return n.INSTANCE};n.INSTANCE=null;n.ATT_CYPHER=new org.kevoree.modeling.meta.impl.MetaAttribute("cypher",0,0,!1,-2,org.kevoree.modeling.extrapolation.impl.DiscreteExtrapolation.instance());n.ATT_PLAIN=new org.kevoree.modeling.meta.impl.MetaAttribute("plain",1,0,!1,-2,org.kevoree.modeling.extrapolation.impl.DiscreteExtrapolation.instance());n.REL_LEFT=new org.kevoree.modeling.meta.impl.MetaRelation("left",2,!0,0,"op_Node_left",0,-1);n.REL_OP_BINARYSEARCHTREE_ROOT=
new org.kevoree.modeling.meta.impl.MetaRelation("op_BinarySearchTree_root",3,!1,1,"root",0,-1);n.REL_RIGHT=new org.kevoree.modeling.meta.impl.MetaRelation("right",4,!0,0,"op_Node_right",0,-1);n.REL_OP_NODE_LEFT=new org.kevoree.modeling.meta.impl.MetaRelation("op_Node_left",5,!1,0,"left",0,-1);n.REL_OP_NODE_RIGHT=new org.kevoree.modeling.meta.impl.MetaRelation("op_Node_right",6,!1,0,"right",0,-1);return n}(org.kevoree.modeling.meta.impl.MetaClass);D.MetaNode=J})(a.meta||(a.meta={}))})(model||(model=
{}));